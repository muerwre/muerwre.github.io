{"generatedAt":1668163496679,"generateTime":71,"contents":[{"_path":"/blockchain/common-typescript-examples","_dir":"blockchain","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Common Typescript Examples","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Simple #dapp example for tests: "},{"type":"element","tag":"a","props":{"href":"https://metamask.github.io/test-dapp/","rel":["nofollow"]},"children":[{"type":"text","value":"https://metamask.github.io/test-dapp/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Interaction with smart contracts described in "},{"type":"element","tag":"a","props":{"href":"Smart%20contracts"},"children":[{"type":"text","value":"Smart contracts"}]}]}]},{"type":"element","tag":"h2","props":{"id":"connecting-to-node"},"children":[{"type":"text","value":"Connecting to node"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If #Metamask extension installed, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Web3.givenProvider"}]},{"type":"text","value":" is available in global window. You can use "},{"type":"element","tag":"a","props":{"href":"https://infura.io","rel":["nofollow"]},"children":[{"type":"text","value":"Infura"}]},{"type":"text","value":" or your node instead:"}]},{"type":"element","tag":"code","props":{"code":"import Web3 from 'web3';\n\n// URL of your node\nconst PROVIDER_URL = 'https://...';\n\nexport const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import Web3 from 'web3';\n\n// URL of your node\nconst PROVIDER_URL = 'https://...';\n\nexport const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-wallet-balance"},"children":[{"type":"text","value":"Getting wallet balance"}]},{"type":"element","tag":"code","props":{"code":"const getBalance = async (address: string) => {\n    return await web3.eth.getBalance(address);\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const getBalance = async (address: string) => {\n    return await web3.eth.getBalance(address);\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-wallet-address"},"children":[{"type":"text","value":"Getting wallet address"}]},{"type":"element","tag":"code","props":{"code":"// first we need to authorize\nconst authorize = async () => {\n  await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n}\n\n// then we can get wallet address\nconst getCurrentAddressUser = () => {\n    return web3.currentProvider.selectedAddress;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// first we need to authorize\nconst authorize = async () => {\n  await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n}\n\n// then we can get wallet address\nconst getCurrentAddressUser = () => {\n    return web3.currentProvider.selectedAddress;\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"sending-transaction"},"children":[{"type":"text","value":"Sending transaction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sending "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" tokens with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"memo"}]},{"type":"text","value":" as value:"}]},{"type":"element","tag":"code","props":{"code":"\nconst transfer = async ({ \n  from, \n  to, \n  value, \n  memo, \n  privateKey, \n  gasLimit = 44000 \n}) => {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const gasPrice = await web3.eth.getGasPrice();\n    \n    const rawTx = {\n      from,\n      to,\n      value: web3.utils.toHex(Web3.utils.toWei(value, 'ether')),\n      gasLimit: web3.utils.toHex(gasLimit),\n      gasPrice: web3.utils.toHex(gasPrice),\n      nonce: web3.utils.toHex(nonce),\n      data: memo,\n    };\n    \n    const privateKeyBuffer = EthUtil.toBuffer(privateKey);\n    \n    const tx = new Transaction(rawTx);\n    \n    tx.sign(privateKeyBuffer);\n    const serializedTx = tx.serialize();\n    \n    return this.web3.eth.sendSignedTransaction(\n      `0x${serializedTx.toString('hex')}`\n    );\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"\nconst transfer = async ({ \n  from, \n  to, \n  value, \n  memo, \n  privateKey, \n  gasLimit = 44000 \n}) => {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const gasPrice = await web3.eth.getGasPrice();\n    \n    const rawTx = {\n      from,\n      to,\n      value: web3.utils.toHex(Web3.utils.toWei(value, 'ether')),\n      gasLimit: web3.utils.toHex(gasLimit),\n      gasPrice: web3.utils.toHex(gasPrice),\n      nonce: web3.utils.toHex(nonce),\n      data: memo,\n    };\n    \n    const privateKeyBuffer = EthUtil.toBuffer(privateKey);\n    \n    const tx = new Transaction(rawTx);\n    \n    tx.sign(privateKeyBuffer);\n    const serializedTx = tx.serialize();\n    \n    return this.web3.eth.sendSignedTransaction(\n      `0x${serializedTx.toString('hex')}`\n    );\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"estimating-transaction-fee"},"children":[{"type":"text","value":"Estimating transaction FEE"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful to get fixed amount of tokens from user with pre-estimated fee."}]},{"type":"element","tag":"code","props":{"code":"import { web3 } from '.';\n\nconst estimateFee = async ({\n    from,\n    to,\n    value,\n    memo,\n}) => {\n    const gasPrice = await web3.eth.getGasPrice();\n    const gasLimit = await web3.eth.estimateGas({\n      from,\n      to,\n      value: web3.utils.toHex(web3.utils.toWei(value, 'ether')),\n      data: web3.utils.asciiToHex(memo),\n    }).call();\n    \n    return web3.utils.fromWei(\n      BigInt(gasPrice.toString())\n        .multiply(BigInt(gasLimit.toString()))\n        .toString()\n    );\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { web3 } from '.';\n\nconst estimateFee = async ({\n    from,\n    to,\n    value,\n    memo,\n}) => {\n    const gasPrice = await web3.eth.getGasPrice();\n    const gasLimit = await web3.eth.estimateGas({\n      from,\n      to,\n      value: web3.utils.toHex(web3.utils.toWei(value, 'ether')),\n      data: web3.utils.asciiToHex(memo),\n    }).call();\n    \n    return web3.utils.fromWei(\n      BigInt(gasPrice.toString())\n        .multiply(BigInt(gasLimit.toString()))\n        .toString()\n    );\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"subscribing-to-wallet-address-change"},"children":[{"type":"text","value":"Subscribing to wallet address change"}]},{"type":"element","tag":"code","props":{"code":"import { web3 } from '.';\n\nweb3.currentProvider.on('accountsChanged', callback);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { web3 } from '.';\n\nweb3.currentProvider.on('accountsChanged', callback);\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"watching-network-change"},"children":[{"type":"text","value":"Watching network change"}]},{"type":"element","tag":"code","props":{"code":"ethereum.on('chainChanged', handler: (chainId: string) => void);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"ethereum.on('chainChanged', handler: (chainId: string) => void);\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"adding-custom-token-to-wallet"},"children":[{"type":"text","value":"Adding custom token to wallet"}]},{"type":"element","tag":"code","props":{"code":"window.ethereum\n  .request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: '0xb60e8dd61c5d32be8058bb8eb970870f07233155',\n        symbol: 'FOO',\n        decimals: 18,\n        image: 'https://foo.io/token-image.svg',\n      },\n    },\n  })\n  .then((success) => {\n    if (success) {\n      console.log('FOO successfully added to wallet!')\n    } else {\n      throw new Error('Something went wrong.')\n    }\n  })\n  .catch(console.error)\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"window.ethereum\n  .request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: '0xb60e8dd61c5d32be8058bb8eb970870f07233155',\n        symbol: 'FOO',\n        decimals: 18,\n        image: 'https://foo.io/token-image.svg',\n      },\n    },\n  })\n  .then((success) => {\n    if (success) {\n      console.log('FOO successfully added to wallet!')\n    } else {\n      throw new Error('Something went wrong.')\n    }\n  })\n  .catch(console.error)\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"changing-network-to-custom"},"children":[{"type":"text","value":"Changing network to custom"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Checking current chainId:"}]},{"type":"element","tag":"code","props":{"code":"const getChainID = async () => {\n    return ethereum.request({ method: 'eth_chainId' })\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const getChainID = async () => {\n    return ethereum.request({ method: 'eth_chainId' })\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Asking wallet to change current network:"}]},{"type":"element","tag":"code","props":{"code":"try {\n  await window.ethereum.request({\n    method: 'wallet_switchEthereumChain',\n    params: [{ chainId: '0x03' }], // ropsten chainID (3) in hex\n  });\n} catch (switchError) {\n  // This error code indicates that the chain has not been added to MetaMask.\n  if (error.code === 4902) {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{ \n          chainId: '0x03', // ropsten chainID (3) in hex\n          chainName: 'Ropsten Test Network', \n          nativeCurrency: { \n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n          }, \n          rpcUrls: ['https://ropsten.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'], \n          blockExplorerUrls: ['https://ropsten.etherscan.io'] \n        }] ,\n      });\n    } catch (addError) {\n      // handle \"add\" error\n    }\n  }\n  // handle other \"switch\" errors\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"try {\n  await window.ethereum.request({\n    method: 'wallet_switchEthereumChain',\n    params: [{ chainId: '0x03' }], // ropsten chainID (3) in hex\n  });\n} catch (switchError) {\n  // This error code indicates that the chain has not been added to MetaMask.\n  if (error.code === 4902) {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{ \n          chainId: '0x03', // ropsten chainID (3) in hex\n          chainName: 'Ropsten Test Network', \n          nativeCurrency: { \n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n          }, \n          rpcUrls: ['https://ropsten.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'], \n          blockExplorerUrls: ['https://ropsten.etherscan.io'] \n        }] ,\n      });\n    } catch (addError) {\n      // handle \"add\" error\n    }\n  }\n  // handle other \"switch\" errors\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Simple #dapp example for tests: "},{"type":"element","tag":"a","props":{"href":"https://metamask.github.io/test-dapp/","rel":["nofollow"]},"children":[{"type":"text","value":"https://metamask.github.io/test-dapp/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Interaction with smart contracts described in "},{"type":"element","tag":"a","props":{"href":"Smart%20contracts"},"children":[{"type":"text","value":"Smart contracts"}]}]}]},{"type":"element","tag":"h2","props":{"id":"connecting-to-node"},"children":[{"type":"text","value":"Connecting to node"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If #Metamask extension installed, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Web3.givenProvider"}]},{"type":"text","value":" is available in global window. You can use "},{"type":"element","tag":"a","props":{"href":"https://infura.io","rel":["nofollow"]},"children":[{"type":"text","value":"Infura"}]},{"type":"text","value":" or your node instead:"}]},{"type":"element","tag":"code","props":{"code":"import Web3 from 'web3';\n\n// URL of your node\nconst PROVIDER_URL = 'https://...';\n\nexport const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'web3'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// URL of your node"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"PROVIDER_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'https://...'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"givenProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"PROVIDER_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-wallet-balance"},"children":[{"type":"text","value":"Getting wallet balance"}]},{"type":"element","tag":"code","props":{"code":"const getBalance = async (address: string) => {\n    return await web3.eth.getBalance(address);\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a56e32"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-072376"},"children":[{"type":"text","value":"getBalance"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-284487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a56e32"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0eba7a"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-284487"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca9641"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-a56e32"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getBalance"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-wallet-address"},"children":[{"type":"text","value":"Getting wallet address"}]},{"type":"element","tag":"code","props":{"code":"// first we need to authorize\nconst authorize = async () => {\n  await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n}\n\n// then we can get wallet address\nconst getCurrentAddressUser = () => {\n    return web3.currentProvider.selectedAddress;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// first we need to authorize"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"currentProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({ method: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'eth_requestAccounts'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// then we can get wallet address"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getCurrentAddressUser"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"currentProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"selectedAddress"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sending-transaction"},"children":[{"type":"text","value":"Sending transaction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sending "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" tokens with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"memo"}]},{"type":"text","value":" as value:"}]},{"type":"element","tag":"code","props":{"code":"\nconst transfer = async ({ \n  from, \n  to, \n  value, \n  memo, \n  privateKey, \n  gasLimit = 44000 \n}) => {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const gasPrice = await web3.eth.getGasPrice();\n    \n    const rawTx = {\n      from,\n      to,\n      value: web3.utils.toHex(Web3.utils.toWei(value, 'ether')),\n      gasLimit: web3.utils.toHex(gasLimit),\n      gasPrice: web3.utils.toHex(gasPrice),\n      nonce: web3.utils.toHex(nonce),\n      data: memo,\n    };\n    \n    const privateKeyBuffer = EthUtil.toBuffer(privateKey);\n    \n    const tx = new Transaction(rawTx);\n    \n    tx.sign(privateKeyBuffer);\n    const serializedTx = tx.serialize();\n    \n    return this.web3.eth.sendSignedTransaction(\n      `0x${serializedTx.toString('hex')}`\n    );\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"transfer"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ({ "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"memo"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"privateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"gasLimit"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}) "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"nonce"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getTransactionCount"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"gasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getGasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"rawTx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      value: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toWei"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'ether'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":")),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      gasLimit: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"gasLimit"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      gasPrice: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"gasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      nonce: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"nonce"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      data: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"memo"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"privateKeyBuffer"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"EthUtil"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toBuffer"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"privateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"tx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"Transaction"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"rawTx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"tx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"sign"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"privateKeyBuffer"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"serializedTx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"tx"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"serialize"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"sendSignedTransaction"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"`0x${"}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"serializedTx"}]},{"type":"element","tag":"span","props":{"class":"ct-0622cd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-0622cd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'hex'"}]},{"type":"element","tag":"span","props":{"class":"ct-0622cd"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"}`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"estimating-transaction-fee"},"children":[{"type":"text","value":"Estimating transaction FEE"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful to get fixed amount of tokens from user with pre-estimated fee."}]},{"type":"element","tag":"code","props":{"code":"import { web3 } from '.';\n\nconst estimateFee = async ({\n    from,\n    to,\n    value,\n    memo,\n}) => {\n    const gasPrice = await web3.eth.getGasPrice();\n    const gasLimit = await web3.eth.estimateGas({\n      from,\n      to,\n      value: web3.utils.toHex(web3.utils.toWei(value, 'ether')),\n      data: web3.utils.asciiToHex(memo),\n    }).call();\n    \n    return web3.utils.fromWei(\n      BigInt(gasPrice.toString())\n        .multiply(BigInt(gasLimit.toString()))\n        .toString()\n    );\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'.'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"estimateFee"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"memo"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}) "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"gasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getGasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f74013"},"children":[{"type":"text","value":"gasLimit"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"estimateGas"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      value: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toWei"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'ether'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":")),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      data: "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"asciiToHex"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"memo"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    })."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"utils"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"fromWei"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-60bb49"},"children":[{"type":"text","value":"BigInt"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"gasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"())"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"multiply"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-60bb49"},"children":[{"type":"text","value":"BigInt"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"gasLimit"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"()))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"subscribing-to-wallet-address-change"},"children":[{"type":"text","value":"Subscribing to wallet address change"}]},{"type":"element","tag":"code","props":{"code":"import { web3 } from '.';\n\nweb3.currentProvider.on('accountsChanged', callback);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'.'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"currentProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'accountsChanged'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"watching-network-change"},"children":[{"type":"text","value":"Watching network change"}]},{"type":"element","tag":"code","props":{"code":"ethereum.on('chainChanged', handler: (chainId: string) => void);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"ethereum"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'chainChanged'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"handler"}]},{"type":"element","tag":"span","props":{"class":"ct-9be48b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"adding-custom-token-to-wallet"},"children":[{"type":"text","value":"Adding custom token to wallet"}]},{"type":"element","tag":"code","props":{"code":"window.ethereum\n  .request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: '0xb60e8dd61c5d32be8058bb8eb970870f07233155',\n        symbol: 'FOO',\n        decimals: 18,\n        image: 'https://foo.io/token-image.svg',\n      },\n    },\n  })\n  .then((success) => {\n    if (success) {\n      console.log('FOO successfully added to wallet!')\n    } else {\n      throw new Error('Something went wrong.')\n    }\n  })\n  .catch(console.error)\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"ethereum"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    method: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'wallet_watchAsset'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    params: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      type: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'ERC20'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      options: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        address: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'0xb60e8dd61c5d32be8058bb8eb970870f07233155'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        symbol: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'FOO'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        decimals: "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff13b"},"children":[{"type":"text","value":"18"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        image: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'https://foo.io/token-image.svg'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-072376"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-0eba7a"},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-a56e32"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d0af16"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"success"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'FOO successfully added to wallet!'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-60bb49"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'Something went wrong.'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"changing-network-to-custom"},"children":[{"type":"text","value":"Changing network to custom"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Checking current chainId:"}]},{"type":"element","tag":"code","props":{"code":"const getChainID = async () => {\n    return ethereum.request({ method: 'eth_chainId' })\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"getChainID"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-e4ff92"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"ethereum"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({ method: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'eth_chainId'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Asking wallet to change current network:"}]},{"type":"element","tag":"code","props":{"code":"try {\n  await window.ethereum.request({\n    method: 'wallet_switchEthereumChain',\n    params: [{ chainId: '0x03' }], // ropsten chainID (3) in hex\n  });\n} catch (switchError) {\n  // This error code indicates that the chain has not been added to MetaMask.\n  if (error.code === 4902) {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{ \n          chainId: '0x03', // ropsten chainID (3) in hex\n          chainName: 'Ropsten Test Network', \n          nativeCurrency: { \n              name: 'ETH',\n              symbol: 'ETH',\n              decimals: 18\n          }, \n          rpcUrls: ['https://ropsten.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'], \n          blockExplorerUrls: ['https://ropsten.etherscan.io'] \n        }] ,\n      });\n    } catch (addError) {\n      // handle \"add\" error\n    }\n  }\n  // handle other \"switch\" errors\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"ethereum"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    method: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'wallet_switchEthereumChain'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    params: [{ chainId: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'0x03'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" }], "}]},{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// ropsten chainID (3) in hex"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"switchError"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// This error code indicates that the chain has not been added to MetaMask."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff13b"},"children":[{"type":"text","value":"4902"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"ethereum"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-5d5a4e"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        method: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'wallet_addEthereumChain'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        params: [{ "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          chainId: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'0x03'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// ropsten chainID (3) in hex"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          chainName: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'Ropsten Test Network'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          nativeCurrency: { "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"              name: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'ETH'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"              symbol: "}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'ETH'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"              decimals: "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff13b"},"children":[{"type":"text","value":"18"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          }, "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          rpcUrls: ["}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'https://ropsten.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"], "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"          blockExplorerUrls: ["}]},{"type":"element","tag":"span","props":{"class":"ct-5352e6"},"children":[{"type":"text","value":"'https://ropsten.etherscan.io'"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"] "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"        }] ,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-6cdcaf"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e5d748"},"children":[{"type":"text","value":"addError"}]},{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// handle \"add\" error"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9ab66e"},"children":[{"type":"text","value":"// handle other \"switch\" errors"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b7f34c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3ff13b{color:#79C0FF}.ct-9be48b{color:#C9D1D9}.ct-60bb49{color:#79C0FF}.ct-0622cd{color:#A5D6FF}.ct-ca9641{color:#79C0FF}.ct-0eba7a{color:#FFA657}.ct-284487{color:#FF7B72}.ct-072376{color:#D2A8FF}.ct-d0af16{color:#C9D1D9}.ct-a56e32{color:#FF7B72}.ct-5d5a4e{color:#D2A8FF}.ct-f74013{color:#79C0FF}.ct-e4ff92{color:#FF7B72}.ct-9ab66e{color:#8B949E}.ct-5352e6{color:#A5D6FF}.ct-e5d748{color:#C9D1D9}.ct-b7f34c{color:#C9D1D9}.ct-6cdcaf{color:#FF7B72}.light .ct-6cdcaf{color:#859900}.light .ct-b7f34c{color:#657B83}.light .ct-e5d748{color:#268BD2}.light .ct-5352e6{color:#2AA198}.light .ct-9ab66e{color:#93A1A1}.light .ct-e4ff92{color:#073642}.light .ct-f74013{color:#268BD2}.light .ct-5d5a4e{color:#268BD2}.light .ct-a56e32{color:#073642}.light .ct-d0af16{color:#657B83}.light .ct-072376{color:#268BD2}.light .ct-284487{color:#859900}.light .ct-0eba7a{color:#657B83}.light .ct-ca9641{color:#859900}.light .ct-0622cd{color:#657B83}.light .ct-60bb49{color:#859900}.light .ct-9be48b{color:#859900}.light .ct-3ff13b{color:#D33682}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"connecting-to-node","depth":2,"text":"Connecting to node"},{"id":"getting-wallet-balance","depth":2,"text":"Getting wallet balance"},{"id":"getting-wallet-address","depth":2,"text":"Getting wallet address"},{"id":"sending-transaction","depth":2,"text":"Sending transaction"},{"id":"estimating-transaction-fee","depth":2,"text":"Estimating transaction FEE"},{"id":"subscribing-to-wallet-address-change","depth":2,"text":"Subscribing to wallet address change"},{"id":"watching-network-change","depth":2,"text":"Watching network change"},{"id":"adding-custom-token-to-wallet","depth":2,"text":"Adding custom token to wallet"},{"id":"changing-network-to-custom","depth":2,"text":"Changing network to custom"}]}},"_type":"markdown","_id":"content:Blockchain:Common typescript examples.md","_source":"content","_file":"Blockchain/Common typescript examples.md","_extension":"md"},{"_path":"/blockchain/smart-contracts","_dir":"blockchain","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Smart Contracts","description":"For common functions see Common typescript examples.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For common functions see "},{"type":"element","tag":"a","props":{"href":"Common%20typescript%20examples"},"children":[{"type":"text","value":"Common typescript examples"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"getting-smart-contract-instance"},"children":[{"type":"text","value":"Getting smart contract instance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful for calling smart contract methods:"}]},{"type":"element","tag":"code","props":{"code":"import { Contract } from 'web3-eth-contract';\nimport { web3 } from '.';\n\nconst getContract = (abi: object, address?: string): Contract => {\n  const abiFromJson = JSON.parse(JSON.stringify(abi));\n  return new web3.eth.Contract(abiFromJson, address);\n};\n\nexport default getContract;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { Contract } from 'web3-eth-contract';\nimport { web3 } from '.';\n\nconst getContract = (abi: object, address?: string): Contract => {\n  const abiFromJson = JSON.parse(JSON.stringify(abi));\n  return new web3.eth.Contract(abiFromJson, address);\n};\n\nexport default getContract;\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"executing-contract-method"},"children":[{"type":"text","value":"Executing contract method"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contract has "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"read"}]},{"type":"text","value":" and "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"write"}]},{"type":"text","value":" methods. To get a list of methods, you can paste contract address on  "},{"type":"element","tag":"a","props":{"href":"https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7#readContract","rel":["nofollow"]},"children":[{"type":"text","value":"https://etherscan.io/ ETH"}]},{"type":"text","value":" or any other service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Read"}]},{"type":"text","value":" methods doesn't require spending "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"gas"}]},{"type":"text","value":". "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Write"}]},{"type":"text","value":" methods cost some amount of "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"gas"}]},{"type":"text","value":", hence they will be executed with confirmation from user."}]},{"type":"element","tag":"h3","props":{"id":"example-for-metamask-without-private-key"},"children":[{"type":"text","value":"Example for #Metamask without private key"}]},{"type":"element","tag":"code","props":{"code":"// see example below\nimport { getContract } from '.';\n\n// ABI of contract\nconst CONTRACT_ABI = { /* ... */ };\n // address for contract\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n\nexport const executeContractMethod = async ({}) => {\n  // getting contract\n  const contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n  \n  // Calling write method\n  try {\n    // authorizing with Metamask\n    await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n    // getting wallet address\n    const addressUser = web3.currentProvider.selectedAddress;\n    // calling \"store\" store method for contract\n    // payload should include `from` address, that matches\n    // current user's wallet\n    await contract.methods.store(0, 'Parameter').send({\n      from: addressUser,\n    });\n  } catch (e) {\n    throw new Error(e);\n  }\n  \n  // calling read method\n  try {\n    // this method can return data\n    const result = await contract.methods.retrieve().call();\n  } catch (e) {\n    throw new Error(e);\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// see example below\nimport { getContract } from '.';\n\n// ABI of contract\nconst CONTRACT_ABI = { /* ... */ };\n // address for contract\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n\nexport const executeContractMethod = async ({}) => {\n  // getting contract\n  const contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n  \n  // Calling write method\n  try {\n    // authorizing with Metamask\n    await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n    // getting wallet address\n    const addressUser = web3.currentProvider.selectedAddress;\n    // calling \"store\" store method for contract\n    // payload should include `from` address, that matches\n    // current user's wallet\n    await contract.methods.store(0, 'Parameter').send({\n      from: addressUser,\n    });\n  } catch (e) {\n    throw new Error(e);\n  }\n  \n  // calling read method\n  try {\n    // this method can return data\n    const result = await contract.methods.retrieve().call();\n  } catch (e) {\n    throw new Error(e);\n  }\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"nodejs-and-react-native-example"},"children":[{"type":"text","value":"Node.js and React Native example"}]},{"type":"element","tag":"code","props":{"code":"// see example below\nimport { getContract } from '.';\n\n// ABI контракта\nconst CONTRACT_ABI = { /* ... */ };\n// contract address\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n// getting contract\nconst contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n// account's private key\nconst privateKey = '...';\n\n// write-methods requires private key\nconst executeContractMethod = async (val: number) => {\n    const transaction = contract.methods.store(val);\n    const account = web3.eth.accounts.privateKeyToAccount(privateKey);\n    const options = {\n      to: CONTRACT_ADDRESS,\n      data: transaction.encodeABI(),\n      gas: await transaction.estimateGas({ from: account.address }),\n      gasPrice: await web3.eth.getGasPrice(),\n    };\n    const signed = await web3.eth.accounts.signTransaction(\n      options,\n      privateKey,\n    );\n    await web3.eth.sendSignedTransaction(signed.rawTransaction!);\n};\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// see example below\nimport { getContract } from '.';\n\n// ABI контракта\nconst CONTRACT_ABI = { /* ... */ };\n// contract address\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n// getting contract\nconst contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n// account's private key\nconst privateKey = '...';\n\n// write-methods requires private key\nconst executeContractMethod = async (val: number) => {\n    const transaction = contract.methods.store(val);\n    const account = web3.eth.accounts.privateKeyToAccount(privateKey);\n    const options = {\n      to: CONTRACT_ADDRESS,\n      data: transaction.encodeABI(),\n      gas: await transaction.estimateGas({ from: account.address }),\n      gasPrice: await web3.eth.getGasPrice(),\n    };\n    const signed = await web3.eth.accounts.signTransaction(\n      options,\n      privateKey,\n    );\n    await web3.eth.sendSignedTransaction(signed.rawTransaction!);\n};\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"calling-a-batch-of-contracts-methods"},"children":[{"type":"text","value":"Calling a batch of contract's methods"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Function calls batch of requests, returning array of results. For example:"}]},{"type":"element","tag":"code","props":{"code":"  const requests = [\n   contract.method.balanceOf().call,\n   contract.method.getStaked().call\n  ]\n\n  const result = await makeBatchRequest(request);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"  const requests = [\n   contract.method.balanceOf().call,\n   contract.method.getStaked().call\n  ]\n\n  const result = await makeBatchRequest(request);\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n\nconst makeBatchRequest = (calls: any[]) => {\n  try {\n    const web3 = getWeb3NoAccount();\n    const batch = new web3.BatchRequest();\n\n    const promises = calls.map((call) => {\n      return new Promise((resolve, reject) => {\n        batch.add(\n          call.request({}, (err, result) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve(result);\n            }\n          })\n        );\n      });\n    });\n\n    batch.execute();\n\n    return Promise.all(promises);\n  } catch {\n    return null;\n  }\n};\n\nexport default makeBatchRequest;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n\nconst makeBatchRequest = (calls: any[]) => {\n  try {\n    const web3 = getWeb3NoAccount();\n    const batch = new web3.BatchRequest();\n\n    const promises = calls.map((call) => {\n      return new Promise((resolve, reject) => {\n        batch.add(\n          call.request({}, (err, result) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve(result);\n            }\n          })\n        );\n      });\n    });\n\n    batch.execute();\n\n    return Promise.all(promises);\n  } catch {\n    return null;\n  }\n};\n\nexport default makeBatchRequest;\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"subscribing-to-smart-contract-events"},"children":[{"type":"text","value":"Subscribing to smart contract events"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There're different ways to subscribe for contract events. For all of them you will need following variables:"}]},{"type":"element","tag":"code","props":{"code":"  import Web3 from 'web3';\n  const web3 = new Web3('YOUR_RPC_ENDPOINT_HERE');\n  const ABI = 'YOUR ABI HERE';\n  const CONTRACT_ADDRESS = 'YOUR CONTRACT ADDRESS HERE';\n  const myContract = new Web3.Contract(ABI, CONTRACT_ADDRESS);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"  import Web3 from 'web3';\n  const web3 = new Web3('YOUR_RPC_ENDPOINT_HERE');\n  const ABI = 'YOUR ABI HERE';\n  const CONTRACT_ADDRESS = 'YOUR CONTRACT ADDRESS HERE';\n  const myContract = new Web3.Contract(ABI, CONTRACT_ADDRESS);\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"by-accessing-contractevents"},"children":[{"type":"text","value":"By accessing contract.events"}]},{"type":"element","tag":"code","props":{"code":"referralProgramContract.events\n  .RegisterUser()\n  .on('connected', (subscriptionId: string) => {\n    console.log(`| UserRegistered | events | ${subscriptionId}`);\n  })\n  .on(\n    'data',\n    async (event: {\n      removed: boolean;\n      returnValues: RegisterUserResponseInterface;\n    }) => {\n      try {\n        if (event.removed) {\n          return;\n        }\n        const { user, referrer } = event.returnValues;\n        console.log(user, referrer);\n      } catch (e) {\n        console.log(`| ONCE | ${e}`);\n      }\n    },\n  )\n  .on('error', (error: ErrnoException) => {\n    console.log(error);\n  });\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"referralProgramContract.events\n  .RegisterUser()\n  .on('connected', (subscriptionId: string) => {\n    console.log(`| UserRegistered | events | ${subscriptionId}`);\n  })\n  .on(\n    'data',\n    async (event: {\n      removed: boolean;\n      returnValues: RegisterUserResponseInterface;\n    }) => {\n      try {\n        if (event.removed) {\n          return;\n        }\n        const { user, referrer } = event.returnValues;\n        console.log(user, referrer);\n      } catch (e) {\n        console.log(`| ONCE | ${e}`);\n      }\n    },\n  )\n  .on('error', (error: ErrnoException) => {\n    console.log(error);\n  });\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"with-filtering"},"children":[{"type":"text","value":"With filtering"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We're listening to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Transfer"}]},{"type":"text","value":" event here:"}]},{"type":"element","tag":"code","props":{"code":"  let options = {\n    filter: {\n        value: [],\n    },\n    fromBlock: 0\n  };\n\n  myContract.events.Transfer(options)\n    .on('data', event => console.log(event))\n    .on('changed', changed => console.log(changed))\n    .on('error', err => throw err)\n    .on('connected', str => console.log(str))\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"  let options = {\n    filter: {\n        value: [],\n    },\n    fromBlock: 0\n  };\n\n  myContract.events.Transfer(options)\n    .on('data', event => console.log(event))\n    .on('changed', changed => console.log(changed))\n    .on('error', err => throw err)\n    .on('connected', str => console.log(str))\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"common-subscribe-method"},"children":[{"type":"text","value":"Common Subscribe method"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Filtering options can also be specified:"}]},{"type":"element","tag":"code","props":{"code":"  let options = {\n    fromBlock: 0,\n    address: ['address-1', 'address-2'],    //Only get events from specific addresses\n    topics: []                              //What topics to subscribe to\n  };\n\n  let subscription = ('logs', options, (err,event) => {\n      if (!err)\n      console.log(event)\n  });\n\n  subscription.on('data', event => console.log(event))\n  subscription.on('changed', changed => console.log(changed))\n  subscription.on('error', err => { throw err })\n  subscription.on('connected', nr => console.log(nr))\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"  let options = {\n    fromBlock: 0,\n    address: ['address-1', 'address-2'],    //Only get events from specific addresses\n    topics: []                              //What topics to subscribe to\n  };\n\n  let subscription = ('logs', options, (err,event) => {\n      if (!err)\n      console.log(event)\n  });\n\n  subscription.on('data', event => console.log(event))\n  subscription.on('changed', changed => console.log(changed))\n  subscription.on('error', err => { throw err })\n  subscription.on('connected', nr => console.log(nr))\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"getting-event-history"},"children":[{"type":"text","value":"Getting event history"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting history for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Transfer"}]},{"type":"text","value":" events for specific values. More info can be found "},{"type":"element","tag":"a","props":{"href":"https://web3js.readthedocs.io/en/v1.2.11/web3-eth-subscribe.html#","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]}]},{"type":"element","tag":"code","props":{"code":"  //example options(optional)\n  let options = {\n    filter: {\n        // only get events where transfer value was 1000 or 1337\n        value: ['1000', '1337']    \n    },\n    // number | \"earliest\" | \"pending\" | \"latest\"\n    fromBlock: 0,                  \n    toBlock: 'latest'\n  };\n\n  myContract.getPastEvents('Transfer', options)\n    .then(results => console.log(results))\n    .catch(err => throw err);\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"  //example options(optional)\n  let options = {\n    filter: {\n        // only get events where transfer value was 1000 or 1337\n        value: ['1000', '1337']    \n    },\n    // number | \"earliest\" | \"pending\" | \"latest\"\n    fromBlock: 0,                  \n    toBlock: 'latest'\n  };\n\n  myContract.getPastEvents('Transfer', options)\n    .then(results => console.log(results))\n    .catch(err => throw err);\n\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For common functions see "},{"type":"element","tag":"a","props":{"href":"Common%20typescript%20examples"},"children":[{"type":"text","value":"Common typescript examples"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"getting-smart-contract-instance"},"children":[{"type":"text","value":"Getting smart contract instance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful for calling smart contract methods:"}]},{"type":"element","tag":"code","props":{"code":"import { Contract } from 'web3-eth-contract';\nimport { web3 } from '.';\n\nconst getContract = (abi: object, address?: string): Contract => {\n  const abiFromJson = JSON.parse(JSON.stringify(abi));\n  return new web3.eth.Contract(abiFromJson, address);\n};\n\nexport default getContract;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"Contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'web3-eth-contract'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'.'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e9de6d"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"abi"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7d862c"},"children":[{"type":"text","value":"abiFromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-42216e"},"children":[{"type":"text","value":"JSON"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7d862c"},"children":[{"type":"text","value":"parse"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"Contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"abiFromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ba8c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ba8c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"executing-contract-method"},"children":[{"type":"text","value":"Executing contract method"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contract has "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"read"}]},{"type":"text","value":" and "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"write"}]},{"type":"text","value":" methods. To get a list of methods, you can paste contract address on  "},{"type":"element","tag":"a","props":{"href":"https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7#readContract","rel":["nofollow"]},"children":[{"type":"text","value":"https://etherscan.io/ ETH"}]},{"type":"text","value":" or any other service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Read"}]},{"type":"text","value":" methods doesn't require spending "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"gas"}]},{"type":"text","value":". "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Write"}]},{"type":"text","value":" methods cost some amount of "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"gas"}]},{"type":"text","value":", hence they will be executed with confirmation from user."}]},{"type":"element","tag":"h3","props":{"id":"example-for-metamask-without-private-key"},"children":[{"type":"text","value":"Example for #Metamask without private key"}]},{"type":"element","tag":"code","props":{"code":"// see example below\nimport { getContract } from '.';\n\n// ABI of contract\nconst CONTRACT_ABI = { /* ... */ };\n // address for contract\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n\nexport const executeContractMethod = async ({}) => {\n  // getting contract\n  const contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n  \n  // Calling write method\n  try {\n    // authorizing with Metamask\n    await web3.currentProvider.request({ method: 'eth_requestAccounts' });\n    // getting wallet address\n    const addressUser = web3.currentProvider.selectedAddress;\n    // calling \"store\" store method for contract\n    // payload should include `from` address, that matches\n    // current user's wallet\n    await contract.methods.store(0, 'Parameter').send({\n      from: addressUser,\n    });\n  } catch (e) {\n    throw new Error(e);\n  }\n  \n  // calling read method\n  try {\n    // this method can return data\n    const result = await contract.methods.retrieve().call();\n  } catch (e) {\n    throw new Error(e);\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// see example below"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'.'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// ABI of contract"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"/* ... */"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// address for contract"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'0xdea164f67df4dbfe675d5271c9d404e0260f33bb'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"executeContractMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ({}) "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// getting contract"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// Calling write method"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// authorizing with Metamask"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"currentProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"({ method: "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'eth_requestAccounts'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// getting wallet address"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"addressUser"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"currentProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"selectedAddress"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// calling \"store\" store method for contract"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// payload should include `from` address, that matches"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// current user's wallet"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7c6ebf"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'Parameter'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      from: "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"addressUser"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-99420d"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// calling read method"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// this method can return data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"retrieve"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-99420d"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"nodejs-and-react-native-example"},"children":[{"type":"text","value":"Node.js and React Native example"}]},{"type":"element","tag":"code","props":{"code":"// see example below\nimport { getContract } from '.';\n\n// ABI контракта\nconst CONTRACT_ABI = { /* ... */ };\n// contract address\nconst CONTRACT_ADDRESS = '0xdea164f67df4dbfe675d5271c9d404e0260f33bb';\n// getting contract\nconst contract = getContract(CONTRACT_ABI, CONTRACT_ADDRESS);\n// account's private key\nconst privateKey = '...';\n\n// write-methods requires private key\nconst executeContractMethod = async (val: number) => {\n    const transaction = contract.methods.store(val);\n    const account = web3.eth.accounts.privateKeyToAccount(privateKey);\n    const options = {\n      to: CONTRACT_ADDRESS,\n      data: transaction.encodeABI(),\n      gas: await transaction.estimateGas({ from: account.address }),\n      gasPrice: await web3.eth.getGasPrice(),\n    };\n    const signed = await web3.eth.accounts.signTransaction(\n      options,\n      privateKey,\n    );\n    await web3.eth.sendSignedTransaction(signed.rawTransaction!);\n};\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// see example below"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'.'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// ABI контракта"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"/* ... */"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// contract address"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'0xdea164f67df4dbfe675d5271c9d404e0260f33bb'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// getting contract"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// account's private key"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"privateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'...'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// write-methods requires private key"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e9de6d"},"children":[{"type":"text","value":"executeContractMethod"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"transaction"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"methods"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"account"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"accounts"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"privateKeyToAccount"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"privateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      to: "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      data: "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"transaction"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"encodeABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      gas: "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"transaction"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"estimateGas"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"({ from: "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"account"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      gasPrice: "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getGasPrice"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"signed"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"accounts"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"signTransaction"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"privateKey"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"eth"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"sendSignedTransaction"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"signed"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"rawTransaction"}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"calling-a-batch-of-contracts-methods"},"children":[{"type":"text","value":"Calling a batch of contract's methods"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Function calls batch of requests, returning array of results. For example:"}]},{"type":"element","tag":"code","props":{"code":"  const requests = [\n   contract.method.balanceOf().call,\n   contract.method.getStaked().call\n  ]\n\n  const result = await makeBatchRequest(request);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"requests"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"method"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"balanceOf"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"method"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getStaked"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"call"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"makeBatchRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"const web3 = new Web3(Web3.givenProvider || PROVIDER_URL);\n\nconst makeBatchRequest = (calls: any[]) => {\n  try {\n    const web3 = getWeb3NoAccount();\n    const batch = new web3.BatchRequest();\n\n    const promises = calls.map((call) => {\n      return new Promise((resolve, reject) => {\n        batch.add(\n          call.request({}, (err, result) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve(result);\n            }\n          })\n        );\n      });\n    });\n\n    batch.execute();\n\n    return Promise.all(promises);\n  } catch {\n    return null;\n  }\n};\n\nexport default makeBatchRequest;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"givenProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"PROVIDER_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e9de6d"},"children":[{"type":"text","value":"makeBatchRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"calls"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"[]) "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getWeb3NoAccount"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"batch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"BatchRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"promises"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"calls"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"batch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"            } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"            }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"          })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"batch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"execute"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-99420d"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"all"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"promises"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d9d860"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ba8c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-f7ba8c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"makeBatchRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"subscribing-to-smart-contract-events"},"children":[{"type":"text","value":"Subscribing to smart contract events"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There're different ways to subscribe for contract events. For all of them you will need following variables:"}]},{"type":"element","tag":"code","props":{"code":"  import Web3 from 'web3';\n  const web3 = new Web3('YOUR_RPC_ENDPOINT_HERE');\n  const ABI = 'YOUR ABI HERE';\n  const CONTRACT_ADDRESS = 'YOUR CONTRACT ADDRESS HERE';\n  const myContract = new Web3.Contract(ABI, CONTRACT_ADDRESS);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'web3'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'YOUR_RPC_ENDPOINT_HERE'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'YOUR ABI HERE'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'YOUR CONTRACT ADDRESS HERE'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"myContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"Web3"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"Contract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"ABI"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"CONTRACT_ADDRESS"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"by-accessing-contractevents"},"children":[{"type":"text","value":"By accessing contract.events"}]},{"type":"element","tag":"code","props":{"code":"referralProgramContract.events\n  .RegisterUser()\n  .on('connected', (subscriptionId: string) => {\n    console.log(`| UserRegistered | events | ${subscriptionId}`);\n  })\n  .on(\n    'data',\n    async (event: {\n      removed: boolean;\n      returnValues: RegisterUserResponseInterface;\n    }) => {\n      try {\n        if (event.removed) {\n          return;\n        }\n        const { user, referrer } = event.returnValues;\n        console.log(user, referrer);\n      } catch (e) {\n        console.log(`| ONCE | ${e}`);\n      }\n    },\n  )\n  .on('error', (error: ErrnoException) => {\n    console.log(error);\n  });\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"referralProgramContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"events"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"RegisterUser"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-e9de6d"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3cd940"},"children":[{"type":"text","value":"'connected'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":", ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"subscriptionId"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"`| UserRegistered | events | ${"}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscriptionId"}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'data'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"removed"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-103abd"},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"returnValues"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d43114"},"children":[{"type":"text","value":"RegisterUserResponseInterface"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    }) "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"removed"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-194c5f"},"children":[{"type":"text","value":"referrer"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"returnValues"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"referrer"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"`| ONCE | ${"}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  )"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-e9de6d"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3cd940"},"children":[{"type":"text","value":"'error'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":", ("}]},{"type":"element","tag":"span","props":{"class":"ct-4fc5a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-98c1e6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d43114"},"children":[{"type":"text","value":"ErrnoException"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-38f313"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7ff0ca"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  });"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"with-filtering"},"children":[{"type":"text","value":"With filtering"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We're listening to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Transfer"}]},{"type":"text","value":" event here:"}]},{"type":"element","tag":"code","props":{"code":"  let options = {\n    filter: {\n        value: [],\n    },\n    fromBlock: 0\n  };\n\n  myContract.events.Transfer(options)\n    .on('data', event => console.log(event))\n    .on('changed', changed => console.log(changed))\n    .on('error', err => throw err)\n    .on('connected', str => console.log(str))\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    filter: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        value: [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    fromBlock: "}]},{"type":"element","tag":"span","props":{"class":"ct-7c6ebf"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"myContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"events"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"Transfer"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'data'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'changed'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"changed"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'error'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'connected'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"common-subscribe-method"},"children":[{"type":"text","value":"Common Subscribe method"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Filtering options can also be specified:"}]},{"type":"element","tag":"code","props":{"code":"  let options = {\n    fromBlock: 0,\n    address: ['address-1', 'address-2'],    //Only get events from specific addresses\n    topics: []                              //What topics to subscribe to\n  };\n\n  let subscription = ('logs', options, (err,event) => {\n      if (!err)\n      console.log(event)\n  });\n\n  subscription.on('data', event => console.log(event))\n  subscription.on('changed', changed => console.log(changed))\n  subscription.on('error', err => { throw err })\n  subscription.on('connected', nr => console.log(nr))\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    fromBlock: "}]},{"type":"element","tag":"span","props":{"class":"ct-7c6ebf"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    address: ["}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'address-1'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'address-2'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"],    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"//Only get events from specific addresses"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    topics: []                              "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"//What topics to subscribe to"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscription"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'logs'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscription"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'data'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscription"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'changed'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"changed"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscription"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'error'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"subscription"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'connected'"}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"nr"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"getting-event-history"},"children":[{"type":"text","value":"Getting event history"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting history for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Transfer"}]},{"type":"text","value":" events for specific values. More info can be found "},{"type":"element","tag":"a","props":{"href":"https://web3js.readthedocs.io/en/v1.2.11/web3-eth-subscribe.html#","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]}]},{"type":"element","tag":"code","props":{"code":"  //example options(optional)\n  let options = {\n    filter: {\n        // only get events where transfer value was 1000 or 1337\n        value: ['1000', '1337']    \n    },\n    // number | \"earliest\" | \"pending\" | \"latest\"\n    fromBlock: 0,                  \n    toBlock: 'latest'\n  };\n\n  myContract.getPastEvents('Transfer', options)\n    .then(results => console.log(results))\n    .catch(err => throw err);\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"//example options(optional)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9b1032"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2cfb15"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    filter: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// only get events where transfer value was 1000 or 1337"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"        value: ["}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'1000'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'1337'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"]    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-686b66"},"children":[{"type":"text","value":"// number | \"earliest\" | \"pending\" | \"latest\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    fromBlock: "}]},{"type":"element","tag":"span","props":{"class":"ct-7c6ebf"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":",                  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    toBlock: "}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'latest'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"myContract"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"getPastEvents"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-401d42"},"children":[{"type":"text","value":"'Transfer'"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ce473a"},"children":[{"type":"text","value":"results"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"class":"ct-a7d559"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-ab16fd"},"children":[{"type":"text","value":" "}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d43114{color:#FFA657}.ct-3cd940{color:#A5D6FF}.ct-d9d860{color:#79C0FF}.ct-99420d{color:#79C0FF}.ct-7c6ebf{color:#79C0FF}.ct-194c5f{color:#79C0FF}.ct-9b1032{color:#FF7B72}.ct-686b66{color:#8B949E}.ct-f7ba8c{color:#FFA657}.ct-a7d559{color:#D2A8FF}.ct-42216e{color:#79C0FF}.ct-7d862c{color:#79C0FF}.ct-103abd{color:#79C0FF}.ct-4fc5a8{color:#FFA657}.ct-98c1e6{color:#FF7B72}.ct-e9de6d{color:#D2A8FF}.ct-7ff0ca{color:#C9D1D9}.ct-38f313{color:#FF7B72}.ct-401d42{color:#A5D6FF}.ct-ce473a{color:#C9D1D9}.ct-ab16fd{color:#C9D1D9}.ct-2cfb15{color:#FF7B72}.light .ct-2cfb15{color:#859900}.light .ct-ab16fd{color:#657B83}.light .ct-ce473a{color:#268BD2}.light .ct-401d42{color:#2AA198}.light .ct-38f313{color:#073642}.light .ct-7ff0ca{color:#657B83}.light .ct-e9de6d{color:#268BD2}.light .ct-98c1e6{color:#859900}.light .ct-4fc5a8{color:#657B83}.light .ct-103abd{color:#859900}.light .ct-7d862c{color:#268BD2}.light .ct-42216e{color:#657B83}.light .ct-a7d559{color:#268BD2}.light .ct-f7ba8c{color:#657B83}.light .ct-686b66{color:#93A1A1}.light .ct-9b1032{color:#073642}.light .ct-194c5f{color:#268BD2}.light .ct-7c6ebf{color:#D33682}.light .ct-99420d{color:#859900}.light .ct-d9d860{color:#B58900}.light .ct-3cd940{color:#2AA198}.light .ct-d43114{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"getting-smart-contract-instance","depth":2,"text":"Getting smart contract instance"},{"id":"executing-contract-method","depth":2,"text":"Executing contract method","children":[{"id":"example-for-metamask-without-private-key","depth":3,"text":"Example for #Metamask without private key"},{"id":"nodejs-and-react-native-example","depth":3,"text":"Node.js and React Native example"},{"id":"calling-a-batch-of-contracts-methods","depth":3,"text":"Calling a batch of contract's methods"}]},{"id":"subscribing-to-smart-contract-events","depth":2,"text":"Subscribing to smart contract events","children":[{"id":"by-accessing-contractevents","depth":3,"text":"By accessing contract.events"},{"id":"with-filtering","depth":3,"text":"With filtering"},{"id":"common-subscribe-method","depth":3,"text":"Common Subscribe method"},{"id":"getting-event-history","depth":3,"text":"Getting event history"}]}]}},"_type":"markdown","_id":"content:Blockchain:Smart contracts.md","_source":"content","_file":"Blockchain/Smart contracts.md","_extension":"md"},{"_path":"/css/automatic-grid-like-masonry-with-pure-css","_dir":"css","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Automatic Grid Like Masonry With Pure CSS","description":"Grid, that places items by density. Pure #css solution. Can be used with items, that take different amount of rows/columns.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grid, that places items by density. Pure #css solution. Can be used with items, that take different amount of rows/columns."}]},{"type":"element","tag":"code","props":{"code":"$cell: 250px;\n$gap: 20px;\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax($cell, 1fr));\n  grid-auto-rows: 256px;\n  grid-auto-flow: row dense;\n  grid-column-gap: $gap;\n  grid-row-gap: $gap;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$cell: 250px;\n$gap: 20px;\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax($cell, 1fr));\n  grid-auto-rows: 256px;\n  grid-auto-flow: row dense;\n  grid-column-gap: $gap;\n  grid-row-gap: $gap;\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"basic-elements-with-double-height-or-width"},"children":[{"type":"text","value":"Basic elements with double height or width"}]},{"type":"element","tag":"code","props":{"code":".h-2 { // takes 2 columns\n    grid-column-end: span 2;\n}\n\n.v-2 { // takes 2 rows\n    grid-row-end: span 2;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".h-2 { // takes 2 columns\n    grid-column-end: span 2;\n}\n\n.v-2 { // takes 2 rows\n    grid-row-end: span 2;\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"header-that-fills-all-columns"},"children":[{"type":"text","value":"Header, that fills all columns"}]},{"type":"element","tag":"code","props":{"code":".full-width {\n  grid-row: 1 / 2; // height: 1 row\n  grid-column: 1 / -1;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".full-width {\n  grid-row: 1 / 2; // height: 1 row\n  grid-column: 1 / -1;\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"stamp-element-that-takes-3-rows-in-the-top-right-corner"},"children":[{"type":"text","value":"Stamp element, that takes 3 rows in the top right corner"}]},{"type":"element","tag":"code","props":{"code":".top-right {\n  grid-row: 1 / 3; // height here\n  grid-column: -2 / -1; // width here\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".top-right {\n  grid-row: 1 / 3; // height here\n  grid-column: -2 / -1; // width here\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grid, that places items by density. Pure #css solution. Can be used with items, that take different amount of rows/columns."}]},{"type":"element","tag":"code","props":{"code":"$cell: 250px;\n$gap: 20px;\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax($cell, 1fr));\n  grid-auto-rows: 256px;\n  grid-auto-flow: row dense;\n  grid-column-gap: $gap;\n  grid-row-gap: $gap;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9adc60"},"children":[{"type":"text","value":"$cell: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"250"}]},{"type":"element","tag":"span","props":{"class":"ct-d4533b"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9adc60"},"children":[{"type":"text","value":"$gap: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-d4533b"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e1b5d"},"children":[{"type":"text","value":".grid"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3db17"},"children":[{"type":"text","value":"display"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0242c"},"children":[{"type":"text","value":"grid"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3db17"},"children":[{"type":"text","value":"grid-template-columns"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-93c2fd"},"children":[{"type":"text","value":"repeat"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5630ee"},"children":[{"type":"text","value":"auto-fit"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-93c2fd"},"children":[{"type":"text","value":"minmax"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5630ee"},"children":[{"type":"text","value":"$cell"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-9192cc"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-860266"},"children":[{"type":"text","value":"fr"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-auto-rows"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"256"}]},{"type":"element","tag":"span","props":{"class":"ct-d4533b"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3db17"},"children":[{"type":"text","value":"grid-auto-flow"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0242c"},"children":[{"type":"text","value":"row"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d0242c"},"children":[{"type":"text","value":"dense"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3db17"},"children":[{"type":"text","value":"grid-column-gap"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5630ee"},"children":[{"type":"text","value":"$gap"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b3db17"},"children":[{"type":"text","value":"grid-row-gap"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-5630ee"},"children":[{"type":"text","value":"$gap"}]},{"type":"element","tag":"span","props":{"class":"ct-5f10a8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"basic-elements-with-double-height-or-width"},"children":[{"type":"text","value":"Basic elements with double height or width"}]},{"type":"element","tag":"code","props":{"code":".h-2 { // takes 2 columns\n    grid-column-end: span 2;\n}\n\n.v-2 { // takes 2 rows\n    grid-row-end: span 2;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e1b5d"},"children":[{"type":"text","value":".h-2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-30d3fe"},"children":[{"type":"text","value":"// takes 2 columns"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-column-end"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e1b5d"},"children":[{"type":"text","value":".v-2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-30d3fe"},"children":[{"type":"text","value":"// takes 2 rows"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-row-end"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"header-that-fills-all-columns"},"children":[{"type":"text","value":"Header, that fills all columns"}]},{"type":"element","tag":"code","props":{"code":".full-width {\n  grid-row: 1 / 2; // height: 1 row\n  grid-column: 1 / -1;\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e1b5d"},"children":[{"type":"text","value":".full-width"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-row"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4533b"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-30d3fe"},"children":[{"type":"text","value":"// height: 1 row"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-column"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"-1"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"stamp-element-that-takes-3-rows-in-the-top-right-corner"},"children":[{"type":"text","value":"Stamp element, that takes 3 rows in the top right corner"}]},{"type":"element","tag":"code","props":{"code":".top-right {\n  grid-row: 1 / 3; // height here\n  grid-column: -2 / -1; // width here\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3e1b5d"},"children":[{"type":"text","value":".top-right"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-row"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4533b"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-30d3fe"},"children":[{"type":"text","value":"// height here"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e9c007"},"children":[{"type":"text","value":"grid-column"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"-2"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":" / "}]},{"type":"element","tag":"span","props":{"class":"ct-cbefd2"},"children":[{"type":"text","value":"-1"}]},{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-30d3fe"},"children":[{"type":"text","value":"// width here"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-792974"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-30d3fe{color:#8B949E}.ct-e9c007{color:#79C0FF}.ct-860266{color:#FF7B72}.ct-9192cc{color:#79C0FF}.ct-5630ee{color:#FFA657}.ct-93c2fd{color:#79C0FF}.ct-d0242c{color:#79C0FF}.ct-b3db17{color:#79C0FF}.ct-5f10a8{color:#C9D1D9}.ct-3e1b5d{color:#79C0FF}.ct-792974{color:#C9D1D9}.ct-d4533b{color:#FF7B72}.ct-cbefd2{color:#79C0FF}.ct-9adc60{color:#FFA657}.light .ct-9adc60{color:#657B83}.light .ct-cbefd2{color:#D33682}.light .ct-d4533b{color:#859900}.light .ct-792974{color:#657B83}.light .ct-3e1b5d{color:#93A1A1}.light .ct-5f10a8{color:#657B83}.light .ct-b3db17{color:#859900}.light .ct-d0242c{color:#657B83}.light .ct-93c2fd{color:#268BD2}.light .ct-5630ee{color:#657B83}.light .ct-9192cc{color:#D33682}.light .ct-860266{color:#859900}.light .ct-e9c007{color:#859900}.light .ct-30d3fe{color:#93A1A1}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"basic-elements-with-double-height-or-width","depth":3,"text":"Basic elements with double height or width"},{"id":"header-that-fills-all-columns","depth":3,"text":"Header, that fills all columns"},{"id":"stamp-element-that-takes-3-rows-in-the-top-right-corner","depth":3,"text":"Stamp element, that takes 3 rows in the top right corner"}]}},"_type":"markdown","_id":"content:CSS:Automatic Grid like Masonry with pure CSS.md","_source":"content","_file":"CSS/Automatic Grid like Masonry with pure CSS.md","_extension":"md"},{"_path":"/css/sass-nth-child-iterate-mixin","_dir":"css","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Sass Nth Child Iterate Mixin","description":"Say, we need to color n items by specific colors, which depend on its position. #SCSS supports iteration over lists for that purposes:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say, we need to color "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" items by specific colors, which depend on its position. #SCSS supports "},{"type":"element","tag":"a","props":{"href":"https://sass-lang.com/documentation/at-rules/control/each","rel":["nofollow"]},"children":[{"type":"text","value":"iteration over lists"}]},{"type":"text","value":" for that purposes:"}]},{"type":"element","tag":"code","props":{"code":"@mixin color-per-child($colors) {\n  @each $color in $colors {\n    &:nth-child(#{index(($colors), ($color))}) {\n      color: $color;\n    }\n  }\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"@mixin color-per-child($colors) {\n  @each $color in $colors {\n    &:nth-child(#{index(($colors), ($color))}) {\n      color: $color;\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Usage is simple:"}]},{"type":"element","tag":"code","props":{"code":".item {\n  @include color_per_child((#ded187, #dbde87, #bade87, #9cde87, #87deaa));\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".item {\n  @include color_per_child((#ded187, #dbde87, #bade87, #9cde87, #87deaa));\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say, we need to color "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" items by specific colors, which depend on its position. #SCSS supports "},{"type":"element","tag":"a","props":{"href":"https://sass-lang.com/documentation/at-rules/control/each","rel":["nofollow"]},"children":[{"type":"text","value":"iteration over lists"}]},{"type":"text","value":" for that purposes:"}]},{"type":"element","tag":"code","props":{"code":"@mixin color-per-child($colors) {\n  @each $color in $colors {\n    &:nth-child(#{index(($colors), ($color))}) {\n      color: $color;\n    }\n  }\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0b53ff"},"children":[{"type":"text","value":"@mixin"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b80f79"},"children":[{"type":"text","value":"color-per-child"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"$colors"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0b53ff"},"children":[{"type":"text","value":"@each"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"$color"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0b53ff"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"$colors"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d9632b"},"children":[{"type":"text","value":"&"}]},{"type":"element","tag":"span","props":{"class":"ct-b66dbb"},"children":[{"type":"text","value":":nth-child"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"#{"}]},{"type":"element","tag":"span","props":{"class":"ct-d0530f"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"(($colors), ($color))}"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7bba8a"},"children":[{"type":"text","value":"color"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d4151a"},"children":[{"type":"text","value":"$color"}]},{"type":"element","tag":"span","props":{"class":"ct-406327"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Usage is simple:"}]},{"type":"element","tag":"code","props":{"code":".item {\n  @include color_per_child((#ded187, #dbde87, #bade87, #9cde87, #87deaa));\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b198fb"},"children":[{"type":"text","value":".item"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6d3f07"},"children":[{"type":"text","value":"@include"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ac2c3"},"children":[{"type":"text","value":"color_per_child"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-085f2c"},"children":[{"type":"text","value":"#ded187"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-085f2c"},"children":[{"type":"text","value":"#dbde87"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-085f2c"},"children":[{"type":"text","value":"#bade87"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-085f2c"},"children":[{"type":"text","value":"#9cde87"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-085f2c"},"children":[{"type":"text","value":"#87deaa"}]},{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4106cf"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-085f2c{color:#79C0FF}.ct-3ac2c3{color:#D2A8FF}.ct-6d3f07{color:#FF7B72}.ct-b198fb{color:#79C0FF}.ct-4106cf{color:#C9D1D9}.ct-7bba8a{color:#79C0FF}.ct-d0530f{color:#79C0FF}.ct-b66dbb{color:#79C0FF}.ct-d9632b{color:#7EE787}.ct-d4151a{color:#FFA657}.ct-b80f79{color:#D2A8FF}.ct-406327{color:#C9D1D9}.ct-0b53ff{color:#FF7B72}.light .ct-0b53ff{color:#859900}.light .ct-406327{color:#657B83}.light .ct-b80f79{color:#268BD2}.light .ct-d4151a{color:#657B83}.light .ct-d9632b{color:#268BD2}.light .ct-b66dbb{color:#93A1A1}.light .ct-d0530f{color:#268BD2}.light .ct-7bba8a{color:#859900}.light .ct-4106cf{color:#657B83}.light .ct-b198fb{color:#93A1A1}.light .ct-6d3f07{color:#859900}.light .ct-3ac2c3{color:#268BD2}.light .ct-085f2c{color:#CB4B16}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:CSS:Sass nth-child iterate mixin.md","_source":"content","_file":"CSS/Sass nth-child iterate mixin.md","_extension":"md"},{"_path":"/css/test-if-browser-supports-css-rules","_dir":"css","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Test If Browser Supports CSS Rules","description":"To test if browser supports some #CSS rules, do following:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To test if browser supports some #CSS rules, do following:"}]},{"type":"element","tag":"code","props":{"code":"@supports (backdrop-filter: blur(5px)) {\n    backdrop-filter: blur(5px);\n}\n","language":"css"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"@supports (backdrop-filter: blur(5px)) {\n    backdrop-filter: blur(5px);\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@mixin"}]},{"type":"text","value":" will only apply rule if browser support backdrop filtering:"}]},{"type":"element","tag":"code","props":{"code":"@mixin can_backdrop {\n  @supports (\n    (-webkit-backdrop-filter: blur(5px)) or \n    (backdrop-filter: blur(5px))\n  ) {\n    @content;\n  }\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"@mixin can_backdrop {\n  @supports (\n    (-webkit-backdrop-filter: blur(5px)) or \n    (backdrop-filter: blur(5px))\n  ) {\n    @content;\n  }\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To test if browser supports some #CSS rules, do following:"}]},{"type":"element","tag":"code","props":{"code":"@supports (backdrop-filter: blur(5px)) {\n    backdrop-filter: blur(5px);\n}\n","language":"css"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"@supports"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-5e780b"},"children":[{"type":"text","value":"backdrop-filter"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bb6d1a"},"children":[{"type":"text","value":"blur"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-60df8f"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":")) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-fdd7ea"},"children":[{"type":"text","value":"backdrop-filter"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":": blur(5px);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"@mixin"}]},{"type":"text","value":" will only apply rule if browser support backdrop filtering:"}]},{"type":"element","tag":"code","props":{"code":"@mixin can_backdrop {\n  @supports (\n    (-webkit-backdrop-filter: blur(5px)) or \n    (backdrop-filter: blur(5px))\n  ) {\n    @content;\n  }\n}\n","language":"scss"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"@mixin"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4c8f17"},"children":[{"type":"text","value":"can_backdrop"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"@supports"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-38753d"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"class":"ct-821ca3"},"children":[{"type":"text","value":"-webkit-backdrop-filter"}]},{"type":"element","tag":"span","props":{"class":"ct-38753d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b9ed86"},"children":[{"type":"text","value":"blur"}]},{"type":"element","tag":"span","props":{"class":"ct-38753d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a07831"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cb43c5"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-38753d"},"children":[{"type":"text","value":")) "}]},{"type":"element","tag":"span","props":{"class":"ct-a054c1"},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"span","props":{"class":"ct-38753d"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"class":"ct-5e780b"},"children":[{"type":"text","value":"backdrop-filter"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bb6d1a"},"children":[{"type":"text","value":"blur"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-60df8f"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"px"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"  ) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-0240ce"},"children":[{"type":"text","value":"@content"}]},{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c46671"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a054c1{color:#79C0FF}.ct-cb43c5{color:#FF7B72}.ct-a07831{color:#79C0FF}.ct-b9ed86{color:#79C0FF}.ct-821ca3{color:#79C0FF}.ct-38753d{color:#C9D1D9}.ct-4c8f17{color:#D2A8FF}.ct-fdd7ea{color:#7EE787}.ct-60df8f{color:#79C0FF}.ct-bb6d1a{color:#79C0FF}.ct-5e780b{color:#79C0FF}.ct-c46671{color:#C9D1D9}.ct-0240ce{color:#FF7B72}.light .ct-0240ce{color:#859900}.light .ct-c46671{color:#657B83}.light .ct-5e780b{color:#859900}.light .ct-bb6d1a{color:#268BD2}.light .ct-60df8f{color:#D33682}.light .ct-fdd7ea{color:#268BD2}.light .ct-4c8f17{color:#268BD2}.light .ct-38753d{color:#657B83}.light .ct-821ca3{color:#859900}.light .ct-b9ed86{color:#268BD2}.light .ct-a07831{color:#D33682}.light .ct-cb43c5{color:#859900}.light .ct-a054c1{color:#657B83}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:CSS:Test if browser supports CSS rules.md","_source":"content","_file":"CSS/Test if browser supports CSS rules.md","_extension":"md"},{"_path":"/docker/building-static-pages-with-docker","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Building Static Pages With Docker","description":"Sample #Dockerfile for static Typescript builds such a #nextjs, #gatsby or #nuxt:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sample #Dockerfile for static Typescript builds such a #nextjs, #gatsby or #nuxt:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:16-alpine as builder\nWORKDIR /app\nCOPY package.json yarn.lock ./\nRUN yarn\nCOPY . .\n\n# your generate command here\nRUN yarn generate\n\nFROM nginx\nCOPY --from=builder /app/dist /usr/share/nginx/html\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"FROM node:16-alpine as builder\nWORKDIR /app\nCOPY package.json yarn.lock ./\nRUN yarn\nCOPY . .\n\n# your generate command here\nRUN yarn generate\n\nFROM nginx\nCOPY --from=builder /app/dist /usr/share/nginx/html\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sample #Dockerfile for static Typescript builds such a #nextjs, #gatsby or #nuxt:"}]},{"type":"element","tag":"code","props":{"code":"FROM node:16-alpine as builder\nWORKDIR /app\nCOPY package.json yarn.lock ./\nRUN yarn\nCOPY . .\n\n# your generate command here\nRUN yarn generate\n\nFROM nginx\nCOPY --from=builder /app/dist /usr/share/nginx/html\n","language":"Dockerfile"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FROM node:16-alpine as builder\nWORKDIR /app\nCOPY package.json yarn.lock ./\nRUN yarn\nCOPY . .\n\n# your generate command here\nRUN yarn generate\n\nFROM nginx\nCOPY --from=builder /app/dist /usr/share/nginx/html"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Docker:Building static pages with Docker.md","_source":"content","_file":"Docker/Building static pages with Docker.md","_extension":"md"},{"_path":"/docker/drone-ci","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Drone Ci","description":"Can be used with Private docker registry to deploy things using #docker.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be used with "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"Private docker registry"}]},{"type":"text","value":" to deploy things using #docker."}]},{"type":"element","tag":"h2","props":{"id":"pushing-to-private-docker_registry"},"children":[{"type":"text","value":"Pushing to private docker_registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You should specify "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_login"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_password"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_registry"}]},{"type":"text","value":" organizations variables in your "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"drone"}]},{"type":"text","value":". And "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker_repo"}]},{"type":"text","value":" variable for your repo as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker.yourdomain.com/your-image"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is example of  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".droneci"}]},{"type":"text","value":" for "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"private docker registry"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build-master\n    image: plugins/docker\n    when:\n      branch:\n        - master\n    settings:\n      dockerfile: Dockerfile\n      tag:\n        - ${DRONE_BRANCH}\n      username:\n        from_secret: global_docker_login\n      password:\n        from_secret: global_docker_password\n      registry:\n        from_secret: global_docker_registry\n      repo:\n        from_secret: docker_repo\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build-master\n    image: plugins/docker\n    when:\n      branch:\n        - master\n    settings:\n      dockerfile: Dockerfile\n      tag:\n        - ${DRONE_BRANCH}\n      username:\n        from_secret: global_docker_login\n      password:\n        from_secret: global_docker_password\n      registry:\n        from_secret: global_docker_registry\n      repo:\n        from_secret: docker_repo\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"docker-compose-file-for-drone-ci"},"children":[{"type":"text","value":"Docker-compose file for drone-ci"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone"}]},{"type":"text","value":" service is ui itself and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone-agent"}]},{"type":"text","value":" is runner for builds, that can be started on different machine (or machines)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret_id"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rpc_secret"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone.url"}]},{"type":"text","value":" to something you like."}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nservices:\n  drone:\n    container_name: drone\n    image: drone/drone:latest\n    environment:\n      - DRONE_GITHUB_CLIENT_ID=secret_id\n      - DRONE_GITHUB_CLIENT_SECRET=client_secret\n      - DRONE_RPC_SECRET=rpc_secret\n      - DRONE_SERVER_HOST=drone.url\n      - DRONE_USER_CREATE=\"username:user,admin:true\"\n      - DRONE_SERVER_PROTO=https\n      - DRONE_TLS_AUTOCERT=false\n      - DRONE_GIT_ALWAYS_AUTH=false\n      - DRONE_LOGS_DEBUG=true\n      - DRONE_LOGS_TRACE=true\n    restart: always\n    volumes:\n      - ./data:/data\n    ports:\n      - 8090:80\n  drone-agent:\n    container_name: drone__agent\n    image: drone/agent:latest\n    command: agent\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      - DRONE_RPC_SERVER=https://drone.url\n      - DRONE_RPC_SECRET=rpc_secret\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: \"3\"\n\nservices:\n  drone:\n    container_name: drone\n    image: drone/drone:latest\n    environment:\n      - DRONE_GITHUB_CLIENT_ID=secret_id\n      - DRONE_GITHUB_CLIENT_SECRET=client_secret\n      - DRONE_RPC_SECRET=rpc_secret\n      - DRONE_SERVER_HOST=drone.url\n      - DRONE_USER_CREATE=\"username:user,admin:true\"\n      - DRONE_SERVER_PROTO=https\n      - DRONE_TLS_AUTOCERT=false\n      - DRONE_GIT_ALWAYS_AUTH=false\n      - DRONE_LOGS_DEBUG=true\n      - DRONE_LOGS_TRACE=true\n    restart: always\n    volumes:\n      - ./data:/data\n    ports:\n      - 8090:80\n  drone-agent:\n    container_name: drone__agent\n    image: drone/agent:latest\n    command: agent\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      - DRONE_RPC_SERVER=https://drone.url\n      - DRONE_RPC_SECRET=rpc_secret\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"caching-builds"},"children":[{"type":"text","value":"Caching builds"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Haven't checked that yet, but there's a "},{"type":"element","tag":"a","props":{"href":"https://laszlo.cloud/the-ultimate-droneci-caching-guide","rel":["nofollow"]},"children":[{"type":"text","value":"manual"}]},{"type":"text","value":" from "},{"type":"element","tag":"a","props":{"href":"https://laszlo.cloud/","rel":["nofollow"]},"children":[{"type":"text","value":"Laszlo Fogas"}]},{"type":"text","value":" about that."}]},{"type":"element","tag":"h2","props":{"id":"get-user-info"},"children":[{"type":"text","value":"Get user info"}]},{"type":"element","tag":"code","props":{"code":"export DRONE_SERVER=https://drone.url\nexport DRONE_TOKEN=password\ndrone info\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export DRONE_SERVER=https://drone.url\nexport DRONE_TOKEN=password\ndrone info\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"mark-user-as-trusted"},"children":[{"type":"text","value":"Mark user as trusted"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes it won't help, then connect to drone database with sqlite and change user's trusted flag to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"drone repo update $1 --trusted=true && drone repo info $1\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"drone repo update $1 --trusted=true && drone repo info $1\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be used with "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"Private docker registry"}]},{"type":"text","value":" to deploy things using #docker."}]},{"type":"element","tag":"h2","props":{"id":"pushing-to-private-docker_registry"},"children":[{"type":"text","value":"Pushing to private docker_registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You should specify "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_login"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_password"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"global_docker_registry"}]},{"type":"text","value":" organizations variables in your "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"drone"}]},{"type":"text","value":". And "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker_repo"}]},{"type":"text","value":" variable for your repo as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker.yourdomain.com/your-image"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is example of  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".droneci"}]},{"type":"text","value":" for "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"private docker registry"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build-master\n    image: plugins/docker\n    when:\n      branch:\n        - master\n    settings:\n      dockerfile: Dockerfile\n      tag:\n        - ${DRONE_BRANCH}\n      username:\n        from_secret: global_docker_login\n      password:\n        from_secret: global_docker_password\n      registry:\n        from_secret: global_docker_registry\n      repo:\n        from_secret: docker_repo\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"kind"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"pipeline"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"build"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"platform"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"os"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"linux"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"arch"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"amd64"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"  - "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"build-master"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"plugins/docker"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"when"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"branch"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"master"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"settings"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"dockerfile"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"Dockerfile"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"tag"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"${DRONE_BRANCH}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"global_docker_login"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"global_docker_password"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"registry"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"global_docker_registry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"repo"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"docker_repo"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"docker-compose-file-for-drone-ci"},"children":[{"type":"text","value":"Docker-compose file for drone-ci"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone"}]},{"type":"text","value":" service is ui itself and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone-agent"}]},{"type":"text","value":" is runner for builds, that can be started on different machine (or machines)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret_id"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"rpc_secret"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"drone.url"}]},{"type":"text","value":" to something you like."}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nservices:\n  drone:\n    container_name: drone\n    image: drone/drone:latest\n    environment:\n      - DRONE_GITHUB_CLIENT_ID=secret_id\n      - DRONE_GITHUB_CLIENT_SECRET=client_secret\n      - DRONE_RPC_SECRET=rpc_secret\n      - DRONE_SERVER_HOST=drone.url\n      - DRONE_USER_CREATE=\"username:user,admin:true\"\n      - DRONE_SERVER_PROTO=https\n      - DRONE_TLS_AUTOCERT=false\n      - DRONE_GIT_ALWAYS_AUTH=false\n      - DRONE_LOGS_DEBUG=true\n      - DRONE_LOGS_TRACE=true\n    restart: always\n    volumes:\n      - ./data:/data\n    ports:\n      - 8090:80\n  drone-agent:\n    container_name: drone__agent\n    image: drone/agent:latest\n    command: agent\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      - DRONE_RPC_SERVER=https://drone.url\n      - DRONE_RPC_SECRET=rpc_secret\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"\"3\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"drone"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"drone"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"drone/drone:latest"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_GITHUB_CLIENT_ID=secret_id"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_GITHUB_CLIENT_SECRET=client_secret"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_RPC_SECRET=rpc_secret"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_SERVER_HOST=drone.url"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_USER_CREATE=\"username:user,admin:true\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_SERVER_PROTO=https"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_TLS_AUTOCERT=false"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_GIT_ALWAYS_AUTH=false"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_LOGS_DEBUG=true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_LOGS_TRACE=true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"./data:/data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"8090:80"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"drone-agent"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"drone__agent"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"drone/agent:latest"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"agent"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d276c3"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_RPC_SERVER=https://drone.url"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-108735"},"children":[{"type":"text","value":"DRONE_RPC_SECRET=rpc_secret"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"caching-builds"},"children":[{"type":"text","value":"Caching builds"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Haven't checked that yet, but there's a "},{"type":"element","tag":"a","props":{"href":"https://laszlo.cloud/the-ultimate-droneci-caching-guide","rel":["nofollow"]},"children":[{"type":"text","value":"manual"}]},{"type":"text","value":" from "},{"type":"element","tag":"a","props":{"href":"https://laszlo.cloud/","rel":["nofollow"]},"children":[{"type":"text","value":"Laszlo Fogas"}]},{"type":"text","value":" about that."}]},{"type":"element","tag":"h2","props":{"id":"get-user-info"},"children":[{"type":"text","value":"Get user info"}]},{"type":"element","tag":"code","props":{"code":"export DRONE_SERVER=https://drone.url\nexport DRONE_TOKEN=password\ndrone info\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-556048"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":" DRONE_SERVER=https://drone.url"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-556048"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":" DRONE_TOKEN=password"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"drone info"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"mark-user-as-trusted"},"children":[{"type":"text","value":"Mark user as trusted"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes it won't help, then connect to drone database with sqlite and change user's trusted flag to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"drone repo update $1 --trusted=true && drone repo info $1\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":"drone repo update "}]},{"type":"element","tag":"span","props":{"class":"ct-4cbdc6"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-8379b3"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":" --trusted=true "}]},{"type":"element","tag":"span","props":{"class":"ct-630e35"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-1d9b3c"},"children":[{"type":"text","value":" drone repo info "}]},{"type":"element","tag":"span","props":{"class":"ct-4cbdc6"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-8379b3"},"children":[{"type":"text","value":"1"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-630e35{color:#FF7B72}.ct-8379b3{color:#C9D1D9}.ct-4cbdc6{color:#C9D1D9}.ct-556048{color:#FF7B72}.ct-108735{color:#A5D6FF}.ct-1d9b3c{color:#C9D1D9}.ct-d276c3{color:#7EE787}.light .ct-d276c3{color:#268BD2}.light .ct-1d9b3c{color:#657B83}.light .ct-108735{color:#2AA198}.light .ct-556048{color:#073642}.light .ct-4cbdc6{color:#859900}.light .ct-8379b3{color:#268BD2}.light .ct-630e35{color:#859900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"pushing-to-private-docker_registry","depth":2,"text":"Pushing to private docker_registry"},{"id":"docker-compose-file-for-drone-ci","depth":2,"text":"Docker-compose file for drone-ci"},{"id":"caching-builds","depth":2,"text":"Caching builds"},{"id":"get-user-info","depth":2,"text":"Get user info"},{"id":"mark-user-as-trusted","depth":2,"text":"Mark user as trusted"}]}},"_type":"markdown","_id":"content:Docker:Drone-ci.md","_source":"content","_file":"Docker/Drone-ci.md","_extension":"md"},{"_path":"/docker/github-pages-with-drone-ci","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Github Pages With Drone Ci","description":"To deploy github pages with Drone-ci you will need .drone.yml as specified below. You also should define secrets  github_username and github_token (get it here) in your drone's repository setup.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To deploy github pages with "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":" you will need "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".drone.yml"}]},{"type":"text","value":" as specified below. You also should define secrets  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github_username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github_token"}]},{"type":"text","value":" (get it "},{"type":"element","tag":"a","props":{"href":"https://github.com/settings/tokens","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":") in your drone's repository setup."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Github repository should be named as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yourname.github.io"}]},{"type":"text","value":" and it could be accessed at "},{"type":"element","tag":"a","props":{"href":"https://yourname.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"https://yourname.github.io/"}]},{"type":"text","value":". Otherwise it'll be available at "},{"type":"element","tag":"a","props":{"href":"https://yourname.github.io/repo-name/","rel":["nofollow"]},"children":[{"type":"text","value":"https://yourname.github.io/repo-name/"}]},{"type":"text","value":", what you might not like."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You should create branch named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" in that repo and setup GH Pages at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://github.com/<yourusername>/<yourusername>.github.io/settings/pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This config will update "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" branch in your project, which will contain only generated content. I know, that's bad, but there's no better way to do that with generic drone plugins."}]},{"type":"element","tag":"code","props":{"code":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build\n    image: node:16\n    commands:\n      - yarn\n      - yarn generate\n      - rm -rf ./docs\n      - mv ./.output/public ./docs\n      - touch ./docs/.nojekyll\n  - name: publish\n    image: plugins/gh-pages\n    settings:\n      target_branch: gh-pages\n      username:\n        from_secret: github_username\n      password:\n        from_secret: github_token\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build\n    image: node:16\n    commands:\n      - yarn\n      - yarn generate\n      - rm -rf ./docs\n      - mv ./.output/public ./docs\n      - touch ./docs/.nojekyll\n  - name: publish\n    image: plugins/gh-pages\n    settings:\n      target_branch: gh-pages\n      username:\n        from_secret: github_username\n      password:\n        from_secret: github_token\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here we're moving "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./.output/public"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./docs"}]},{"type":"text","value":", because #nuxt creates symlink for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docs"}]},{"type":"text","value":" and git can't work with that."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also we create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".nojekyll"}]},{"type":"text","value":" at the root of repo, so github's internal engine won't "},{"type":"element","tag":"a","props":{"href":"https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/","rel":["nofollow"]},"children":[{"type":"text","value":"ignore files that start with underscore"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"additional-reading"},"children":[{"type":"text","value":"Additional reading"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://plugins.drone.io/plugins/gh-pages","rel":["nofollow"]},"children":[{"type":"text","value":"Drone Github Pages Documentation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/","rel":["nofollow"]},"children":[{"type":"text","value":"Bypassing Jekyll on GitHub Pages"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To deploy github pages with "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":" you will need "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".drone.yml"}]},{"type":"text","value":" as specified below. You also should define secrets  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github_username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"github_token"}]},{"type":"text","value":" (get it "},{"type":"element","tag":"a","props":{"href":"https://github.com/settings/tokens","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":") in your drone's repository setup."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Github repository should be named as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"yourname.github.io"}]},{"type":"text","value":" and it could be accessed at "},{"type":"element","tag":"a","props":{"href":"https://yourname.github.io/","rel":["nofollow"]},"children":[{"type":"text","value":"https://yourname.github.io/"}]},{"type":"text","value":". Otherwise it'll be available at "},{"type":"element","tag":"a","props":{"href":"https://yourname.github.io/repo-name/","rel":["nofollow"]},"children":[{"type":"text","value":"https://yourname.github.io/repo-name/"}]},{"type":"text","value":", what you might not like."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You should create branch named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" in that repo and setup GH Pages at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://github.com/<yourusername>/<yourusername>.github.io/settings/pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This config will update "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" branch in your project, which will contain only generated content. I know, that's bad, but there's no better way to do that with generic drone plugins."}]},{"type":"element","tag":"code","props":{"code":"kind: pipeline\nname: build\ntype: docker\n\nplatform:\n  os: linux\n  arch: amd64\n\nsteps:\n  - name: build\n    image: node:16\n    commands:\n      - yarn\n      - yarn generate\n      - rm -rf ./docs\n      - mv ./.output/public ./docs\n      - touch ./docs/.nojekyll\n  - name: publish\n    image: plugins/gh-pages\n    settings:\n      target_branch: gh-pages\n      username:\n        from_secret: github_username\n      password:\n        from_secret: github_token\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"kind"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"pipeline"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"build"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"docker"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"platform"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"os"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"linux"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"arch"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"amd64"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"  - "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"build"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"node:16"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"commands"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"yarn"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"yarn generate"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"rm -rf ./docs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"mv ./.output/public ./docs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"touch ./docs/.nojekyll"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"  - "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"publish"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"plugins/gh-pages"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"settings"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"target_branch"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"gh-pages"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"github_username"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-191688"},"children":[{"type":"text","value":"from_secret"}]},{"type":"element","tag":"span","props":{"class":"ct-8a4fed"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d0fd70"},"children":[{"type":"text","value":"github_token"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here we're moving "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./.output/public"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./docs"}]},{"type":"text","value":", because #nuxt creates symlink for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docs"}]},{"type":"text","value":" and git can't work with that."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also we create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".nojekyll"}]},{"type":"text","value":" at the root of repo, so github's internal engine won't "},{"type":"element","tag":"a","props":{"href":"https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/","rel":["nofollow"]},"children":[{"type":"text","value":"ignore files that start with underscore"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"additional-reading"},"children":[{"type":"text","value":"Additional reading"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://plugins.drone.io/plugins/gh-pages","rel":["nofollow"]},"children":[{"type":"text","value":"Drone Github Pages Documentation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/","rel":["nofollow"]},"children":[{"type":"text","value":"Bypassing Jekyll on GitHub Pages"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d0fd70{color:#A5D6FF}.ct-8a4fed{color:#C9D1D9}.ct-191688{color:#7EE787}.light .ct-191688{color:#268BD2}.light .ct-8a4fed{color:#657B83}.light .ct-d0fd70{color:#2AA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"additional-reading","depth":2,"text":"Additional reading"}]}},"_type":"markdown","_id":"content:Docker:Github pages with drone-ci.md","_source":"content","_file":"Docker/Github pages with drone-ci.md","_extension":"md"},{"_path":"/docker/private-docker-registry","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Private Docker Registry","description":"Suitable to work with Drone-ci for hosting private #docker images.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Suitable to work with "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":" for hosting private #docker images."}]},{"type":"element","tag":"h2","props":{"id":"sample-docker-compose-for-custom-docker-registry"},"children":[{"type":"text","value":"Sample docker-compose for custom docker registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This one brings up private docker registry with ui. First you'll need to generate password for it:"}]},{"type":"element","tag":"code","props":{"code":"docker run \\\n  --entrypoint htpasswd registry:2 \\\n  -Bbn user mypassword > auth/registry.password\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"docker run \\\n  --entrypoint htpasswd registry:2 \\\n  -Bbn user mypassword > auth/registry.password\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\nservices:\n  registry:\n    container_name: docker__registry\n    image: registry:2\n    ports:\n    - 5000:5000\n    restart: always\n    environment:\n      - REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/data\n      - REGISTRY_AUTH=htpasswd\n      - REGISTRY_AUTH_HTPASSWD_REALM=Registry\n      - REGISTRY_AUTH_HTPASSWD_PATH=/auth/registry.password\n      - REGISTRY_HTTP_SECRET=password\n      - REGISTRY_STORAGE_DELETE_ENABLED=true\n    volumes:\n      - ./registry/auth:/auth\n      - ./registry/data:/data\n  ui:\n    container_name: docker__ui\n    image: parabuzzle/craneoperator:latest\n    ports:\n    - 80:80\n    restart: always\n    environment:\n      - REGISTRY_HOST=registry\n      - REGISTRY_PORT=5000\n      - REGISTRY_PROTOCOL=http\n      - ALLOW_REGISTRY_LOGIN=true\n      - REGISTRY_ALLOW_DELETE=true\n      - USERNAME=registry\n      - PASSWORD=password\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: \"3\"\nservices:\n  registry:\n    container_name: docker__registry\n    image: registry:2\n    ports:\n    - 5000:5000\n    restart: always\n    environment:\n      - REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/data\n      - REGISTRY_AUTH=htpasswd\n      - REGISTRY_AUTH_HTPASSWD_REALM=Registry\n      - REGISTRY_AUTH_HTPASSWD_PATH=/auth/registry.password\n      - REGISTRY_HTTP_SECRET=password\n      - REGISTRY_STORAGE_DELETE_ENABLED=true\n    volumes:\n      - ./registry/auth:/auth\n      - ./registry/data:/data\n  ui:\n    container_name: docker__ui\n    image: parabuzzle/craneoperator:latest\n    ports:\n    - 80:80\n    restart: always\n    environment:\n      - REGISTRY_HOST=registry\n      - REGISTRY_PORT=5000\n      - REGISTRY_PROTOCOL=http\n      - ALLOW_REGISTRY_LOGIN=true\n      - REGISTRY_ALLOW_DELETE=true\n      - USERNAME=registry\n      - PASSWORD=password\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"squash-layers-on-registry"},"children":[{"type":"text","value":"Squash layers on registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you need to squash all layers in docker registry to free up disk space."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run this command to mark oldest layers"}]}]},{"type":"element","tag":"code","props":{"code":"# Try this first\ndocker run \\\n  --rm anoxis/registry-cli \\\n  -r https://registry.url \\\n  -l user:password \\\n  --delete \\\n  --num 2\n\n# Then this \ndocker run -it \\\n    -v /path/to/registry/data:/registry \\\n    -e REGISTRY_URL=https://registry.url \\\n    -e DRY_RUN=\"false\" \\\n    -e REGISTRY_AUTH=\"user:password\" \\\n    mortensrasmussen/docker-registry-manifest-cleanup\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# Try this first\ndocker run \\\n  --rm anoxis/registry-cli \\\n  -r https://registry.url \\\n  -l user:password \\\n  --delete \\\n  --num 2\n\n# Then this \ndocker run -it \\\n    -v /path/to/registry/data:/registry \\\n    -e REGISTRY_URL=https://registry.url \\\n    -e DRY_RUN=\"false\" \\\n    -e REGISTRY_AUTH=\"user:password\" \\\n    mortensrasmussen/docker-registry-manifest-cleanup\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Suitable to work with "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":" for hosting private #docker images."}]},{"type":"element","tag":"h2","props":{"id":"sample-docker-compose-for-custom-docker-registry"},"children":[{"type":"text","value":"Sample docker-compose for custom docker registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This one brings up private docker registry with ui. First you'll need to generate password for it:"}]},{"type":"element","tag":"code","props":{"code":"docker run \\\n  --entrypoint htpasswd registry:2 \\\n  -Bbn user mypassword > auth/registry.password\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"docker run \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  --entrypoint htpasswd registry:2 \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  -Bbn user mypassword "}]},{"type":"element","tag":"span","props":{"class":"ct-213f78"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":" auth/registry.password"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\nservices:\n  registry:\n    container_name: docker__registry\n    image: registry:2\n    ports:\n    - 5000:5000\n    restart: always\n    environment:\n      - REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/data\n      - REGISTRY_AUTH=htpasswd\n      - REGISTRY_AUTH_HTPASSWD_REALM=Registry\n      - REGISTRY_AUTH_HTPASSWD_PATH=/auth/registry.password\n      - REGISTRY_HTTP_SECRET=password\n      - REGISTRY_STORAGE_DELETE_ENABLED=true\n    volumes:\n      - ./registry/auth:/auth\n      - ./registry/data:/data\n  ui:\n    container_name: docker__ui\n    image: parabuzzle/craneoperator:latest\n    ports:\n    - 80:80\n    restart: always\n    environment:\n      - REGISTRY_HOST=registry\n      - REGISTRY_PORT=5000\n      - REGISTRY_PROTOCOL=http\n      - ALLOW_REGISTRY_LOGIN=true\n      - REGISTRY_ALLOW_DELETE=true\n      - USERNAME=registry\n      - PASSWORD=password\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"\"3\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"registry"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"docker__registry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"registry:2"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"5000:5000"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_AUTH=htpasswd"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_AUTH_HTPASSWD_REALM=Registry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_AUTH_HTPASSWD_PATH=/auth/registry.password"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_HTTP_SECRET=password"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_STORAGE_DELETE_ENABLED=true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"./registry/auth:/auth"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"./registry/data:/data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"ui"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"docker__ui"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"parabuzzle/craneoperator:latest"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"80:80"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4be3f8"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_HOST=registry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_PORT=5000"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_PROTOCOL=http"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"ALLOW_REGISTRY_LOGIN=true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"REGISTRY_ALLOW_DELETE=true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"USERNAME=registry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"PASSWORD=password"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"squash-layers-on-registry"},"children":[{"type":"text","value":"Squash layers on registry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you need to squash all layers in docker registry to free up disk space."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run this command to mark oldest layers"}]}]},{"type":"element","tag":"code","props":{"code":"# Try this first\ndocker run \\\n  --rm anoxis/registry-cli \\\n  -r https://registry.url \\\n  -l user:password \\\n  --delete \\\n  --num 2\n\n# Then this \ndocker run -it \\\n    -v /path/to/registry/data:/registry \\\n    -e REGISTRY_URL=https://registry.url \\\n    -e DRY_RUN=\"false\" \\\n    -e REGISTRY_AUTH=\"user:password\" \\\n    mortensrasmussen/docker-registry-manifest-cleanup\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15386d"},"children":[{"type":"text","value":"# Try this first"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"docker run \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  --rm anoxis/registry-cli \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  -r https://registry.url \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  -l user:password \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  --delete \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"  --num 2"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-15386d"},"children":[{"type":"text","value":"# Then this "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"docker run -it \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    -v /path/to/registry/data:/registry \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    -e REGISTRY_URL=https://registry.url \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    -e DRY_RUN="}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    -e REGISTRY_AUTH="}]},{"type":"element","tag":"span","props":{"class":"ct-95c16d"},"children":[{"type":"text","value":"\"user:password\""}]},{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05a6f5"},"children":[{"type":"text","value":"    mortensrasmussen/docker-registry-manifest-cleanup"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-15386d{color:#8B949E}.ct-95c16d{color:#A5D6FF}.ct-4be3f8{color:#7EE787}.ct-213f78{color:#FF7B72}.ct-05a6f5{color:#C9D1D9}.light .ct-05a6f5{color:#657B83}.light .ct-213f78{color:#859900}.light .ct-4be3f8{color:#268BD2}.light .ct-95c16d{color:#2AA198}.light .ct-15386d{color:#93A1A1}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sample-docker-compose-for-custom-docker-registry","depth":2,"text":"Sample docker-compose for custom docker registry"},{"id":"squash-layers-on-registry","depth":2,"text":"Squash layers on registry"}]}},"_type":"markdown","_id":"content:Docker:Private docker registry.md","_source":"content","_file":"Docker/Private docker registry.md","_extension":"md"},{"_path":"/docker/refresh-containers-on-pull","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Refresh Containers On Pull","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"setting-up-watchtower"},"children":[{"type":"text","value":"Setting up watchtower"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://containrrr.dev/watchtower/","rel":["nofollow"]},"children":[{"type":"text","value":"Watchtower"}]},{"type":"text","value":" will automatically pull updated #docker containers. Can be used with "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"Private docker registry"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nservices:\n  watchtower:\n    container_name: docker__watchtower\n    image: v2tec/watchtower\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /home/user/.docker/config.json:/config.json\n    command: --interval 60 image_1 image_2\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: \"3\"\n\nservices:\n  watchtower:\n    container_name: docker__watchtower\n    image: v2tec/watchtower\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /home/user/.docker/config.json:/config.json\n    command: --interval 60 image_1 image_2\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"setting-up-watchtower"},"children":[{"type":"text","value":"Setting up watchtower"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://containrrr.dev/watchtower/","rel":["nofollow"]},"children":[{"type":"text","value":"Watchtower"}]},{"type":"text","value":" will automatically pull updated #docker containers. Can be used with "},{"type":"element","tag":"a","props":{"href":"Private%20docker%20registry"},"children":[{"type":"text","value":"Private docker registry"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"Drone-ci"},"children":[{"type":"text","value":"Drone-ci"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nservices:\n  watchtower:\n    container_name: docker__watchtower\n    image: v2tec/watchtower\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /home/user/.docker/config.json:/config.json\n    command: --interval 60 image_1 image_2\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"\"3\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"watchtower"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"docker__watchtower"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"v2tec/watchtower"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"/var/run/docker.sock:/var/run/docker.sock"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"/home/user/.docker/config.json:/config.json"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cbf773"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-7c8026"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-31ba5b"},"children":[{"type":"text","value":"--interval 60 image_1 image_2"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-31ba5b{color:#A5D6FF}.ct-7c8026{color:#C9D1D9}.ct-cbf773{color:#7EE787}.light .ct-cbf773{color:#268BD2}.light .ct-7c8026{color:#657B83}.light .ct-31ba5b{color:#2AA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setting-up-watchtower","depth":2,"text":"Setting up watchtower"}]}},"_type":"markdown","_id":"content:Docker:Refresh containers on pull.md","_source":"content","_file":"Docker/Refresh containers on pull.md","_extension":"md"},{"_path":"/docker/seed-dump-inside-docker","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Seed Dump Inside Docker","description":"If you need to seed .sql dump in #docker container, just run this command. Also you can try to rsync file with SSH to get it from remote host.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you need to seed "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".sql"}]},{"type":"text","value":" dump in #docker container, just run this command. Also you can try to "},{"type":"element","tag":"a","props":{"href":"/linux/Rsync%20file%20with%20SSH"},"children":[{"type":"text","value":"rsync file with SSH"}]},{"type":"text","value":" to get it from remote host."}]},{"type":"element","tag":"code","props":{"code":"#####\n# usage: ./script.sh \"/path/to/dump.sql\"\n#####\n\nDUMP_PATH=$1\nCONTAINER=\"db\"\nUSER=root\nPASSWORD=password\nDB=database\n\ncat \"$DUMP_PATH\" | docker exec -i $CONTAINER mysql -u$USER -p$PASSWORD $DB\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"#####\n# usage: ./script.sh \"/path/to/dump.sql\"\n#####\n\nDUMP_PATH=$1\nCONTAINER=\"db\"\nUSER=root\nPASSWORD=password\nDB=database\n\ncat \"$DUMP_PATH\" | docker exec -i $CONTAINER mysql -u$USER -p$PASSWORD $DB\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you need to seed "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".sql"}]},{"type":"text","value":" dump in #docker container, just run this command. Also you can try to "},{"type":"element","tag":"a","props":{"href":"/linux/Rsync%20file%20with%20SSH"},"children":[{"type":"text","value":"rsync file with SSH"}]},{"type":"text","value":" to get it from remote host."}]},{"type":"element","tag":"code","props":{"code":"#####\n# usage: ./script.sh \"/path/to/dump.sql\"\n#####\n\nDUMP_PATH=$1\nCONTAINER=\"db\"\nUSER=root\nPASSWORD=password\nDB=database\n\ncat \"$DUMP_PATH\" | docker exec -i $CONTAINER mysql -u$USER -p$PASSWORD $DB\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5a146"},"children":[{"type":"text","value":"#####"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5a146"},"children":[{"type":"text","value":"# usage: ./script.sh \"/path/to/dump.sql\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c5a146"},"children":[{"type":"text","value":"#####"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"DUMP_PATH="}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"CONTAINER="}]},{"type":"element","tag":"span","props":{"class":"ct-7a897e"},"children":[{"type":"text","value":"\"db\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"USER=root"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"PASSWORD=password"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"DB=database"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":"cat "}]},{"type":"element","tag":"span","props":{"class":"ct-7a897e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"DUMP_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-7a897e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bdebbe"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" docker "}]},{"type":"element","tag":"span","props":{"class":"ct-3650e9"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" -i "}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"CONTAINER"}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" mysql -u"}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"USER"}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" -p"}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"PASSWORD"}]},{"type":"element","tag":"span","props":{"class":"ct-addfa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f22f87"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a8164d"},"children":[{"type":"text","value":"DB"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-3650e9{color:#79C0FF}.ct-bdebbe{color:#FF7B72}.ct-7a897e{color:#A5D6FF}.ct-a8164d{color:#C9D1D9}.ct-f22f87{color:#C9D1D9}.ct-addfa2{color:#C9D1D9}.ct-c5a146{color:#8B949E}.light .ct-c5a146{color:#93A1A1}.light .ct-addfa2{color:#657B83}.light .ct-f22f87{color:#859900}.light .ct-a8164d{color:#268BD2}.light .ct-7a897e{color:#2AA198}.light .ct-bdebbe{color:#859900}.light .ct-3650e9{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Docker:Seed dump inside docker.md","_source":"content","_file":"Docker/Seed dump inside docker.md","_extension":"md"},{"_path":"/docker/wait-for-mysql","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Wait For Mysql","description":"wait-for-it.sh doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before #mysql is ready to accept connections","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vishnubob/wait-for-it","rel":["nofollow"]},"children":[{"type":"text","value":"wait-for-it.sh"}]},{"type":"text","value":" doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before #mysql is ready to accept connections"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This script waits for first successful query from database or exits with non-zero status after timeout."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Don't forget to change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$query"}]},{"type":"text","value":" for the actually working one."}]},{"type":"element","tag":"code","props":{"code":"# Waits for mysql to become actually available\nwait_for_mysql() {\n  query=\"SELECT count(*) FROM users\"\n  \n  timeout=180 # 3 minutes limit\n  i=0\n  \n  while ! docker exec -it \"$1\" mysql --user=\"$2\" --password=\"$3\" -e \"$query\" $4 >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly query MySQL after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_mysql miin-mysql-dev root password database\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# Waits for mysql to become actually available\nwait_for_mysql() {\n  query=\"SELECT count(*) FROM users\"\n  \n  timeout=180 # 3 minutes limit\n  i=0\n  \n  while ! docker exec -it \"$1\" mysql --user=\"$2\" --password=\"$3\" -e \"$query\" $4 >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly query MySQL after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_mysql miin-mysql-dev root password database\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"Wait%20for%20redis"},"children":[{"type":"text","value":"Wait for redis"}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vishnubob/wait-for-it","rel":["nofollow"]},"children":[{"type":"text","value":"wait-for-it.sh"}]},{"type":"text","value":" doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before #mysql is ready to accept connections"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This script waits for first successful query from database or exits with non-zero status after timeout."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Don't forget to change "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$query"}]},{"type":"text","value":" for the actually working one."}]},{"type":"element","tag":"code","props":{"code":"# Waits for mysql to become actually available\nwait_for_mysql() {\n  query=\"SELECT count(*) FROM users\"\n  \n  timeout=180 # 3 minutes limit\n  i=0\n  \n  while ! docker exec -it \"$1\" mysql --user=\"$2\" --password=\"$3\" -e \"$query\" $4 >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly query MySQL after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_mysql miin-mysql-dev root password database\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca51da"},"children":[{"type":"text","value":"# Waits for mysql to become actually available"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbc7e0"},"children":[{"type":"text","value":"wait_for_mysql"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  query="}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\"SELECT count(*) FROM users\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  timeout=180 "}]},{"type":"element","tag":"span","props":{"class":"ct-ca51da"},"children":[{"type":"text","value":"# 3 minutes limit"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  i=0"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" docker "}]},{"type":"element","tag":"span","props":{"class":"ct-d16e23"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" -it "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" mysql --user="}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" -e "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"do"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"    sleep 1"}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"    i="}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"$(("}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-da51c2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" [[ "}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"-ge"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" ]]"}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d16e23"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":"\"[Error] can't properly query MySQL after "}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a9623c"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-306e96"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-f5a36e"},"children":[{"type":"text","value":" secs\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d16e23"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-af65f8"},"children":[{"type":"text","value":"done"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-129666"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca51da"},"children":[{"type":"text","value":"# usage: wait_for_mysql miin-mysql-dev root password database"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"Wait%20for%20redis"},"children":[{"type":"text","value":"Wait for redis"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-da51c2{color:#79C0FF}.ct-a9623c{color:#C9D1D9}.ct-306e96{color:#C9D1D9}.ct-d16e23{color:#79C0FF}.ct-af65f8{color:#FF7B72}.ct-f5a36e{color:#A5D6FF}.ct-129666{color:#C9D1D9}.ct-cbc7e0{color:#D2A8FF}.ct-ca51da{color:#8B949E}.light .ct-ca51da{color:#93A1A1}.light .ct-cbc7e0{color:#268BD2}.light .ct-129666{color:#657B83}.light .ct-f5a36e{color:#2AA198}.light .ct-af65f8{color:#859900}.light .ct-d16e23{color:#268BD2}.light .ct-306e96{color:#859900}.light .ct-a9623c{color:#268BD2}.light .ct-da51c2{color:#D33682}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Docker:Wait for mysql.md","_source":"content","_file":"Docker/Wait for mysql.md","_extension":"md"},{"_path":"/docker/wait-for-redis","_dir":"docker","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Wait For Redis","description":"wait-for-it.sh doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before redis is ready to accept connections","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vishnubob/wait-for-it","rel":["nofollow"]},"children":[{"type":"text","value":"wait-for-it.sh"}]},{"type":"text","value":" doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before redis is ready to accept connections"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This script waits for first successful ping or exits with non-zero status after 3 minutes."}]},{"type":"element","tag":"code","props":{"code":"# Waits for redis to become actually available\nwait_for_redis() {\n  timeout=180 # 3 minutes\n  i=0\n  while ! docker exec -it \"$1\" redis-cli -h localhost -p 6379 -a \"$2\" ping | grep \"PONG\" >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly ping Redis container after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_redis miin-redis-dev password\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# Waits for redis to become actually available\nwait_for_redis() {\n  timeout=180 # 3 minutes\n  i=0\n  while ! docker exec -it \"$1\" redis-cli -h localhost -p 6379 -a \"$2\" ping | grep \"PONG\" >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly ping Redis container after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_redis miin-redis-dev password\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"Wait%20for%20mysql"},"children":[{"type":"text","value":"Wait for mysql"}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vishnubob/wait-for-it","rel":["nofollow"]},"children":[{"type":"text","value":"wait-for-it.sh"}]},{"type":"text","value":" doing a great job of waiting for different services to become alive, but on #MacOs #docker is binding port on container start, seconds before redis is ready to accept connections"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This script waits for first successful ping or exits with non-zero status after 3 minutes."}]},{"type":"element","tag":"code","props":{"code":"# Waits for redis to become actually available\nwait_for_redis() {\n  timeout=180 # 3 minutes\n  i=0\n  while ! docker exec -it \"$1\" redis-cli -h localhost -p 6379 -a \"$2\" ping | grep \"PONG\" >/dev/null 2>&1; do\n    sleep 1;\n\n    i=$(($i+1))\n    if [[ ${i} -ge ${timeout} ]]; then\n      echo \"[Error] can't properly ping Redis container after ${i} secs\"\n      exit 1;\n    fi\n  done\n}\n\n# usage: wait_for_redis miin-redis-dev password\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03d24a"},"children":[{"type":"text","value":"# Waits for redis to become actually available"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e7d96c"},"children":[{"type":"text","value":"wait_for_redis"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"  timeout=180 "}]},{"type":"element","tag":"span","props":{"class":"ct-03d24a"},"children":[{"type":"text","value":"# 3 minutes"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"  i=0"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"while"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" docker "}]},{"type":"element","tag":"span","props":{"class":"ct-695126"},"children":[{"type":"text","value":"exec"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" -it "}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" redis-cli -h localhost -p 6379 -a "}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" ping "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" grep "}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\"PONG\""}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"/dev/null "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"2>&1;"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"do"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"    sleep 1"}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"    i="}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"$(("}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-5053bb"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" [[ "}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"-ge"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"timeout"}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" ]]"}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"then"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-695126"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":"\"[Error] can't properly ping Redis container after "}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-f47317"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-0992cc"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-7a4779"},"children":[{"type":"text","value":" secs\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-695126"},"children":[{"type":"text","value":"exit"}]},{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a0858d"},"children":[{"type":"text","value":"done"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a73a60"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-03d24a"},"children":[{"type":"text","value":"# usage: wait_for_redis miin-redis-dev password"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"Wait%20for%20mysql"},"children":[{"type":"text","value":"Wait for mysql"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-5053bb{color:#79C0FF}.ct-f47317{color:#C9D1D9}.ct-0992cc{color:#C9D1D9}.ct-7a4779{color:#A5D6FF}.ct-695126{color:#79C0FF}.ct-a0858d{color:#FF7B72}.ct-a73a60{color:#C9D1D9}.ct-e7d96c{color:#D2A8FF}.ct-03d24a{color:#8B949E}.light .ct-03d24a{color:#93A1A1}.light .ct-e7d96c{color:#268BD2}.light .ct-a73a60{color:#657B83}.light .ct-a0858d{color:#859900}.light .ct-695126{color:#268BD2}.light .ct-7a4779{color:#2AA198}.light .ct-0992cc{color:#859900}.light .ct-f47317{color:#268BD2}.light .ct-5053bb{color:#D33682}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Docker:Wait for redis.md","_source":"content","_file":"Docker/Wait for redis.md","_extension":"md"},{"_path":"/frontend/react-native/oauth2-login","_dir":"react-native","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"OAuth2 Login","description":"Use #oauth2 login with React-Native","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use #oauth2 login with React-Native"}]},{"type":"element","tag":"h2","props":{"id":"common-oauth2-providers"},"children":[{"type":"text","value":"Common OAuth2 providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be handled by "},{"type":"element","tag":"a","props":{"href":"react-native-app-auth"},"children":[{"type":"text","value":"react-native-app-auth"}]},{"type":"text","value":" by redirecting to url "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"com.yourapp://oauth2provider"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"example-for-google"},"children":[{"type":"text","value":"Example for #Google"}]},{"type":"element","tag":"code","props":{"code":"import { authorize } from 'react-native-app-auth';\n\nconst GOOGLE_OAUTH_CLIENT = '...';\n\n// ...\nconst authState = await authorize({\n  issuer: 'https://accounts.google.com',\n  clientId: `${GOOGLE_OAUTH_CLIENT}.apps.googleusercontent.com`,\n  redirectUrl: `com.yourapp:/oauth2redirect/google`,\n  scopes: ['openid', 'profile'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { authorize } from 'react-native-app-auth';\n\nconst GOOGLE_OAUTH_CLIENT = '...';\n\n// ...\nconst authState = await authorize({\n  issuer: 'https://accounts.google.com',\n  clientId: `${GOOGLE_OAUTH_CLIENT}.apps.googleusercontent.com`,\n  redirectUrl: `com.yourapp:/oauth2redirect/google`,\n  scopes: ['openid', 'profile'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-for-yandex"},"children":[{"type":"text","value":"Example for #Yandex"}]},{"type":"element","tag":"code","props":{"code":"const YANDEX_OAUTH_CLIENT = '...';\nconst YANDEX_OAUTH_SECRET = '...'; // better hide it somehow\nconst APP_ID = 'com.yourapp';\n\nconst authState = await authorize({\n  serviceConfiguration: {\n    authorizationEndpoint: `https://oauth.yandex.ru/authorize?response_type=code&client_id=${YANDEX_OAUTH_CLIENT}&redirect_uri=${APP_ID}:/oauth2redirect`,\n    // TODO: replace it with your own backend to secure client_secret:\n    tokenEndpoint: `https://oauth.yandex.ru/token?grant_type=authorization_code&client_id=${YANDEX_OAUTH_CLIENT}&client_secret=${YANDEX_OAUTH_SECRET}`,\n  },\n  clientId: YANDEX_OAUTH_CLIENT,\n  redirectUrl: `${APP_ID}:/oauth2redirect`,\n  scopes: ['login:info', 'login:avatar'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n\ncallback(authState.accessToken);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const YANDEX_OAUTH_CLIENT = '...';\nconst YANDEX_OAUTH_SECRET = '...'; // better hide it somehow\nconst APP_ID = 'com.yourapp';\n\nconst authState = await authorize({\n  serviceConfiguration: {\n    authorizationEndpoint: `https://oauth.yandex.ru/authorize?response_type=code&client_id=${YANDEX_OAUTH_CLIENT}&redirect_uri=${APP_ID}:/oauth2redirect`,\n    // TODO: replace it with your own backend to secure client_secret:\n    tokenEndpoint: `https://oauth.yandex.ru/token?grant_type=authorization_code&client_id=${YANDEX_OAUTH_CLIENT}&client_secret=${YANDEX_OAUTH_SECRET}`,\n  },\n  clientId: YANDEX_OAUTH_CLIENT,\n  redirectUrl: `${APP_ID}:/oauth2redirect`,\n  scopes: ['login:info', 'login:avatar'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n\ncallback(authState.accessToken);\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"apple-id-login"},"children":[{"type":"text","value":"Apple ID login"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/invertase/react-native-apple-authentication","rel":["nofollow"]},"children":[{"type":"text","value":"react-native-apple-authentication"}]},{"type":"text","value":" has its own "},{"type":"element","tag":"a","props":{"href":"https://github.com/invertase/react-native-apple-authentication/tree/main/docs","rel":["nofollow"]},"children":[{"type":"text","value":"documentation"}]},{"type":"text","value":" on setting up OAuth using Apple ID."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use #oauth2 login with React-Native"}]},{"type":"element","tag":"h2","props":{"id":"common-oauth2-providers"},"children":[{"type":"text","value":"Common OAuth2 providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Can be handled by "},{"type":"element","tag":"a","props":{"href":"react-native-app-auth"},"children":[{"type":"text","value":"react-native-app-auth"}]},{"type":"text","value":" by redirecting to url "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"com.yourapp://oauth2provider"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"example-for-google"},"children":[{"type":"text","value":"Example for #Google"}]},{"type":"element","tag":"code","props":{"code":"import { authorize } from 'react-native-app-auth';\n\nconst GOOGLE_OAUTH_CLIENT = '...';\n\n// ...\nconst authState = await authorize({\n  issuer: 'https://accounts.google.com',\n  clientId: `${GOOGLE_OAUTH_CLIENT}.apps.googleusercontent.com`,\n  redirectUrl: `com.yourapp:/oauth2redirect/google`,\n  scopes: ['openid', 'profile'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-30fca9"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'react-native-app-auth'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"GOOGLE_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'...'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5c3a48"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"authState"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37aed"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  issuer: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'https://accounts.google.com'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  clientId: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"GOOGLE_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}.apps.googleusercontent.com`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  redirectUrl: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"`com.yourapp:/oauth2redirect/google`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  scopes: ["}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'openid'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'profile'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  dangerouslyAllowInsecureHttpRequests: "}]},{"type":"element","tag":"span","props":{"class":"ct-b0ada8"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"example-for-yandex"},"children":[{"type":"text","value":"Example for #Yandex"}]},{"type":"element","tag":"code","props":{"code":"const YANDEX_OAUTH_CLIENT = '...';\nconst YANDEX_OAUTH_SECRET = '...'; // better hide it somehow\nconst APP_ID = 'com.yourapp';\n\nconst authState = await authorize({\n  serviceConfiguration: {\n    authorizationEndpoint: `https://oauth.yandex.ru/authorize?response_type=code&client_id=${YANDEX_OAUTH_CLIENT}&redirect_uri=${APP_ID}:/oauth2redirect`,\n    // TODO: replace it with your own backend to secure client_secret:\n    tokenEndpoint: `https://oauth.yandex.ru/token?grant_type=authorization_code&client_id=${YANDEX_OAUTH_CLIENT}&client_secret=${YANDEX_OAUTH_SECRET}`,\n  },\n  clientId: YANDEX_OAUTH_CLIENT,\n  redirectUrl: `${APP_ID}:/oauth2redirect`,\n  scopes: ['login:info', 'login:avatar'],\n  dangerouslyAllowInsecureHttpRequests: true,\n});\n\ncallback(authState.accessToken);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'...'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_SECRET"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'...'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-5c3a48"},"children":[{"type":"text","value":"// better hide it somehow"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"APP_ID"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'com.yourapp'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7218d8"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"authState"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0d487"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37aed"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  serviceConfiguration: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"    authorizationEndpoint: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"`https://oauth.yandex.ru/authorize?response_type=code&client_id=${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}&redirect_uri=${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"APP_ID"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}:/oauth2redirect`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5c3a48"},"children":[{"type":"text","value":"// TODO: replace it with your own backend to secure client_secret:"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"    tokenEndpoint: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"`https://oauth.yandex.ru/token?grant_type=authorization_code&client_id=${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}&client_secret=${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_SECRET"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  clientId: "}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"YANDEX_OAUTH_CLIENT"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  redirectUrl: "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-4bc432"},"children":[{"type":"text","value":"APP_ID"}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"}:/oauth2redirect`"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  scopes: ["}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'login:info'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4d046c"},"children":[{"type":"text","value":"'login:avatar'"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"  dangerouslyAllowInsecureHttpRequests: "}]},{"type":"element","tag":"span","props":{"class":"ct-b0ada8"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d37aed"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-30fca9"},"children":[{"type":"text","value":"authState"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-30fca9"},"children":[{"type":"text","value":"accessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-4b68e1"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"apple-id-login"},"children":[{"type":"text","value":"Apple ID login"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/invertase/react-native-apple-authentication","rel":["nofollow"]},"children":[{"type":"text","value":"react-native-apple-authentication"}]},{"type":"text","value":" has its own "},{"type":"element","tag":"a","props":{"href":"https://github.com/invertase/react-native-apple-authentication/tree/main/docs","rel":["nofollow"]},"children":[{"type":"text","value":"documentation"}]},{"type":"text","value":" on setting up OAuth using Apple ID."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b0ada8{color:#79C0FF}.ct-d37aed{color:#D2A8FF}.ct-5c3a48{color:#8B949E}.ct-4bc432{color:#79C0FF}.ct-7218d8{color:#FF7B72}.ct-4d046c{color:#A5D6FF}.ct-30fca9{color:#C9D1D9}.ct-4b68e1{color:#C9D1D9}.ct-a0d487{color:#FF7B72}.light .ct-a0d487{color:#859900}.light .ct-4b68e1{color:#657B83}.light .ct-30fca9{color:#268BD2}.light .ct-4d046c{color:#2AA198}.light .ct-7218d8{color:#073642}.light .ct-4bc432{color:#268BD2}.light .ct-5c3a48{color:#93A1A1}.light .ct-d37aed{color:#268BD2}.light .ct-b0ada8{color:#B58900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"common-oauth2-providers","depth":2,"text":"Common OAuth2 providers","children":[{"id":"example-for-google","depth":3,"text":"Example for #Google"},{"id":"example-for-yandex","depth":3,"text":"Example for #Yandex"}]},{"id":"apple-id-login","depth":2,"text":"Apple ID login"}]}},"_type":"markdown","_id":"content:Frontend:React Native:OAuth2 login.md","_source":"content","_file":"Frontend/React Native/OAuth2 login.md","_extension":"md"},{"_path":"/frontend/react-native/preserve-flatlist-scroll-position-in-react-native","_dir":"react-native","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Preserve FlatList Scroll Position In React Native","description":"Sometimes you need to keep scroll position of FlatList in React Native after some user interactions.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you need to keep scroll position of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"FlatList"}]},{"type":"text","value":" in React Native after some user interactions."}]},{"type":"element","tag":"code","props":{"code":"// interact() is doing some stuff, that changes FlatList scroll size\ntype Props = { interact: () => void; }\n\nconst SomeList: FC<Props> = ({ interact }) => {\n  const scrollPosition = useRef(0);\n  const scrollHeight = useRef(0);\n  \n  // set it to `true` before interaction and back to `false` right after\n  const shouldKeepScrollPosition = useRef(false);\n\n  const onScroll = useCallback(\n    (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n      scrollPosition.current = event.nativeEvent.contentOffset.y;\n    },\n    [],\n  );\n\n  const onContentSizeChange = useCallback((_: number, h: number) => {\n    if (!shouldKeepScrollPosition.current) {\n      scrollHeight.current = h;\n      return;\n    }\n\n    ref.current?.scrollToOffset({\n      offset: scrollPosition.current + (h - scrollHeight.current),\n      animated: false,\n    });\n\n    scrollHeight.current = h;\n  }, []);\n\n  // onInteraction wraps interaction to preserve scroll position\n  const onInteraction = useCallback(\n    () => {\n      shouldKeepScrollPosition.current = true;\n\n      setTimeout(() => {\n        interact();\n      }, 0);\n\n      setTimeout(() => {\n        shouldKeepScrollPosition.current = false;\n      }, 500);\n    },\n    [setSelectedSubThemes],\n  );\n  \n  return (\n    <FlatList\n      // ...required FlatList options\n      ref={ref}\n      onContentSizeChange={onContentSizeChange}\n      onRefresh={onRefresh}\n      onScroll={onScroll}\n    />\n  )\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// interact() is doing some stuff, that changes FlatList scroll size\ntype Props = { interact: () => void; }\n\nconst SomeList: FC<Props> = ({ interact }) => {\n  const scrollPosition = useRef(0);\n  const scrollHeight = useRef(0);\n  \n  // set it to `true` before interaction and back to `false` right after\n  const shouldKeepScrollPosition = useRef(false);\n\n  const onScroll = useCallback(\n    (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n      scrollPosition.current = event.nativeEvent.contentOffset.y;\n    },\n    [],\n  );\n\n  const onContentSizeChange = useCallback((_: number, h: number) => {\n    if (!shouldKeepScrollPosition.current) {\n      scrollHeight.current = h;\n      return;\n    }\n\n    ref.current?.scrollToOffset({\n      offset: scrollPosition.current + (h - scrollHeight.current),\n      animated: false,\n    });\n\n    scrollHeight.current = h;\n  }, []);\n\n  // onInteraction wraps interaction to preserve scroll position\n  const onInteraction = useCallback(\n    () => {\n      shouldKeepScrollPosition.current = true;\n\n      setTimeout(() => {\n        interact();\n      }, 0);\n\n      setTimeout(() => {\n        shouldKeepScrollPosition.current = false;\n      }, 500);\n    },\n    [setSelectedSubThemes],\n  );\n  \n  return (\n    <FlatList\n      // ...required FlatList options\n      ref={ref}\n      onContentSizeChange={onContentSizeChange}\n      onRefresh={onRefresh}\n      onScroll={onScroll}\n    />\n  )\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you need to keep scroll position of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"FlatList"}]},{"type":"text","value":" in React Native after some user interactions."}]},{"type":"element","tag":"code","props":{"code":"// interact() is doing some stuff, that changes FlatList scroll size\ntype Props = { interact: () => void; }\n\nconst SomeList: FC<Props> = ({ interact }) => {\n  const scrollPosition = useRef(0);\n  const scrollHeight = useRef(0);\n  \n  // set it to `true` before interaction and back to `false` right after\n  const shouldKeepScrollPosition = useRef(false);\n\n  const onScroll = useCallback(\n    (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n      scrollPosition.current = event.nativeEvent.contentOffset.y;\n    },\n    [],\n  );\n\n  const onContentSizeChange = useCallback((_: number, h: number) => {\n    if (!shouldKeepScrollPosition.current) {\n      scrollHeight.current = h;\n      return;\n    }\n\n    ref.current?.scrollToOffset({\n      offset: scrollPosition.current + (h - scrollHeight.current),\n      animated: false,\n    });\n\n    scrollHeight.current = h;\n  }, []);\n\n  // onInteraction wraps interaction to preserve scroll position\n  const onInteraction = useCallback(\n    () => {\n      shouldKeepScrollPosition.current = true;\n\n      setTimeout(() => {\n        interact();\n      }, 0);\n\n      setTimeout(() => {\n        shouldKeepScrollPosition.current = false;\n      }, 500);\n    },\n    [setSelectedSubThemes],\n  );\n  \n  return (\n    <FlatList\n      // ...required FlatList options\n      ref={ref}\n      onContentSizeChange={onContentSizeChange}\n      onRefresh={onRefresh}\n      onScroll={onScroll}\n    />\n  )\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-535c8b"},"children":[{"type":"text","value":"// interact() is doing some stuff, that changes FlatList scroll size"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-78cf51"},"children":[{"type":"text","value":"Props"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"interact"}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4274e9"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"; }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-458a21"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-83c1f5"},"children":[{"type":"text","value":"SomeList"}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-795e06"},"children":[{"type":"text","value":"FC"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-795e06"},"children":[{"type":"text","value":"Props"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" ({ "}]},{"type":"element","tag":"span","props":{"class":"ct-099455"},"children":[{"type":"text","value":"interact"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" }) "}]},{"type":"element","tag":"span","props":{"class":"ct-458a21"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"scrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1e4c73"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"scrollHeight"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1e4c73"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-535c8b"},"children":[{"type":"text","value":"// set it to `true` before interaction and back to `false` right after"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"shouldKeepScrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d6323a"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"onScroll"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"class":"ct-099455"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-795e06"},"children":[{"type":"text","value":"NativeSyntheticEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-795e06"},"children":[{"type":"text","value":"NativeScrollEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":">) "}]},{"type":"element","tag":"span","props":{"class":"ct-458a21"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"scrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"nativeEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"contentOffset"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-458a21"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-90f08c"},"children":[{"type":"text","value":"onContentSizeChange"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-83c1f5"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-099455"},"children":[{"type":"text","value":"_"}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d1941"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-099455"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-ae8b8c"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d1941"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-458a21"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7e7b24"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"shouldKeepScrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"scrollHeight"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"scrollToOffset"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      offset: "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"scrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"scrollHeight"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      animated: "}]},{"type":"element","tag":"span","props":{"class":"ct-d6323a"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"scrollHeight"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"h"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  }, []);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-535c8b"},"children":[{"type":"text","value":"// onInteraction wraps interaction to preserve scroll position"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"onInteraction"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    () "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"shouldKeepScrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6323a"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f97649"},"children":[{"type":"text","value":"interact"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      }, "}]},{"type":"element","tag":"span","props":{"class":"ct-1e4c73"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-94f37e"},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-a46213"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"shouldKeepScrollPosition"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d6323a"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      }, "}]},{"type":"element","tag":"span","props":{"class":"ct-1e4c73"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    ["}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"setSelectedSubThemes"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-237565"},"children":[{"type":"text","value":"FlatList"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-535c8b"},"children":[{"type":"text","value":"// ...required FlatList options"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onContentSizeChange"}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onContentSizeChange"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onRefresh"}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onRefresh"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onScroll"}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"class":"ct-373f53"},"children":[{"type":"text","value":"onScroll"}]},{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-6551f2"},"children":[{"type":"text","value":"/>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"  )"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7aa359"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-237565{color:#FFA657}.ct-6d1941{color:#79C0FF}.ct-90f08c{color:#79C0FF}.ct-373f53{color:#C9D1D9}.ct-d6323a{color:#79C0FF}.ct-1e4c73{color:#79C0FF}.ct-94f37e{color:#79C0FF}.ct-099455{color:#FFA657}.ct-795e06{color:#FFA657}.ct-ae8b8c{color:#FF7B72}.ct-83c1f5{color:#D2A8FF}.ct-7e7b24{color:#C9D1D9}.ct-458a21{color:#FF7B72}.ct-4274e9{color:#79C0FF}.ct-f97649{color:#D2A8FF}.ct-6551f2{color:#FF7B72}.ct-78cf51{color:#FFA657}.ct-7aa359{color:#C9D1D9}.ct-a46213{color:#FF7B72}.ct-535c8b{color:#8B949E}.light .ct-535c8b{color:#93A1A1}.light .ct-a46213{color:#073642}.light .ct-7aa359{color:#657B83}.light .ct-78cf51{color:#268BD2}.light .ct-6551f2{color:#859900}.light .ct-f97649{color:#268BD2}.light .ct-4274e9{color:#859900}.light .ct-458a21{color:#073642}.light .ct-7e7b24{color:#657B83}.light .ct-83c1f5{color:#268BD2}.light .ct-ae8b8c{color:#859900}.light .ct-795e06{color:#268BD2}.light .ct-099455{color:#657B83}.light .ct-94f37e{color:#268BD2}.light .ct-1e4c73{color:#D33682}.light .ct-d6323a{color:#B58900}.light .ct-373f53{color:#268BD2}.light .ct-90f08c{color:#268BD2}.light .ct-6d1941{color:#859900}.light .ct-237565{color:#657B83}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Frontend:React Native:Preserve FlatList scroll position in React Native.md","_source":"content","_file":"Frontend/React Native/Preserve FlatList scroll position in React Native.md","_extension":"md"},{"_path":"/frontend/react-native/useful-comands","_dir":"react-native","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Useful Comands","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"show-android-logcat"},"children":[{"type":"text","value":"Show android logcat"}]},{"type":"element","tag":"code","props":{"code":"adb logcat com.application:I \"*:S\"\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"adb logcat com.application:I \"*:S\"\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"get-apks-sha-256"},"children":[{"type":"text","value":"Get .apk's SHA-256"}]},{"type":"element","tag":"code","props":{"code":"keytool -printcert -jarfile \"$1\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"keytool -printcert -jarfile \"$1\"\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"assemble-debug-release-on-android"},"children":[{"type":"text","value":"Assemble debug release on Android"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Packages release with bundled resources."}]},{"type":"element","tag":"code","props":{"code":"npx react-native bundle \\\n  --platform android \\\n  --dev false \\\n  --entry-file index.js \\\n  --bundle-output android/app/src/main/assets/index.android.bundle \\\n  --assets-dest android/app/src/main/res/\n\ncd android && ./gradlew assembleDebug\n\n# do your stuff\n\n./gradlew clean\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npx react-native bundle \\\n  --platform android \\\n  --dev false \\\n  --entry-file index.js \\\n  --bundle-output android/app/src/main/assets/index.android.bundle \\\n  --assets-dest android/app/src/main/res/\n\ncd android && ./gradlew assembleDebug\n\n# do your stuff\n\n./gradlew clean\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"send-release-to-android-device"},"children":[{"type":"text","value":"Send release to Android device"}]},{"type":"element","tag":"code","props":{"code":"cd ./android \\\n  && ./gradlew assembleRelease \\\n  && adb install ./app/build/outputs/apk/release/app-release.apk\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"cd ./android \\\n  && ./gradlew assembleRelease \\\n  && adb install ./app/build/outputs/apk/release/app-release.apk\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"deep-links"},"children":[{"type":"text","value":"Deep links"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zarah.dev/2022/02/08/android12-deeplinks.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://zarah.dev/2022/02/08/android12-deeplinks.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.android.com/training/app-links/verify-site-associations#invoke-domain-verification","rel":["nofollow"]},"children":[{"type":"text","value":"https://developer.android.com/training/app-links/verify-site-associations#invoke-domain-verification"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://miin.ru&relation=delegate_permission/common.handle_all_urls","rel":["nofollow"]},"children":[{"type":"text","value":"https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://miin.ru&relation=delegate_permission/common.handle_all_urls"}]}]}]},{"type":"element","tag":"h3","props":{"id":"open-deep-links"},"children":[{"type":"text","value":"Open deep links"}]},{"type":"element","tag":"code","props":{"code":"# ios \nxcrun simctl openurl booted $1\n\n# android\nadb shell am start -W -a android.intent.action.VIEW -d $1 \\\ncom.application\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# ios \nxcrun simctl openurl booted $1\n\n# android\nadb shell am start -W -a android.intent.action.VIEW -d $1 \\\ncom.application\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"reverify-links-on-android"},"children":[{"type":"text","value":"Reverify links on Android"}]},{"type":"element","tag":"code","props":{"code":"PACKAGE=\"com.application\"\n\nadb shell pm set-app-links --package $PACKAGE 0 all && \\\n  adb shell pm verify-app-links --re-verify $PACKAGE\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"PACKAGE=\"com.application\"\n\nadb shell pm set-app-links --package $PACKAGE 0 all && \\\n  adb shell pm verify-app-links --re-verify $PACKAGE\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"show-android-logcat"},"children":[{"type":"text","value":"Show android logcat"}]},{"type":"element","tag":"code","props":{"code":"adb logcat com.application:I \"*:S\"\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"adb logcat com.application:I "}]},{"type":"element","tag":"span","props":{"class":"ct-bc70c2"},"children":[{"type":"text","value":"\"*:S\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"get-apks-sha-256"},"children":[{"type":"text","value":"Get .apk's SHA-256"}]},{"type":"element","tag":"code","props":{"code":"keytool -printcert -jarfile \"$1\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"keytool -printcert -jarfile "}]},{"type":"element","tag":"span","props":{"class":"ct-bc70c2"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-769fa0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-2f8649"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-bc70c2"},"children":[{"type":"text","value":"\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"assemble-debug-release-on-android"},"children":[{"type":"text","value":"Assemble debug release on Android"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Packages release with bundled resources."}]},{"type":"element","tag":"code","props":{"code":"npx react-native bundle \\\n  --platform android \\\n  --dev false \\\n  --entry-file index.js \\\n  --bundle-output android/app/src/main/assets/index.android.bundle \\\n  --assets-dest android/app/src/main/res/\n\ncd android && ./gradlew assembleDebug\n\n# do your stuff\n\n./gradlew clean\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"npx react-native bundle \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  --platform android \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  --dev "}]},{"type":"element","tag":"span","props":{"class":"ct-bdf279"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  --entry-file index.js \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  --bundle-output android/app/src/main/assets/index.android.bundle \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  --assets-dest android/app/src/main/res/"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdf279"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" android "}]},{"type":"element","tag":"span","props":{"class":"ct-206001"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" ./gradlew assembleDebug"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-738ba9"},"children":[{"type":"text","value":"# do your stuff"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"./gradlew clean"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"send-release-to-android-device"},"children":[{"type":"text","value":"Send release to Android device"}]},{"type":"element","tag":"code","props":{"code":"cd ./android \\\n  && ./gradlew assembleRelease \\\n  && adb install ./app/build/outputs/apk/release/app-release.apk\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bdf279"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" ./android \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-206001"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" ./gradlew assembleRelease \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-206001"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" adb install ./app/build/outputs/apk/release/app-release.apk"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"deep-links"},"children":[{"type":"text","value":"Deep links"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://zarah.dev/2022/02/08/android12-deeplinks.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://zarah.dev/2022/02/08/android12-deeplinks.html"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.android.com/training/app-links/verify-site-associations#invoke-domain-verification","rel":["nofollow"]},"children":[{"type":"text","value":"https://developer.android.com/training/app-links/verify-site-associations#invoke-domain-verification"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://miin.ru&relation=delegate_permission/common.handle_all_urls","rel":["nofollow"]},"children":[{"type":"text","value":"https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://miin.ru&relation=delegate_permission/common.handle_all_urls"}]}]}]},{"type":"element","tag":"h3","props":{"id":"open-deep-links"},"children":[{"type":"text","value":"Open deep links"}]},{"type":"element","tag":"code","props":{"code":"# ios \nxcrun simctl openurl booted $1\n\n# android\nadb shell am start -W -a android.intent.action.VIEW -d $1 \\\ncom.application\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-738ba9"},"children":[{"type":"text","value":"# ios "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"xcrun simctl openurl booted "}]},{"type":"element","tag":"span","props":{"class":"ct-769fa0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-2f8649"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-738ba9"},"children":[{"type":"text","value":"# android"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"adb shell am start -W -a android.intent.action.VIEW -d "}]},{"type":"element","tag":"span","props":{"class":"ct-769fa0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-2f8649"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"com.application"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"reverify-links-on-android"},"children":[{"type":"text","value":"Reverify links on Android"}]},{"type":"element","tag":"code","props":{"code":"PACKAGE=\"com.application\"\n\nadb shell pm set-app-links --package $PACKAGE 0 all && \\\n  adb shell pm verify-app-links --re-verify $PACKAGE\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"PACKAGE="}]},{"type":"element","tag":"span","props":{"class":"ct-bc70c2"},"children":[{"type":"text","value":"\"com.application\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"adb shell pm set-app-links --package "}]},{"type":"element","tag":"span","props":{"class":"ct-769fa0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-2f8649"},"children":[{"type":"text","value":"PACKAGE"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" 0 all "}]},{"type":"element","tag":"span","props":{"class":"ct-206001"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e06831"},"children":[{"type":"text","value":"  adb shell pm verify-app-links --re-verify "}]},{"type":"element","tag":"span","props":{"class":"ct-769fa0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-2f8649"},"children":[{"type":"text","value":"PACKAGE"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-738ba9{color:#8B949E}.ct-206001{color:#FF7B72}.ct-bdf279{color:#79C0FF}.ct-2f8649{color:#C9D1D9}.ct-769fa0{color:#C9D1D9}.ct-bc70c2{color:#A5D6FF}.ct-e06831{color:#C9D1D9}.light .ct-e06831{color:#657B83}.light .ct-bc70c2{color:#2AA198}.light .ct-769fa0{color:#859900}.light .ct-2f8649{color:#268BD2}.light .ct-bdf279{color:#268BD2}.light .ct-206001{color:#859900}.light .ct-738ba9{color:#93A1A1}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"show-android-logcat","depth":2,"text":"Show android logcat"},{"id":"get-apks-sha-256","depth":2,"text":"Get .apk's SHA-256"},{"id":"assemble-debug-release-on-android","depth":2,"text":"Assemble debug release on Android"},{"id":"send-release-to-android-device","depth":2,"text":"Send release to Android device"},{"id":"deep-links","depth":2,"text":"Deep links","children":[{"id":"open-deep-links","depth":3,"text":"Open deep links"},{"id":"reverify-links-on-android","depth":3,"text":"Reverify links on Android"}]}]}},"_type":"markdown","_id":"content:Frontend:React Native:Useful comands.md","_source":"content","_file":"Frontend/React Native/Useful comands.md","_extension":"md"},{"_path":"/frontend/react/axios-refresh-token-on-react","_dir":"react","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Axios Refresh Token On React","description":"<ApiProvider /> component, that will handle token refresh if needed. Refresh function should, probably, be passed through component props.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<ApiProvider />"}]},{"type":"text","value":" component, that will handle token refresh if needed. Refresh function should, probably, be passed through component props."}]},{"type":"element","tag":"code","props":{"code":"import axios from \"axios\";\nimport React, {\n  createContext,\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n} from \"react\";\n\ninterface APIProviderProps extends PropsWithChildren {\n  tokens: {\n    access: string;\n    refresh: string;\n  };\n  logout: () => void;\n}\n\nconst APIContext = createContext({\n  client: axios.create({\n    baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n  }),\n});\n\nconst APIProvider: FC<APIProviderProps> = ({ \n    tokens, \n    logout, \n    children,\n}) => {\n  const client = useRef(\n    axios.create({\n      baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n    })\n  ).current;\n\n  const refreshTokens = useCallback<() => string>(() => {\n    // TODO: implement me\n    throw new Error(\"not implemented\");\n  }, []);\n\n  useEffect(() => {\n    if (!tokens.access) {\n      return;\n    }\n\n    // append `access` token to all requests\n    const req = client.interceptors.request.use(\n      async (config) => {\n        config.headers = {\n          Authorization: `Bearer ${tokens.access}`,\n        };\n        return config;\n      },\n      (error) => {\n        Promise.reject(error);\n      }\n    );\n\n    // refreshing interceptor\n    const resp = client.interceptors.response.use(\n      (response) => {\n        return response;\n      },\n      async function (error) {\n        const originalRequest = error.config;\n\n        if (error.response.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n\n          const newToken = refreshTokens;\n\n          return axios({\n            ...originalRequest,\n            headers: {\n              ...originalRequest.headers,\n              Authorization: \"Bearer \" + newToken,\n            },\n          });\n        }\n\n        logout();\n        return Promise.reject(error);\n      }\n    );\n\n    return () => {\n      axios.interceptors.request.eject(req);\n      axios.interceptors.request.eject(resp);\n    };\n  }, [client, tokens.access, tokens.refresh, refreshTokens, logout]);\n\n  return (\n    <APIContext.Provider value={{ client }}>\n        {children}\n    </APIContext.Provider>\n  );\n};\n\nexport const useAPI = () => useContext(APIContext).client;\n\nexport { APIProvider };\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import axios from \"axios\";\nimport React, {\n  createContext,\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n} from \"react\";\n\ninterface APIProviderProps extends PropsWithChildren {\n  tokens: {\n    access: string;\n    refresh: string;\n  };\n  logout: () => void;\n}\n\nconst APIContext = createContext({\n  client: axios.create({\n    baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n  }),\n});\n\nconst APIProvider: FC<APIProviderProps> = ({ \n    tokens, \n    logout, \n    children,\n}) => {\n  const client = useRef(\n    axios.create({\n      baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n    })\n  ).current;\n\n  const refreshTokens = useCallback<() => string>(() => {\n    // TODO: implement me\n    throw new Error(\"not implemented\");\n  }, []);\n\n  useEffect(() => {\n    if (!tokens.access) {\n      return;\n    }\n\n    // append `access` token to all requests\n    const req = client.interceptors.request.use(\n      async (config) => {\n        config.headers = {\n          Authorization: `Bearer ${tokens.access}`,\n        };\n        return config;\n      },\n      (error) => {\n        Promise.reject(error);\n      }\n    );\n\n    // refreshing interceptor\n    const resp = client.interceptors.response.use(\n      (response) => {\n        return response;\n      },\n      async function (error) {\n        const originalRequest = error.config;\n\n        if (error.response.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n\n          const newToken = refreshTokens;\n\n          return axios({\n            ...originalRequest,\n            headers: {\n              ...originalRequest.headers,\n              Authorization: \"Bearer \" + newToken,\n            },\n          });\n        }\n\n        logout();\n        return Promise.reject(error);\n      }\n    );\n\n    return () => {\n      axios.interceptors.request.eject(req);\n      axios.interceptors.request.eject(resp);\n    };\n  }, [client, tokens.access, tokens.refresh, refreshTokens, logout]);\n\n  return (\n    <APIContext.Provider value={{ client }}>\n        {children}\n    </APIContext.Provider>\n  );\n};\n\nexport const useAPI = () => useContext(APIContext).client;\n\nexport { APIProvider };\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<ApiProvider />"}]},{"type":"text","value":" component, that will handle token refresh if needed. Refresh function should, probably, be passed through component props."}]},{"type":"element","tag":"code","props":{"code":"import axios from \"axios\";\nimport React, {\n  createContext,\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n} from \"react\";\n\ninterface APIProviderProps extends PropsWithChildren {\n  tokens: {\n    access: string;\n    refresh: string;\n  };\n  logout: () => void;\n}\n\nconst APIContext = createContext({\n  client: axios.create({\n    baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n  }),\n});\n\nconst APIProvider: FC<APIProviderProps> = ({ \n    tokens, \n    logout, \n    children,\n}) => {\n  const client = useRef(\n    axios.create({\n      baseURL: process.env.NEXT_PUBLIC_API_ENDPOINT,\n    })\n  ).current;\n\n  const refreshTokens = useCallback<() => string>(() => {\n    // TODO: implement me\n    throw new Error(\"not implemented\");\n  }, []);\n\n  useEffect(() => {\n    if (!tokens.access) {\n      return;\n    }\n\n    // append `access` token to all requests\n    const req = client.interceptors.request.use(\n      async (config) => {\n        config.headers = {\n          Authorization: `Bearer ${tokens.access}`,\n        };\n        return config;\n      },\n      (error) => {\n        Promise.reject(error);\n      }\n    );\n\n    // refreshing interceptor\n    const resp = client.interceptors.response.use(\n      (response) => {\n        return response;\n      },\n      async function (error) {\n        const originalRequest = error.config;\n\n        if (error.response.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n\n          const newToken = refreshTokens;\n\n          return axios({\n            ...originalRequest,\n            headers: {\n              ...originalRequest.headers,\n              Authorization: \"Bearer \" + newToken,\n            },\n          });\n        }\n\n        logout();\n        return Promise.reject(error);\n      }\n    );\n\n    return () => {\n      axios.interceptors.request.eject(req);\n      axios.interceptors.request.eject(resp);\n    };\n  }, [client, tokens.access, tokens.refresh, refreshTokens, logout]);\n\n  return (\n    <APIContext.Provider value={{ client }}>\n        {children}\n    </APIContext.Provider>\n  );\n};\n\nexport const useAPI = () => useContext(APIContext).client;\n\nexport { APIProvider };\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"\"axios\""}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"React"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"createContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"FC"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"PropsWithChildren"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"useContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"useEffect"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"\"react\""}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e8670"},"children":[{"type":"text","value":"APIProviderProps"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36e964"},"children":[{"type":"text","value":"PropsWithChildren"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-b796eb"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"access"}]},{"type":"element","tag":"span","props":{"class":"ct-b796eb"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8035c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-b796eb"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f8035c"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aefbc"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"APIContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"createContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  client: "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    baseURL: "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"NEXT_PUBLIC_API_ENDPOINT"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"APIProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09b65f"},"children":[{"type":"text","value":"FC"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-09b65f"},"children":[{"type":"text","value":"APIProviderProps"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" ({ "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"}) "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      baseURL: "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"NEXT_PUBLIC_API_ENDPOINT"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  )."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"refreshTokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"<() "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aefbc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":">(() "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9aae"},"children":[{"type":"text","value":"// TODO: implement me"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aefbc"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"\"not implemented\""}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  }, []);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"useEffect"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"access"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9aae"},"children":[{"type":"text","value":"// append `access` token to all requests"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"interceptors"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"          Authorization: "}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"`Bearer ${"}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-3b195f"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"access"}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5aefbc"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ce9aae"},"children":[{"type":"text","value":"// refreshing interceptor"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"resp"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"interceptors"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e583a"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"originalRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a8766c"},"children":[{"type":"text","value":"401"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"originalRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"_retry"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"originalRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"_retry"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab5dea"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e3521a"},"children":[{"type":"text","value":"newToken"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"refreshTokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"originalRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"            headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"originalRequest"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"              Authorization: "}]},{"type":"element","tag":"span","props":{"class":"ct-7ce563"},"children":[{"type":"text","value":"\"Bearer \""}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"newToken"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"            },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"          });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aefbc"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"reject"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"interceptors"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"eject"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"interceptors"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"eject"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"resp"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  }, ["}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"access"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"refreshTokens"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"APIContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"Provider"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"{{ "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" }}"}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"        {"}]},{"type":"element","tag":"span","props":{"class":"ct-3f04a8"},"children":[{"type":"text","value":"children"}]},{"type":"element","tag":"span","props":{"class":"ct-2bf5a4"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"APIContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"Provider"}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"  );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"useAPI"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-c05523"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b6199"},"children":[{"type":"text","value":"useContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"APIContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5aaa13"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-58bf89"},"children":[{"type":"text","value":"APIProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-f75ad1"},"children":[{"type":"text","value":" };"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-ab5dea{color:#79C0FF}.ct-a8766c{color:#79C0FF}.ct-3b195f{color:#A5D6FF}.ct-ce9aae{color:#8B949E}.ct-09b65f{color:#FFA657}.ct-e3521a{color:#79C0FF}.ct-5aefbc{color:#79C0FF}.ct-c05523{color:#FF7B72}.ct-8b6199{color:#D2A8FF}.ct-f8035c{color:#79C0FF}.ct-b796eb{color:#FF7B72}.ct-3f04a8{color:#FFA657}.ct-36e964{color:#79C0FF}.ct-3e8670{color:#FFA657}.ct-2bf5a4{color:#C9D1D9}.ct-6e583a{color:#FF7B72}.ct-7ce563{color:#A5D6FF}.ct-58bf89{color:#C9D1D9}.ct-f75ad1{color:#C9D1D9}.ct-5aaa13{color:#FF7B72}.light .ct-5aaa13{color:#859900}.light .ct-f75ad1{color:#657B83}.light .ct-58bf89{color:#268BD2}.light .ct-7ce563{color:#2AA198}.light .ct-6e583a{color:#073642}.light .ct-2bf5a4{color:#657B83}.light .ct-3e8670{color:#268BD2}.light .ct-36e964{color:#657B83}.light .ct-3f04a8{color:#657B83}.light .ct-b796eb{color:#859900}.light .ct-f8035c{color:#859900}.light .ct-8b6199{color:#268BD2}.light .ct-c05523{color:#073642}.light .ct-5aefbc{color:#859900}.light .ct-e3521a{color:#268BD2}.light .ct-09b65f{color:#268BD2}.light .ct-ce9aae{color:#93A1A1}.light .ct-3b195f{color:#657B83}.light .ct-a8766c{color:#D33682}.light .ct-ab5dea{color:#B58900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Frontend:React:Axios refresh token on React.md","_source":"content","_file":"Frontend/React/Axios refresh token on React.md","_extension":"md"},{"_path":"/frontend/react/axios-with-abortcontroller","_dir":"react","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Axios With AbortController","description":"If you need to cancel some request, use axios with AbortController. Previously axios used cancellation token, but now it's deprecated.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you need to cancel some request, use "},{"type":"element","tag":"a","props":{"href":"https://axios-http.com/docs/cancellation","rel":["nofollow"]},"children":[{"type":"text","value":"axios with AbortController"}]},{"type":"text","value":". Previously axios used cancellation token, but now it's deprecated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AbortController"}]},{"type":"text","value":" can be used with a multiple requests to cancel them at once."}]},{"type":"element","tag":"code","props":{"code":"import { useCallback, useRef } from \"react\";\nimport axios from 'axios';\n\nconst client = axios.create();\n\nexport const useGetUsers = () => {\n  const controller = useRef(new AbortController());\n  \n  const get = useCallback(async () => {\n    const result = await client.get(\"/\", {\n        // params and props here\n        signal: controller.current.signal,\n    });\n\n    return result.data;\n  }, []);\n\n  const cancel = useCallback(() => {\n    controller.current.abort();\n    \n    // controller should be rewritten or all requests will fail\n    controller.current = new AbortController();\n  }, [controller]);\n\n  return { get, cancel };\n};\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { useCallback, useRef } from \"react\";\nimport axios from 'axios';\n\nconst client = axios.create();\n\nexport const useGetUsers = () => {\n  const controller = useRef(new AbortController());\n  \n  const get = useCallback(async () => {\n    const result = await client.get(\"/\", {\n        // params and props here\n        signal: controller.current.signal,\n    });\n\n    return result.data;\n  }, []);\n\n  const cancel = useCallback(() => {\n    controller.current.abort();\n    \n    // controller should be rewritten or all requests will fail\n    controller.current = new AbortController();\n  }, [controller]);\n\n  return { get, cancel };\n};\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you need to cancel some request, use "},{"type":"element","tag":"a","props":{"href":"https://axios-http.com/docs/cancellation","rel":["nofollow"]},"children":[{"type":"text","value":"axios with AbortController"}]},{"type":"text","value":". Previously axios used cancellation token, but now it's deprecated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AbortController"}]},{"type":"text","value":" can be used with a multiple requests to cancel them at once."}]},{"type":"element","tag":"code","props":{"code":"import { useCallback, useRef } from \"react\";\nimport axios from 'axios';\n\nconst client = axios.create();\n\nexport const useGetUsers = () => {\n  const controller = useRef(new AbortController());\n  \n  const get = useCallback(async () => {\n    const result = await client.get(\"/\", {\n        // params and props here\n        signal: controller.current.signal,\n    });\n\n    return result.data;\n  }, []);\n\n  const cancel = useCallback(() => {\n    controller.current.abort();\n    \n    // controller should be rewritten or all requests will fail\n    controller.current = new AbortController();\n  }, [controller]);\n\n  return { get, cancel };\n};\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-622701"},"children":[{"type":"text","value":"\"react\""}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-622701"},"children":[{"type":"text","value":"'axios'"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf32a"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"useGetUsers"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf32a"},"children":[{"type":"text","value":"controller"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"useRef"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"AbortController"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf32a"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf32a"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-622701"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-558176"},"children":[{"type":"text","value":"// params and props here"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"        signal: "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"controller"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"signal"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  }, []);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fcf32a"},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"useCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-9a8fff"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"controller"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"abort"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-558176"},"children":[{"type":"text","value":"// controller should be rewritten or all requests will fail"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"controller"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"current"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ea90fd"},"children":[{"type":"text","value":"AbortController"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  }, ["}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"controller"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"]);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-383890"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-4955e7"},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":" };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c58f08"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-558176{color:#8B949E}.ct-ea90fd{color:#D2A8FF}.ct-fcf32a{color:#79C0FF}.ct-9a8fff{color:#FF7B72}.ct-622701{color:#A5D6FF}.ct-4955e7{color:#C9D1D9}.ct-c58f08{color:#C9D1D9}.ct-383890{color:#FF7B72}.light .ct-383890{color:#859900}.light .ct-c58f08{color:#657B83}.light .ct-4955e7{color:#268BD2}.light .ct-622701{color:#2AA198}.light .ct-9a8fff{color:#073642}.light .ct-fcf32a{color:#268BD2}.light .ct-ea90fd{color:#268BD2}.light .ct-558176{color:#93A1A1}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Frontend:React:Axios with AbortController.md","_source":"content","_file":"Frontend/React/Axios with AbortController.md","_extension":"md"},{"_path":"/frontend/vue/adding-global-properties-to-component","_dir":"vue","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Adding Global Properties To Component","description":"The topic's fully covered in the official documentation and in Add global variable to window.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The topic's fully covered in the "},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/typescript/options-api.html#augmenting-global-properties","rel":["nofollow"]},"children":[{"type":"text","value":"official documentation"}]},{"type":"text","value":" and in "},{"type":"element","tag":"a","props":{"href":"Add%20global%20variable%20to%20window"},"children":[{"type":"text","value":"Add global variable to window"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, you want to add global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$http"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$translate"}]},{"type":"text","value":" services to all of project's components:"}]},{"type":"element","tag":"code","props":{"code":"// ~/index.d.ts or ~/custom.d.ts\n\nimport axios from 'axios'\n\ndeclare module 'vue' {\n  interface ComponentCustomProperties {\n    $http: typeof axios\n    $translate: (key: string) => string\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ~/index.d.ts or ~/custom.d.ts\n\nimport axios from 'axios'\n\ndeclare module 'vue' {\n  interface ComponentCustomProperties {\n    $http: typeof axios\n    $translate: (key: string) => string\n  }\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The topic's fully covered in the "},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/typescript/options-api.html#augmenting-global-properties","rel":["nofollow"]},"children":[{"type":"text","value":"official documentation"}]},{"type":"text","value":" and in "},{"type":"element","tag":"a","props":{"href":"Add%20global%20variable%20to%20window"},"children":[{"type":"text","value":"Add global variable to window"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, you want to add global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$http"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$translate"}]},{"type":"text","value":" services to all of project's components:"}]},{"type":"element","tag":"code","props":{"code":"// ~/index.d.ts or ~/custom.d.ts\n\nimport axios from 'axios'\n\ndeclare module 'vue' {\n  interface ComponentCustomProperties {\n    $http: typeof axios\n    $translate: (key: string) => string\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a87380"},"children":[{"type":"text","value":"// ~/index.d.ts or ~/custom.d.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a31288"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6f7f6f"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a31288"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-799a14"},"children":[{"type":"text","value":"'axios'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-28617e"},"children":[{"type":"text","value":"declare"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-28617e"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-799a14"},"children":[{"type":"text","value":"'vue'"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-28617e"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5b5906"},"children":[{"type":"text","value":"ComponentCustomProperties"}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d38853"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5554cf"},"children":[{"type":"text","value":"$translate"}]},{"type":"element","tag":"span","props":{"class":"ct-9fa66a"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-d38853"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-6cf213"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-9fa66a"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-d38853"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d1c97"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-d38853"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-bbc677"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d38853"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d1c97"},"children":[{"type":"text","value":"string"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c81c0"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-bbc677{color:#FF7B72}.ct-4d1c97{color:#79C0FF}.ct-6cf213{color:#FFA657}.ct-9fa66a{color:#FF7B72}.ct-5554cf{color:#D2A8FF}.ct-d38853{color:#C9D1D9}.ct-5b5906{color:#FFA657}.ct-28617e{color:#FF7B72}.ct-799a14{color:#A5D6FF}.ct-6f7f6f{color:#C9D1D9}.ct-6c81c0{color:#C9D1D9}.ct-a31288{color:#FF7B72}.ct-a87380{color:#8B949E}.light .ct-a87380{color:#93A1A1}.light .ct-a31288{color:#859900}.light .ct-6c81c0{color:#657B83}.light .ct-6f7f6f{color:#268BD2}.light .ct-799a14{color:#2AA198}.light .ct-28617e{color:#073642}.light .ct-5b5906{color:#268BD2}.light .ct-d38853{color:#657B83}.light .ct-5554cf{color:#268BD2}.light .ct-9fa66a{color:#859900}.light .ct-6cf213{color:#657B83}.light .ct-4d1c97{color:#859900}.light .ct-bbc677{color:#073642}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Frontend:Vue:Adding global properties to component.md","_source":"content","_file":"Frontend/Vue/Adding global properties to component.md","_extension":"md"},{"_path":"/frontend/vue/make-nuxt-handle-obsidian-highlights","_dir":"vue","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Make Nuxt Handle Obsidian Highlights","description":"By default Nuxt Content Plugin not handling <span class=\"highlight\">highlight</span> links. To fix that we will create Nitro plugin:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default "},{"type":"element","tag":"a","props":{"href":"https://content.nuxtjs.org","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Content Plugin"}]},{"type":"text","value":" not handling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<span class=\"highlight\">highlight</span>"}]},{"type":"text","value":" links. To fix that we will create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Nitro"}]},{"type":"text","value":" plugin:"}]},{"type":"element","tag":"code","props":{"code":"// ~/server/plugins/highlight.ts\nexport default defineNitroPlugin((nitroApp) => {\n  nitroApp.hooks.hook(\"content:file:beforeParse\", (file) => {\n    if (file._id.endsWith(\".md\")) {\n      file.body = file.body.replace(\n        /==([^=]+)==/gs,\n        `<span class=\"highlight\">$1</span>`\n      );\n    }\n  });\n});\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ~/server/plugins/highlight.ts\nexport default defineNitroPlugin((nitroApp) => {\n  nitroApp.hooks.hook(\"content:file:beforeParse\", (file) => {\n    if (file._id.endsWith(\".md\")) {\n      file.body = file.body.replace(\n        /==([^=]+)==/gs,\n        `<span class=\"highlight\">$1</span>`\n      );\n    }\n  });\n});\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default "},{"type":"element","tag":"a","props":{"href":"https://content.nuxtjs.org","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt Content Plugin"}]},{"type":"text","value":" not handling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<span class=\"highlight\">highlight</span>"}]},{"type":"text","value":" links. To fix that we will create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Nitro"}]},{"type":"text","value":" plugin:"}]},{"type":"element","tag":"code","props":{"code":"// ~/server/plugins/highlight.ts\nexport default defineNitroPlugin((nitroApp) => {\n  nitroApp.hooks.hook(\"content:file:beforeParse\", (file) => {\n    if (file._id.endsWith(\".md\")) {\n      file.body = file.body.replace(\n        /==([^=]+)==/gs,\n        `<span class=\"highlight\">$1</span>`\n      );\n    }\n  });\n});\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a1a95b"},"children":[{"type":"text","value":"// ~/server/plugins/highlight.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a9f2e1"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fad82b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f2e1"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fad82b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0cc966"},"children":[{"type":"text","value":"defineNitroPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-fad82b"},"children":[{"type":"text","value":"((nitroApp) "}]},{"type":"element","tag":"span","props":{"class":"ct-d3dc5e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-fad82b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-138d63"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"nitroApp"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"hooks"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ed025c"},"children":[{"type":"text","value":"hook"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7e5373"},"children":[{"type":"text","value":"\"content:file:beforeParse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-775f0d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"_id"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ed025c"},"children":[{"type":"text","value":"endsWith"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7e5373"},"children":[{"type":"text","value":"\".md\""}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":")) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-775f0d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-0db783"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-ed025c"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8a3cf7"},"children":[{"type":"text","value":"/==("}]},{"type":"element","tag":"span","props":{"class":"ct-4ed6eb"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-775f0d"},"children":[{"type":"text","value":"^"}]},{"type":"element","tag":"span","props":{"class":"ct-4ed6eb"},"children":[{"type":"text","value":"=]"}]},{"type":"element","tag":"span","props":{"class":"ct-775f0d"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-8a3cf7"},"children":[{"type":"text","value":")==/"}]},{"type":"element","tag":"span","props":{"class":"ct-775f0d"},"children":[{"type":"text","value":"gs"}]},{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7e5373"},"children":[{"type":"text","value":"`<span class=\"highlight\">$1</span>`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"      );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-beb352"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-138d63"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-fad82b"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-138d63"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4ed6eb{color:#79C0FF}.ct-8a3cf7{color:#A5D6FF}.ct-775f0d{color:#FF7B72}.ct-7e5373{color:#A5D6FF}.ct-ed025c{color:#D2A8FF}.ct-0db783{color:#C9D1D9}.ct-beb352{color:#C9D1D9}.ct-138d63{color:#C9D1D9}.ct-d3dc5e{color:#FF7B72}.ct-0cc966{color:#D2A8FF}.ct-fad82b{color:#FFA657}.ct-a9f2e1{color:#FF7B72}.ct-a1a95b{color:#8B949E}.light .ct-a1a95b{color:#93A1A1}.light .ct-a9f2e1{color:#859900}.light .ct-fad82b{color:#657B83}.light .ct-0cc966{color:#268BD2}.light .ct-d3dc5e{color:#073642}.light .ct-138d63{color:#657B83}.light .ct-beb352{color:#657B83}.light .ct-0db783{color:#268BD2}.light .ct-ed025c{color:#268BD2}.light .ct-7e5373{color:#2AA198}.light .ct-775f0d{color:#859900}.light .ct-8a3cf7{color:#D30102}.light .ct-4ed6eb{color:#CB4B16}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Frontend:Vue:Make Nuxt handle Obsidian highlights.md","_source":"content","_file":"Frontend/Vue/Make Nuxt handle Obsidian highlights.md","_extension":"md"},{"_path":"/git/force-git-to-use-https","_dir":"git","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Force Git To Use HTTPS","description":"Forces #git to use https even if remote url is #SSH. Useful for the networks with blocked #ssh protocol.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Forces #git to use https even if remote url is #SSH. Useful for the networks with blocked #ssh protocol."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Put this inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.gitconfig"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"[url \"https://github.com\"]\n    insteadOf = git://github.com\n","language":"c"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[url \"https://github.com\"]\n    insteadOf = git://github.com\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Forces #git to use https even if remote url is #SSH. Useful for the networks with blocked #ssh protocol."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Put this inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.gitconfig"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"[url \"https://github.com\"]\n    insteadOf = git://github.com\n","language":"c"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5c554"},"children":[{"type":"text","value":"[url "}]},{"type":"element","tag":"span","props":{"class":"ct-46a65a"},"children":[{"type":"text","value":"\"https://github.com\""}]},{"type":"element","tag":"span","props":{"class":"ct-e5c554"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e5c554"},"children":[{"type":"text","value":"    insteadOf "}]},{"type":"element","tag":"span","props":{"class":"ct-31e9fb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e5c554"},"children":[{"type":"text","value":" git:"}]},{"type":"element","tag":"span","props":{"class":"ct-a6965f"},"children":[{"type":"text","value":"//github.com"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a6965f{color:#8B949E}.ct-31e9fb{color:#FF7B72}.ct-46a65a{color:#A5D6FF}.ct-e5c554{color:#C9D1D9}.light .ct-e5c554{color:#657B83}.light .ct-46a65a{color:#2AA198}.light .ct-31e9fb{color:#859900}.light .ct-a6965f{color:#93A1A1}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Git:Force git to use HTTPS.md","_source":"content","_file":"Git/Force git to use HTTPS.md","_extension":"md"},{"_path":"/git/git-aliases-and-useful-commands","_dir":"git","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Git Aliases And Useful Commands","description":"Shorthands for #git commands can be specified. Should be placed at ~/.gitconfig.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Shorthands for #git commands can be specified. Should be placed at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.gitconfig"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"[alias]\n    flush = git clean-branches branch | grep -v master | xargs git branch -D\n    lol = log --oneline --graph\n    l = lol\n    c = commit -am\n    cv = commit --no-verify -am\n    p = push\n    pf = p --force-with-lease\n    ignore-now = update-index --skip-worktree\n","language":"c"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[alias]\n    flush = git clean-branches branch | grep -v master | xargs git branch -D\n    lol = log --oneline --graph\n    l = lol\n    c = commit -am\n    cv = commit --no-verify -am\n    p = push\n    pf = p --force-with-lease\n    ignore-now = update-index --skip-worktree\n"}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"command"}]}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"description"}]}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git flush"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"drops all branches, except master"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git lol"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"shows log"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git c"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"commits with message"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git cv"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"commits without hooks"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git p"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"pushes"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git pf"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"push with --force and additional check"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git ignore-now"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"starts ignoring file from now on"}]}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Shorthands for #git commands can be specified. Should be placed at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.gitconfig"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"[alias]\n    flush = git clean-branches branch | grep -v master | xargs git branch -D\n    lol = log --oneline --graph\n    l = lol\n    c = commit -am\n    cv = commit --no-verify -am\n    p = push\n    pf = p --force-with-lease\n    ignore-now = update-index --skip-worktree\n","language":"c"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"[alias]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    flush "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" git clean"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"branches branch "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" grep "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"v master "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" xargs git branch "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"D"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    lol "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" log "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"oneline "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"graph"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    l "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" lol"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    c "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" commit "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"am"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    cv "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" commit "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"no"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"verify "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"am"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    p "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" push"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    pf "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" p "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"force"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"lease"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"    ignore"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"now "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":" update"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"index "}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"--"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"skip"}]},{"type":"element","tag":"span","props":{"class":"ct-a4a7d0"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-7e024c"},"children":[{"type":"text","value":"worktree"}]}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"command"}]}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"description"}]}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git flush"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"drops all branches, except master"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git lol"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"shows log"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git c"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"commits with message"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git cv"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"commits without hooks"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git p"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"pushes"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git pf"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"push with --force and additional check"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"git ignore-now"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"starts ignoring file from now on"}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a4a7d0{color:#FF7B72}.ct-7e024c{color:#C9D1D9}.light .ct-7e024c{color:#657B83}.light .ct-a4a7d0{color:#859900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Git:Git aliases and useful commands.md","_source":"content","_file":"Git/Git aliases and useful commands.md","_extension":"md"},{"_path":"/graphql/apollo-client-pagination","_dir":"graphql","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Apollo Client Pagination","description":"Say, we have gql response like this and we wan't to have pagination with it. Let's merge it as it specified in official documentation","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say, we have "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gql"}]},{"type":"text","value":" response like this and we wan't to have pagination with it. Let's merge it as it specified in "},{"type":"element","tag":"a","props":{"href":"https://www.apollographql.com/docs/react/caching/cache-field-behavior/#the-merge-function","rel":["nofollow"]},"children":[{"type":"text","value":"official documentation"}]}]},{"type":"element","tag":"code","props":{"code":"query listItems(\n  filter: Filter, \n  sort: String,\n  limit: Number,\n  offset: Number,\n): ItemList!\n\ninput Filter {\n  name: String!\n  type: String!\n}\n\ntype ItemList {\n  items: [Item!]!\n  totalCount: Int!\n}\n","language":"graphql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"query listItems(\n  filter: Filter, \n  sort: String,\n  limit: Number,\n  offset: Number,\n): ItemList!\n\ninput Filter {\n  name: String!\n  type: String!\n}\n\ntype ItemList {\n  items: [Item!]!\n  totalCount: Int!\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will setup "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ApolloClient"}]},{"type":"text","value":" with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typePolicies"}]},{"type":"text","value":" to merge incoming data in cache:"}]},{"type":"element","tag":"code","props":{"code":"import { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst client = new ApolloClient({\n  // ...\n  cache: new InMemoryCache({ typePolicies }),\n  // ...\n});\n\nexport const typePolicies: TypePolicies = {\n  Query: {\n    fields: {\n      // query name\n      listItems: {\n        // apollo will serialize and use keyArgs as unique\n        // identifier in cache for every query\n        // consider choosing the right fields, \n        // i.e. limit and offset won't work here\n        keyArgs: [\n          'sort', // primitive type\n          'filter', ['name', 'type'] // nested fields of `filter`\n        ],\n        merge: mergeItemsWithTotalCount,\n      },\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst client = new ApolloClient({\n  // ...\n  cache: new InMemoryCache({ typePolicies }),\n  // ...\n});\n\nexport const typePolicies: TypePolicies = {\n  Query: {\n    fields: {\n      // query name\n      listItems: {\n        // apollo will serialize and use keyArgs as unique\n        // identifier in cache for every query\n        // consider choosing the right fields, \n        // i.e. limit and offset won't work here\n        keyArgs: [\n          'sort', // primitive type\n          'filter', ['name', 'type'] // nested fields of `filter`\n        ],\n        merge: mergeItemsWithTotalCount,\n      },\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will need merge function "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mergeItemsWithTotalCount"}]},{"type":"text","value":", which will join results of query and cached data for specific key:"}]},{"type":"element","tag":"code","props":{"code":"/** merges all sources with { items: unknown[], totalCount: number } */\nconst mergeItemsWithTotalCount = (existing, incoming, { args }) => {\n    // no existing data\n    if (!existing || !args?.offset || args.offset < existing.length) {\n      return incoming || [];\n    }\n\n    // If hook was called multiple times\n    if (existing?.items?.length && args?.offset < existing.items.length) {\n      return existing || [];\n    }\n\n    // merge cache and incoming data\n    const items = [...(existing?.items || []), ...(incoming?.items || [])];\n\n    // apply latest result for totalCount\n    const totalCount = incoming?.totalCount || existing?.totalCount;\n\n    return {\n      ...(incoming || existing || {}),\n      items,\n      totalCount,\n    };\n  };\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/** merges all sources with { items: unknown[], totalCount: number } */\nconst mergeItemsWithTotalCount = (existing, incoming, { args }) => {\n    // no existing data\n    if (!existing || !args?.offset || args.offset < existing.length) {\n      return incoming || [];\n    }\n\n    // If hook was called multiple times\n    if (existing?.items?.length && args?.offset < existing.items.length) {\n      return existing || [];\n    }\n\n    // merge cache and incoming data\n    const items = [...(existing?.items || []), ...(incoming?.items || [])];\n\n    // apply latest result for totalCount\n    const totalCount = incoming?.totalCount || existing?.totalCount;\n\n    return {\n      ...(incoming || existing || {}),\n      items,\n      totalCount,\n    };\n  };\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say, we have "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gql"}]},{"type":"text","value":" response like this and we wan't to have pagination with it. Let's merge it as it specified in "},{"type":"element","tag":"a","props":{"href":"https://www.apollographql.com/docs/react/caching/cache-field-behavior/#the-merge-function","rel":["nofollow"]},"children":[{"type":"text","value":"official documentation"}]}]},{"type":"element","tag":"code","props":{"code":"query listItems(\n  filter: Filter, \n  sort: String,\n  limit: Number,\n  offset: Number,\n): ItemList!\n\ninput Filter {\n  name: String!\n  type: String!\n}\n\ntype ItemList {\n  items: [Item!]!\n  totalCount: Int!\n}\n","language":"graphql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d870e"},"children":[{"type":"text","value":"listItems"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"Filter"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":", "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"Number"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"offset"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"Number"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-8d870e"},"children":[{"type":"text","value":"ItemList"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-018179"},"children":[{"type":"text","value":"Filter"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-018179"},"children":[{"type":"text","value":"ItemList"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"items"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"Item"}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"totalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-33bffe"},"children":[{"type":"text","value":"Int"}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will setup "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ApolloClient"}]},{"type":"text","value":" with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typePolicies"}]},{"type":"text","value":" to merge incoming data in cache:"}]},{"type":"element","tag":"code","props":{"code":"import { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst client = new ApolloClient({\n  // ...\n  cache: new InMemoryCache({ typePolicies }),\n  // ...\n});\n\nexport const typePolicies: TypePolicies = {\n  Query: {\n    fields: {\n      // query name\n      listItems: {\n        // apollo will serialize and use keyArgs as unique\n        // identifier in cache for every query\n        // consider choosing the right fields, \n        // i.e. limit and offset won't work here\n        keyArgs: [\n          'sort', // primitive type\n          'filter', ['name', 'type'] // nested fields of `filter`\n        ],\n        merge: mergeItemsWithTotalCount,\n      },\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"ApolloClient"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"InMemoryCache"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b59963"},"children":[{"type":"text","value":"'@apollo/client'"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a175c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-954acd"},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d870e"},"children":[{"type":"text","value":"ApolloClient"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  cache: "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8d870e"},"children":[{"type":"text","value":"InMemoryCache"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"typePolicies"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a175c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-954acd"},"children":[{"type":"text","value":"typePolicies"}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ad2c94"},"children":[{"type":"text","value":"TypePolicies"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  Query: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    fields: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// query name"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      listItems: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// apollo will serialize and use keyArgs as unique"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// identifier in cache for every query"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// consider choosing the right fields, "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// i.e. limit and offset won't work here"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        keyArgs: ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b59963"},"children":[{"type":"text","value":"'sort'"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// primitive type"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b59963"},"children":[{"type":"text","value":"'filter'"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"class":"ct-b59963"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b59963"},"children":[{"type":"text","value":"'type'"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// nested fields of `filter`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"        merge: "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"mergeItemsWithTotalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will need merge function "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"mergeItemsWithTotalCount"}]},{"type":"text","value":", which will join results of query and cached data for specific key:"}]},{"type":"element","tag":"code","props":{"code":"/** merges all sources with { items: unknown[], totalCount: number } */\nconst mergeItemsWithTotalCount = (existing, incoming, { args }) => {\n    // no existing data\n    if (!existing || !args?.offset || args.offset < existing.length) {\n      return incoming || [];\n    }\n\n    // If hook was called multiple times\n    if (existing?.items?.length && args?.offset < existing.items.length) {\n      return existing || [];\n    }\n\n    // merge cache and incoming data\n    const items = [...(existing?.items || []), ...(incoming?.items || [])];\n\n    // apply latest result for totalCount\n    const totalCount = incoming?.totalCount || existing?.totalCount;\n\n    return {\n      ...(incoming || existing || {}),\n      items,\n      totalCount,\n    };\n  };\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"/** merges all sources with { items: unknown[], totalCount: number } */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b92016"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1be91"},"children":[{"type":"text","value":"mergeItemsWithTotalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c7f0c1"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"incoming"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-bae861"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":" }) "}]},{"type":"element","tag":"span","props":{"class":"ct-b92016"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-fcadd7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// no existing data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"offset"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"offset"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"incoming"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" [];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// If hook was called multiple times"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"items"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" [];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// merge cache and incoming data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a175c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-954acd"},"children":[{"type":"text","value":"items"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"items"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7df752"},"children":[{"type":"text","value":"// apply latest result for totalCount"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a175c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-954acd"},"children":[{"type":"text","value":"totalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"incoming"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"totalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"existing"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"totalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"incoming"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5a3d3f"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"items"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a74402"},"children":[{"type":"text","value":"totalCount"}]},{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-94fd26"},"children":[{"type":"text","value":"  };"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b1be91{color:#D2A8FF}.ct-b92016{color:#FF7B72}.ct-ad2c94{color:#FFA657}.ct-7df752{color:#8B949E}.ct-954acd{color:#79C0FF}.ct-a175c7{color:#FF7B72}.ct-b59963{color:#A5D6FF}.ct-a74402{color:#C9D1D9}.ct-c7f0c1{color:#FF7B72}.ct-018179{color:#79C0FF}.ct-33bffe{color:#79C0FF}.ct-bae861{color:#FFA657}.ct-fcadd7{color:#C9D1D9}.ct-8d870e{color:#D2A8FF}.ct-94fd26{color:#C9D1D9}.ct-5a3d3f{color:#FF7B72}.light .ct-5a3d3f{color:#859900}.light .ct-94fd26{color:#657B83}.light .ct-8d870e{color:#268BD2}.light .ct-fcadd7{color:#657B83}.light .ct-bae861{color:#657B83}.light .ct-33bffe{color:#859900}.light .ct-018179{color:#859900}.light .ct-c7f0c1{color:#859900}.light .ct-a74402{color:#268BD2}.light .ct-b59963{color:#2AA198}.light .ct-a175c7{color:#073642}.light .ct-954acd{color:#268BD2}.light .ct-7df752{color:#93A1A1}.light .ct-ad2c94{color:#268BD2}.light .ct-b92016{color:#073642}.light .ct-b1be91{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:GraphQL:Apollo Client pagination.md","_source":"content","_file":"GraphQL/Apollo Client pagination.md","_extension":"md"},{"_path":"/graphql/refresh-token-in-apollo-client","_dir":"graphql","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Refresh Token In Apollo Client","description":"If your GraphQL api needs token refresh option, you can pass custom fetch function for Apollo Client.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If your GraphQL api needs token refresh option, you can pass custom fetch function for Apollo Client."}]},{"type":"element","tag":"code","props":{"code":"export const createApolloClient = (\n  url: string,\n  logout: () => void,\n  getAuthorizationData: () => { authorization: string },\n  refreshToken: () => Promise<\n    { accessToken: string; refreshToken: string } | undefined\n  >,\n) =>\n  new ApolloClientBase({\n    // ...other options\n    link: ApolloLink.from([\n      // ...other options\n      setContext(async (_, { headers }) => {\n        return {\n          headers: {\n            ...headers,\n            ...getAuthorizationData(),\n          },\n        };\n      }),\n      new HttpLink({\n        uri: url,\n        fetch: fetchWithTokenRefresh(logout, refreshToken),\n      }),\n    ]),\n  });\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export const createApolloClient = (\n  url: string,\n  logout: () => void,\n  getAuthorizationData: () => { authorization: string },\n  refreshToken: () => Promise<\n    { accessToken: string; refreshToken: string } | undefined\n  >,\n) =>\n  new ApolloClientBase({\n    // ...other options\n    link: ApolloLink.from([\n      // ...other options\n      setContext(async (_, { headers }) => {\n        return {\n          headers: {\n            ...headers,\n            ...getAuthorizationData(),\n          },\n        };\n      }),\n      new HttpLink({\n        uri: url,\n        fetch: fetchWithTokenRefresh(logout, refreshToken),\n      }),\n    ]),\n  });\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Custom fetch function for this request. You should tune "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hasUnauthorizedError"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"isRefreshRequestOptions"}]},{"type":"text","value":" to match your api."}]},{"type":"element","tag":"code","props":{"code":"/** Global singleton for refreshing promise */\nlet refreshingPromise: Promise<string> | null = null;\n\n/** Checks if GraphQl errors has unauthenticated error */\nconst hasUnauthorizedError = (errors: Array<{ code?: ErrorCode }>): boolean =>\n  Array.isArray(errors) &&\n  errors.some(error => {\n    return error.status === 401; // Distinguish unauthorized error here\n  });\n\n/** Detects if customFetch is sending refresh request */\nconst isRefreshRequestOptions = (options: RequestInit) => {\n  try {\n    const body = JSON.parse(options?.body as string);\n    return body.operationName === 'RefreshToken';\n  } catch (e) {\n    return false;\n  }\n};\n\n/** fetchWithTokenRefresh is a custom fetch function with token refresh for apollo */\nexport const fetchWithTokenRefresh =\n  (\n    logout: () => void,\n    refreshToken: () => Promise<\n      { accessToken: string; refreshToken: string } | undefined\n    >,\n  ) =>\n  async (uri: string, options: RequestInit): Promise<Response> => {\n    // already refreshing token, wait for it and then use refreshed token\n    // or use empty authorization if refreshing failed\n    if (\n      !isRefreshRequestOptions(options) &&\n      refreshingPromise &&\n      (options.headers as Record<string, string>)?.authorization\n    ) {\n      const newAccessToken = await refreshingPromise\n        .catch(() => {\n          // refreshing token from other request failed, retry without authorization\n          return '';\n        });\n      \n      options.headers = {\n        ...(options.headers || {}),\n        authorization: newAccessToken,\n      };\n    }\n\n    return fetch(uri, options).then(async response => {\n      const text = await response.text();\n      const json = JSON.parse(text);\n\n      // check for unauthorized errors, if not present, just return result\n      if (\n        isRefreshRequestOptions(options) ||\n        !json?.errors ||\n        !Array.isArray(json.errors) ||\n        !hasUnauthorizedError(json.errors)\n      ) {\n        return {\n          ...response,\n          ok: true,\n          json: async () =>\n            new Promise<unknown>(resolve => {\n              resolve(json);\n            }),\n          text: async () =>\n            new Promise<string>(resolve => {\n              resolve(text);\n            }),\n        };\n      }\n\n      // If unauthorized, refresh token and try again\n      if (!refreshingPromise) {\n        refreshingPromise = refreshToken()\n          .then(async (tokens): Promise<string> => {\n            refreshingPromise = null;\n\n            if (!tokens?.accessToken) {\n              throw new Error('Session expired');\n            }\n\n            return tokens?.accessToken;\n          })\n          .catch(() => {\n            refreshingPromise = null;\n\n            // can't refresh token. logging out\n            logout();\n            throw new Error('Session expired');\n          });\n      }\n\n      // success or any non-auth error\n      return refreshingPromise\n        .then(async (newAccessToken: string) => {\n          // wait for other request's refreshing query to finish, when retry\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: newAccessToken,\n            },\n          });\n        })\n        .catch(async () => {\n          // refreshing token from other request failed, retry without authorization\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: '',\n            },\n          });\n        });\n    });\n  };\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/** Global singleton for refreshing promise */\nlet refreshingPromise: Promise<string> | null = null;\n\n/** Checks if GraphQl errors has unauthenticated error */\nconst hasUnauthorizedError = (errors: Array<{ code?: ErrorCode }>): boolean =>\n  Array.isArray(errors) &&\n  errors.some(error => {\n    return error.status === 401; // Distinguish unauthorized error here\n  });\n\n/** Detects if customFetch is sending refresh request */\nconst isRefreshRequestOptions = (options: RequestInit) => {\n  try {\n    const body = JSON.parse(options?.body as string);\n    return body.operationName === 'RefreshToken';\n  } catch (e) {\n    return false;\n  }\n};\n\n/** fetchWithTokenRefresh is a custom fetch function with token refresh for apollo */\nexport const fetchWithTokenRefresh =\n  (\n    logout: () => void,\n    refreshToken: () => Promise<\n      { accessToken: string; refreshToken: string } | undefined\n    >,\n  ) =>\n  async (uri: string, options: RequestInit): Promise<Response> => {\n    // already refreshing token, wait for it and then use refreshed token\n    // or use empty authorization if refreshing failed\n    if (\n      !isRefreshRequestOptions(options) &&\n      refreshingPromise &&\n      (options.headers as Record<string, string>)?.authorization\n    ) {\n      const newAccessToken = await refreshingPromise\n        .catch(() => {\n          // refreshing token from other request failed, retry without authorization\n          return '';\n        });\n      \n      options.headers = {\n        ...(options.headers || {}),\n        authorization: newAccessToken,\n      };\n    }\n\n    return fetch(uri, options).then(async response => {\n      const text = await response.text();\n      const json = JSON.parse(text);\n\n      // check for unauthorized errors, if not present, just return result\n      if (\n        isRefreshRequestOptions(options) ||\n        !json?.errors ||\n        !Array.isArray(json.errors) ||\n        !hasUnauthorizedError(json.errors)\n      ) {\n        return {\n          ...response,\n          ok: true,\n          json: async () =>\n            new Promise<unknown>(resolve => {\n              resolve(json);\n            }),\n          text: async () =>\n            new Promise<string>(resolve => {\n              resolve(text);\n            }),\n        };\n      }\n\n      // If unauthorized, refresh token and try again\n      if (!refreshingPromise) {\n        refreshingPromise = refreshToken()\n          .then(async (tokens): Promise<string> => {\n            refreshingPromise = null;\n\n            if (!tokens?.accessToken) {\n              throw new Error('Session expired');\n            }\n\n            return tokens?.accessToken;\n          })\n          .catch(() => {\n            refreshingPromise = null;\n\n            // can't refresh token. logging out\n            logout();\n            throw new Error('Session expired');\n          });\n      }\n\n      // success or any non-auth error\n      return refreshingPromise\n        .then(async (newAccessToken: string) => {\n          // wait for other request's refreshing query to finish, when retry\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: newAccessToken,\n            },\n          });\n        })\n        .catch(async () => {\n          // refreshing token from other request failed, retry without authorization\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: '',\n            },\n          });\n        });\n    });\n  };\n\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If your GraphQL api needs token refresh option, you can pass custom fetch function for Apollo Client."}]},{"type":"element","tag":"code","props":{"code":"export const createApolloClient = (\n  url: string,\n  logout: () => void,\n  getAuthorizationData: () => { authorization: string },\n  refreshToken: () => Promise<\n    { accessToken: string; refreshToken: string } | undefined\n  >,\n) =>\n  new ApolloClientBase({\n    // ...other options\n    link: ApolloLink.from([\n      // ...other options\n      setContext(async (_, { headers }) => {\n        return {\n          headers: {\n            ...headers,\n            ...getAuthorizationData(),\n          },\n        };\n      }),\n      new HttpLink({\n        uri: url,\n        fetch: fetchWithTokenRefresh(logout, refreshToken),\n      }),\n    ]),\n  });\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"createApolloClient"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"getAuthorizationData"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"authorization"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c637e0"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"<"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"accessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"undefined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  >,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"ApolloClientBase"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// ...other options"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    link: "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"ApolloLink"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"(["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// ...other options"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"setContext"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"_"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" }) "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"getAuthorizationData"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"HttpLink"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        uri: "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        fetch: "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"fetchWithTokenRefresh"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    ]),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  });"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Custom fetch function for this request. You should tune "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"hasUnauthorizedError"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"isRefreshRequestOptions"}]},{"type":"text","value":" to match your api."}]},{"type":"element","tag":"code","props":{"code":"/** Global singleton for refreshing promise */\nlet refreshingPromise: Promise<string> | null = null;\n\n/** Checks if GraphQl errors has unauthenticated error */\nconst hasUnauthorizedError = (errors: Array<{ code?: ErrorCode }>): boolean =>\n  Array.isArray(errors) &&\n  errors.some(error => {\n    return error.status === 401; // Distinguish unauthorized error here\n  });\n\n/** Detects if customFetch is sending refresh request */\nconst isRefreshRequestOptions = (options: RequestInit) => {\n  try {\n    const body = JSON.parse(options?.body as string);\n    return body.operationName === 'RefreshToken';\n  } catch (e) {\n    return false;\n  }\n};\n\n/** fetchWithTokenRefresh is a custom fetch function with token refresh for apollo */\nexport const fetchWithTokenRefresh =\n  (\n    logout: () => void,\n    refreshToken: () => Promise<\n      { accessToken: string; refreshToken: string } | undefined\n    >,\n  ) =>\n  async (uri: string, options: RequestInit): Promise<Response> => {\n    // already refreshing token, wait for it and then use refreshed token\n    // or use empty authorization if refreshing failed\n    if (\n      !isRefreshRequestOptions(options) &&\n      refreshingPromise &&\n      (options.headers as Record<string, string>)?.authorization\n    ) {\n      const newAccessToken = await refreshingPromise\n        .catch(() => {\n          // refreshing token from other request failed, retry without authorization\n          return '';\n        });\n      \n      options.headers = {\n        ...(options.headers || {}),\n        authorization: newAccessToken,\n      };\n    }\n\n    return fetch(uri, options).then(async response => {\n      const text = await response.text();\n      const json = JSON.parse(text);\n\n      // check for unauthorized errors, if not present, just return result\n      if (\n        isRefreshRequestOptions(options) ||\n        !json?.errors ||\n        !Array.isArray(json.errors) ||\n        !hasUnauthorizedError(json.errors)\n      ) {\n        return {\n          ...response,\n          ok: true,\n          json: async () =>\n            new Promise<unknown>(resolve => {\n              resolve(json);\n            }),\n          text: async () =>\n            new Promise<string>(resolve => {\n              resolve(text);\n            }),\n        };\n      }\n\n      // If unauthorized, refresh token and try again\n      if (!refreshingPromise) {\n        refreshingPromise = refreshToken()\n          .then(async (tokens): Promise<string> => {\n            refreshingPromise = null;\n\n            if (!tokens?.accessToken) {\n              throw new Error('Session expired');\n            }\n\n            return tokens?.accessToken;\n          })\n          .catch(() => {\n            refreshingPromise = null;\n\n            // can't refresh token. logging out\n            logout();\n            throw new Error('Session expired');\n          });\n      }\n\n      // success or any non-auth error\n      return refreshingPromise\n        .then(async (newAccessToken: string) => {\n          // wait for other request's refreshing query to finish, when retry\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: newAccessToken,\n            },\n          });\n        })\n        .catch(async () => {\n          // refreshing token from other request failed, retry without authorization\n\n          return fetch(uri, {\n            ...options,\n            headers: {\n              ...(options.headers || {}),\n              authorization: '',\n            },\n          });\n        });\n    });\n  };\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"/** Global singleton for refreshing promise */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c637e0"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"/** Checks if GraphQl errors has unauthenticated error */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"hasUnauthorizedError"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"errors"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"<{ "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"ErrorCode"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" }>)"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"isArray"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"errors"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"&&"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"errors"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"some"}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f25ce"},"children":[{"type":"text","value":"401"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// Distinguish unauthorized error here"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"/** Detects if customFetch is sending refresh request */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"isRefreshRequestOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"RequestInit"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cfdef2"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"operationName"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c0807"},"children":[{"type":"text","value":"'RefreshToken'"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"};"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"/** fetchWithTokenRefresh is a custom fetch function with token refresh for apollo */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cfdef2"},"children":[{"type":"text","value":"fetchWithTokenRefresh"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      { accessToken: "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"undefined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  ) "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"uri"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"RequestInit"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"Response"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// already refreshing token, wait for it and then use refreshed token"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// or use empty authorization if refreshing failed"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"isRefreshRequestOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"&&"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"&&"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c637e0"},"children":[{"type":"text","value":"Record"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":">)?."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    ) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cfdef2"},"children":[{"type":"text","value":"newAccessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// refreshing token from other request failed, retry without authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7c0807"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {}),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        authorization: "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"newAccessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"uri"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"async"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cfdef2"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cfdef2"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// check for unauthorized errors, if not present, just return result"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"isRefreshRequestOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"||"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"errors"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"||"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"hasUnauthorizedError"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"errors"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      ) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          ok: "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"unknown"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// If unauthorized, refresh token and try again"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"refreshToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8a13f4"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"accessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7c0807"},"children":[{"type":"text","value":"'Session expired'"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"tokens"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"accessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d90684"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// can't refresh token. logging out"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f1feb2"},"children":[{"type":"text","value":"Error"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7c0807"},"children":[{"type":"text","value":"'Session expired'"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// success or any non-auth error"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"refreshingPromise"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-bf6120"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d0ee05"},"children":[{"type":"text","value":"newAccessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-98eda6"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-09febc"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-759328"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-13b0a1"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// wait for other request's refreshing query to finish, when retry"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"uri"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {}),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              authorization: "}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"newAccessToken"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ff2de1"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-90f45e"},"children":[{"type":"text","value":"// refreshing token from other request failed, retry without authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6d0f84"},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"uri"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-439eda"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ecaeb2"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":" {}),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"              authorization: "}]},{"type":"element","tag":"span","props":{"class":"ct-7c0807"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"            },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"          });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"        });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e29683"},"children":[{"type":"text","value":"  };"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-7c0807{color:#A5D6FF}.ct-cfdef2{color:#79C0FF}.ct-3f25ce{color:#79C0FF}.ct-8a13f4{color:#FFA657}.ct-d90684{color:#79C0FF}.ct-439eda{color:#C9D1D9}.ct-90f45e{color:#8B949E}.ct-c637e0{color:#FFA657}.ct-759328{color:#FF7B72}.ct-bf6120{color:#D2A8FF}.ct-f1feb2{color:#79C0FF}.ct-09febc{color:#79C0FF}.ct-98eda6{color:#FF7B72}.ct-d0ee05{color:#FFA657}.ct-13b0a1{color:#C9D1D9}.ct-6d0f84{color:#D2A8FF}.ct-ff2de1{color:#FF7B72}.ct-e29683{color:#C9D1D9}.ct-ecaeb2{color:#FF7B72}.light .ct-ecaeb2{color:#859900}.light .ct-e29683{color:#657B83}.light .ct-ff2de1{color:#073642}.light .ct-6d0f84{color:#268BD2}.light .ct-13b0a1{color:#657B83}.light .ct-d0ee05{color:#657B83}.light .ct-98eda6{color:#859900}.light .ct-09febc{color:#859900}.light .ct-f1feb2{color:#859900}.light .ct-bf6120{color:#268BD2}.light .ct-759328{color:#073642}.light .ct-c637e0{color:#268BD2}.light .ct-90f45e{color:#93A1A1}.light .ct-439eda{color:#268BD2}.light .ct-d90684{color:#B58900}.light .ct-8a13f4{color:#268BD2}.light .ct-3f25ce{color:#D33682}.light .ct-cfdef2{color:#268BD2}.light .ct-7c0807{color:#2AA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:GraphQL:Refresh token in Apollo client.md","_source":"content","_file":"GraphQL/Refresh token in Apollo client.md","_extension":"md"},{"_path":"/linux/gitea-for-git-hosting","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Gitea For Git Hosting","description":"Self-hosted #git repositories with gitea and #docker.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Self-hosted #git repositories with "},{"type":"element","tag":"a","props":{"href":"https://gitea.io/ru-ru/","rel":["nofollow"]},"children":[{"type":"text","value":"gitea"}]},{"type":"text","value":" and #docker."}]},{"type":"element","tag":"h2","props":{"id":"setting-up-with-docker-compose"},"children":[{"type":"text","value":"Setting up with docker-compose"}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nnetworks:\n  gitea:\n    external: false\nservices:\n  server:\n    image: gitea/gitea:latest\n    container_name: gitea\n    environment:\n      - USER_UID=1000\n      - USER_GID=1000\n    restart: always\n    networks:\n      - gitea\n    volumes:\n      - ./var/lib/gitea:/data\n      - ./etc/gitea:/etc/gitea\n      - /etc/timezone:/etc/timezone:ro\n      - /etc/localtime:/etc/localtime:ro\n    ports:\n      - \"3000:3000\"\n      - \"222:22\"\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: \"3\"\n\nnetworks:\n  gitea:\n    external: false\nservices:\n  server:\n    image: gitea/gitea:latest\n    container_name: gitea\n    environment:\n      - USER_UID=1000\n      - USER_GID=1000\n    restart: always\n    networks:\n      - gitea\n    volumes:\n      - ./var/lib/gitea:/data\n      - ./etc/gitea:/etc/gitea\n      - /etc/timezone:/etc/timezone:ro\n      - /etc/localtime:/etc/localtime:ro\n    ports:\n      - \"3000:3000\"\n      - \"222:22\"\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Self-hosted #git repositories with "},{"type":"element","tag":"a","props":{"href":"https://gitea.io/ru-ru/","rel":["nofollow"]},"children":[{"type":"text","value":"gitea"}]},{"type":"text","value":" and #docker."}]},{"type":"element","tag":"h2","props":{"id":"setting-up-with-docker-compose"},"children":[{"type":"text","value":"Setting up with docker-compose"}]},{"type":"element","tag":"code","props":{"code":"version: \"3\"\n\nnetworks:\n  gitea:\n    external: false\nservices:\n  server:\n    image: gitea/gitea:latest\n    container_name: gitea\n    environment:\n      - USER_UID=1000\n      - USER_GID=1000\n    restart: always\n    networks:\n      - gitea\n    volumes:\n      - ./var/lib/gitea:/data\n      - ./etc/gitea:/etc/gitea\n      - /etc/timezone:/etc/timezone:ro\n      - /etc/localtime:/etc/localtime:ro\n    ports:\n      - \"3000:3000\"\n      - \"222:22\"\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"\"3\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"networks"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"gitea"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"external"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d190bb"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"gitea/gitea:latest"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"gitea"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"USER_UID=1000"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"USER_GID=1000"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"networks"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"gitea"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"./var/lib/gitea:/data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"./etc/gitea:/etc/gitea"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"/etc/timezone:/etc/timezone:ro"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"/etc/localtime:/etc/localtime:ro"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-10c4c1"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"\"3000:3000\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca2716"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-c55a88"},"children":[{"type":"text","value":"\"222:22\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d190bb{color:#79C0FF}.ct-c55a88{color:#A5D6FF}.ct-ca2716{color:#C9D1D9}.ct-10c4c1{color:#7EE787}.light .ct-10c4c1{color:#268BD2}.light .ct-ca2716{color:#657B83}.light .ct-c55a88{color:#2AA198}.light .ct-d190bb{color:#B58900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setting-up-with-docker-compose","depth":2,"text":"Setting up with docker-compose"}]}},"_type":"markdown","_id":"content:Linux:Gitea for git hosting.md","_source":"content","_file":"Linux/Gitea for git hosting.md","_extension":"md"},{"_path":"/linux/google-photos-alternative-with-photoprism","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Google Photos Alternative With Photoprism","description":"Photo Prism is a free alternative to Google photos, can be set up with #docker.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://photoprism.app/","rel":["nofollow"]},"children":[{"type":"text","value":"Photo Prism"}]},{"type":"text","value":" is a free alternative to Google photos, can be set up with #docker."}]},{"type":"element","tag":"h2","props":{"id":"docker-compose-file-to-run-it"},"children":[{"type":"text","value":"Docker compose file to run it"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out current "},{"type":"element","tag":"a","props":{"href":"https://dl.photoprism.app/docker/docker-compose.yml","rel":["nofollow"]},"children":[{"type":"text","value":"example"}]},{"type":"text","value":" at photoprism's "},{"type":"element","tag":"a","props":{"href":"https://docs.photoprism.app/getting-started/docker-compose/","rel":["nofollow"]},"children":[{"type":"text","value":"documentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"version: '3.5'\n\nservices:\n  photoprism:\n    container_name: photoprism__app\n    image: photoprism/photoprism:latest\n    depends_on:\n      - mariadb\n    restart: unless-stopped\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    ports:\n      - 2342:2342 # HTTP port (host:container)\n    environment:\n      PHOTOPRISM_ADMIN_PASSWORD: \"password\"\n      PHOTOPRISM_SITE_URL: \"https://service.url/\"\n      PHOTOPRISM_ORIGINALS_LIMIT: 5000\n      PHOTOPRISM_HTTP_COMPRESSION: \"gzip\"\n      PHOTOPRISM_DEBUG: \"false\"          \n      PHOTOPRISM_PUBLIC: \"false\"      \n      PHOTOPRISM_READONLY: \"false\"    \n      PHOTOPRISM_EXPERIMENTAL: \"false\"\n      PHOTOPRISM_DISABLE_CHOWN: \"false\"\n      PHOTOPRISM_DISABLE_WEBDAV: \"false\" \n      PHOTOPRISM_DISABLE_SETTINGS: \"false\"\n      PHOTOPRISM_DISABLE_TENSORFLOW: \"false\"\n      PHOTOPRISM_DISABLE_FACES: \"false\"     \n      PHOTOPRISM_DISABLE_CLASSIFICATION: \"false\"\n      PHOTOPRISM_DARKTABLE_PRESETS: \"false\"     \n      PHOTOPRISM_DETECT_NSFW: \"false\"           \n      PHOTOPRISM_UPLOAD_NSFW: \"true\"            \n      PHOTOPRISM_DATABASE_DRIVER: \"mysql\"       \n      PHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\n      PHOTOPRISM_DATABASE_NAME: \"photoprism\"    \n      PHOTOPRISM_DATABASE_USER: \"root\"         \n      PHOTOPRISM_DATABASE_PASSWORD: \"insecure\" \n      PHOTOPRISM_SITE_TITLE: \"PhotoPrism\"\n      PHOTOPRISM_SITE_CAPTION: \"Browse Your Life\"\n      PHOTOPRISM_SITE_DESCRIPTION: \"\"\n      PHOTOPRISM_SITE_AUTHOR: \"\"\n      HOME: \"/photoprism\"\n    working_dir: \"/photoprism\"\n    volumes:\n      - \"./data/originals:/photoprism/originals\"    \n      - \"./data/imports:/photoprism/import\"\n      - \"./data/storage:/photoprism/storage\"\n  mariadb:\n    container_name: photoprism__db\n    restart: unless-stopped\n    image: mariadb:10.6\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    command: mysqld --innodb-buffer-pool-size=128M --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --max-connections=512 --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\n    volumes:\n      - \"./database:/var/lib/mysql\" # Important, don't remove\n    environment:\n      MYSQL_ROOT_PASSWORD: insecure\n      MYSQL_DATABASE: photoprism\n      MYSQL_USER: photoprism\n      MYSQL_PASSWORD: insecure\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: '3.5'\n\nservices:\n  photoprism:\n    container_name: photoprism__app\n    image: photoprism/photoprism:latest\n    depends_on:\n      - mariadb\n    restart: unless-stopped\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    ports:\n      - 2342:2342 # HTTP port (host:container)\n    environment:\n      PHOTOPRISM_ADMIN_PASSWORD: \"password\"\n      PHOTOPRISM_SITE_URL: \"https://service.url/\"\n      PHOTOPRISM_ORIGINALS_LIMIT: 5000\n      PHOTOPRISM_HTTP_COMPRESSION: \"gzip\"\n      PHOTOPRISM_DEBUG: \"false\"          \n      PHOTOPRISM_PUBLIC: \"false\"      \n      PHOTOPRISM_READONLY: \"false\"    \n      PHOTOPRISM_EXPERIMENTAL: \"false\"\n      PHOTOPRISM_DISABLE_CHOWN: \"false\"\n      PHOTOPRISM_DISABLE_WEBDAV: \"false\" \n      PHOTOPRISM_DISABLE_SETTINGS: \"false\"\n      PHOTOPRISM_DISABLE_TENSORFLOW: \"false\"\n      PHOTOPRISM_DISABLE_FACES: \"false\"     \n      PHOTOPRISM_DISABLE_CLASSIFICATION: \"false\"\n      PHOTOPRISM_DARKTABLE_PRESETS: \"false\"     \n      PHOTOPRISM_DETECT_NSFW: \"false\"           \n      PHOTOPRISM_UPLOAD_NSFW: \"true\"            \n      PHOTOPRISM_DATABASE_DRIVER: \"mysql\"       \n      PHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\n      PHOTOPRISM_DATABASE_NAME: \"photoprism\"    \n      PHOTOPRISM_DATABASE_USER: \"root\"         \n      PHOTOPRISM_DATABASE_PASSWORD: \"insecure\" \n      PHOTOPRISM_SITE_TITLE: \"PhotoPrism\"\n      PHOTOPRISM_SITE_CAPTION: \"Browse Your Life\"\n      PHOTOPRISM_SITE_DESCRIPTION: \"\"\n      PHOTOPRISM_SITE_AUTHOR: \"\"\n      HOME: \"/photoprism\"\n    working_dir: \"/photoprism\"\n    volumes:\n      - \"./data/originals:/photoprism/originals\"    \n      - \"./data/imports:/photoprism/import\"\n      - \"./data/storage:/photoprism/storage\"\n  mariadb:\n    container_name: photoprism__db\n    restart: unless-stopped\n    image: mariadb:10.6\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    command: mysqld --innodb-buffer-pool-size=128M --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --max-connections=512 --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\n    volumes:\n      - \"./database:/var/lib/mysql\" # Important, don't remove\n    environment:\n      MYSQL_ROOT_PASSWORD: insecure\n      MYSQL_DATABASE: photoprism\n      MYSQL_USER: photoprism\n      MYSQL_PASSWORD: insecure\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://photoprism.app/","rel":["nofollow"]},"children":[{"type":"text","value":"Photo Prism"}]},{"type":"text","value":" is a free alternative to Google photos, can be set up with #docker."}]},{"type":"element","tag":"h2","props":{"id":"docker-compose-file-to-run-it"},"children":[{"type":"text","value":"Docker compose file to run it"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Check out current "},{"type":"element","tag":"a","props":{"href":"https://dl.photoprism.app/docker/docker-compose.yml","rel":["nofollow"]},"children":[{"type":"text","value":"example"}]},{"type":"text","value":" at photoprism's "},{"type":"element","tag":"a","props":{"href":"https://docs.photoprism.app/getting-started/docker-compose/","rel":["nofollow"]},"children":[{"type":"text","value":"documentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"version: '3.5'\n\nservices:\n  photoprism:\n    container_name: photoprism__app\n    image: photoprism/photoprism:latest\n    depends_on:\n      - mariadb\n    restart: unless-stopped\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    ports:\n      - 2342:2342 # HTTP port (host:container)\n    environment:\n      PHOTOPRISM_ADMIN_PASSWORD: \"password\"\n      PHOTOPRISM_SITE_URL: \"https://service.url/\"\n      PHOTOPRISM_ORIGINALS_LIMIT: 5000\n      PHOTOPRISM_HTTP_COMPRESSION: \"gzip\"\n      PHOTOPRISM_DEBUG: \"false\"          \n      PHOTOPRISM_PUBLIC: \"false\"      \n      PHOTOPRISM_READONLY: \"false\"    \n      PHOTOPRISM_EXPERIMENTAL: \"false\"\n      PHOTOPRISM_DISABLE_CHOWN: \"false\"\n      PHOTOPRISM_DISABLE_WEBDAV: \"false\" \n      PHOTOPRISM_DISABLE_SETTINGS: \"false\"\n      PHOTOPRISM_DISABLE_TENSORFLOW: \"false\"\n      PHOTOPRISM_DISABLE_FACES: \"false\"     \n      PHOTOPRISM_DISABLE_CLASSIFICATION: \"false\"\n      PHOTOPRISM_DARKTABLE_PRESETS: \"false\"     \n      PHOTOPRISM_DETECT_NSFW: \"false\"           \n      PHOTOPRISM_UPLOAD_NSFW: \"true\"            \n      PHOTOPRISM_DATABASE_DRIVER: \"mysql\"       \n      PHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\n      PHOTOPRISM_DATABASE_NAME: \"photoprism\"    \n      PHOTOPRISM_DATABASE_USER: \"root\"         \n      PHOTOPRISM_DATABASE_PASSWORD: \"insecure\" \n      PHOTOPRISM_SITE_TITLE: \"PhotoPrism\"\n      PHOTOPRISM_SITE_CAPTION: \"Browse Your Life\"\n      PHOTOPRISM_SITE_DESCRIPTION: \"\"\n      PHOTOPRISM_SITE_AUTHOR: \"\"\n      HOME: \"/photoprism\"\n    working_dir: \"/photoprism\"\n    volumes:\n      - \"./data/originals:/photoprism/originals\"    \n      - \"./data/imports:/photoprism/import\"\n      - \"./data/storage:/photoprism/storage\"\n  mariadb:\n    container_name: photoprism__db\n    restart: unless-stopped\n    image: mariadb:10.6\n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    command: mysqld --innodb-buffer-pool-size=128M --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --max-connections=512 --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\n    volumes:\n      - \"./database:/var/lib/mysql\" # Important, don't remove\n    environment:\n      MYSQL_ROOT_PASSWORD: insecure\n      MYSQL_DATABASE: photoprism\n      MYSQL_USER: photoprism\n      MYSQL_PASSWORD: insecure\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"'3.5'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"photoprism"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"photoprism__app"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"photoprism/photoprism:latest"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"depends_on"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"mariadb"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"security_opt"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"seccomp:unconfined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"apparmor:unconfined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"2342:2342"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fb21ca"},"children":[{"type":"text","value":"# HTTP port (host:container)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_ADMIN_PASSWORD"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"password\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_SITE_URL"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"https://service.url/\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_ORIGINALS_LIMIT"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d2195a"},"children":[{"type":"text","value":"5000"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_HTTP_COMPRESSION"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"gzip\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DEBUG"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"          "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_PUBLIC"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_READONLY"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_EXPERIMENTAL"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_CHOWN"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_WEBDAV"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_SETTINGS"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_TENSORFLOW"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_FACES"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"     "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DISABLE_CLASSIFICATION"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DARKTABLE_PRESETS"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"     "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DETECT_NSFW"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"false\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"           "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_UPLOAD_NSFW"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"true\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"            "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DATABASE_DRIVER"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"mysql\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"       "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DATABASE_SERVER"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"mariadb:3306\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DATABASE_NAME"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"photoprism\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DATABASE_USER"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"root\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"         "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_DATABASE_PASSWORD"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"insecure\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_SITE_TITLE"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"PhotoPrism\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_SITE_CAPTION"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"Browse Your Life\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_SITE_DESCRIPTION"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"PHOTOPRISM_SITE_AUTHOR"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"HOME"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"/photoprism\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"working_dir"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"/photoprism\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"./data/originals:/photoprism/originals\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"./data/imports:/photoprism/import\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"./data/storage:/photoprism/storage\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"mariadb"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"photoprism__db"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"unless-stopped"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"mariadb:10.6"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"security_opt"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"seccomp:unconfined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"apparmor:unconfined"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"command"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"mysqld --innodb-buffer-pool-size=128M --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --max-connections=512 --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"\"./database:/var/lib/mysql\""}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fb21ca"},"children":[{"type":"text","value":"# Important, don't remove"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"MYSQL_ROOT_PASSWORD"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"insecure"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"MYSQL_DATABASE"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"photoprism"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"MYSQL_USER"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"photoprism"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-bd7998"},"children":[{"type":"text","value":"MYSQL_PASSWORD"}]},{"type":"element","tag":"span","props":{"class":"ct-9490aa"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-21f7ae"},"children":[{"type":"text","value":"insecure"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d2195a{color:#79C0FF}.ct-fb21ca{color:#8B949E}.ct-21f7ae{color:#A5D6FF}.ct-9490aa{color:#C9D1D9}.ct-bd7998{color:#7EE787}.light .ct-bd7998{color:#268BD2}.light .ct-9490aa{color:#657B83}.light .ct-21f7ae{color:#2AA198}.light .ct-fb21ca{color:#93A1A1}.light .ct-d2195a{color:#D33682}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"docker-compose-file-to-run-it","depth":2,"text":"Docker compose file to run it"}]}},"_type":"markdown","_id":"content:Linux:Google photos alternative with Photoprism.md","_source":"content","_file":"Linux/Google photos alternative with Photoprism.md","_extension":"md"},{"_path":"/linux/resume-or-start-screen-session","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Resume Or Start Screen Session","description":"Running this script will enter currently running screen session or will start new one.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Running this script will enter currently running "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"screen"}]},{"type":"text","value":" session or will start new one."}]},{"type":"element","tag":"code","props":{"code":"( screen -r bash || ( screen -d bash && screen -r bash || screen -SAm bash bash ) )\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"( screen -r bash || ( screen -d bash && screen -r bash || screen -SAm bash bash ) )\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Running this script will enter currently running "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"screen"}]},{"type":"text","value":" session or will start new one."}]},{"type":"element","tag":"code","props":{"code":"( screen -r bash || ( screen -d bash && screen -r bash || screen -SAm bash bash ) )\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f1f2e7"},"children":[{"type":"text","value":"( screen -r bash "}]},{"type":"element","tag":"span","props":{"class":"ct-2c78b6"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-f1f2e7"},"children":[{"type":"text","value":" ( screen -d bash "}]},{"type":"element","tag":"span","props":{"class":"ct-2c78b6"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-f1f2e7"},"children":[{"type":"text","value":" screen -r bash "}]},{"type":"element","tag":"span","props":{"class":"ct-2c78b6"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-f1f2e7"},"children":[{"type":"text","value":" screen -SAm bash bash ) )"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-2c78b6{color:#FF7B72}.ct-f1f2e7{color:#C9D1D9}.light .ct-f1f2e7{color:#657B83}.light .ct-2c78b6{color:#859900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Linux:Resume or start screen session.md","_source":"content","_file":"Linux/Resume or start screen session.md","_extension":"md"},{"_path":"/linux/rsync-file-with-ssh","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Rsync File With SSH","description":"Downloads file from #SSH with rsync and puts it in current folder.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Downloads file from #SSH with rsync and puts it in current folder."}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nPORT=22\nUSER=user\nHOST=example.com\nREMOTE_PATH=/tmp\nREMOTE_FILE=sample.text\nDEST_PATH=./\n\nrsync -a -e \"ssh -p $PORT\" -P -v \\\n    \"$USER@$HOST:$REMOTE_PATH/$REMOTE_FILE\" \\\n    \"$DEST_PATH\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"#!/bin/bash\n\nPORT=22\nUSER=user\nHOST=example.com\nREMOTE_PATH=/tmp\nREMOTE_FILE=sample.text\nDEST_PATH=./\n\nrsync -a -e \"ssh -p $PORT\" -P -v \\\n    \"$USER@$HOST:$REMOTE_PATH/$REMOTE_FILE\" \\\n    \"$DEST_PATH\"\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Downloads file from #SSH with rsync and puts it in current folder."}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nPORT=22\nUSER=user\nHOST=example.com\nREMOTE_PATH=/tmp\nREMOTE_FILE=sample.text\nDEST_PATH=./\n\nrsync -a -e \"ssh -p $PORT\" -P -v \\\n    \"$USER@$HOST:$REMOTE_PATH/$REMOTE_FILE\" \\\n    \"$DEST_PATH\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a64961"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"PORT=22"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"USER=user"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"HOST=example.com"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"REMOTE_PATH=/tmp"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"REMOTE_FILE=sample.text"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"DEST_PATH=./"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"rsync -a -e "}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\"ssh -p "}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":" -P -v \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"USER"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"HOST"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"REMOTE_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"REMOTE_FILE"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":" \\"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-46d498"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-e02561"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-db61d8"},"children":[{"type":"text","value":"DEST_PATH"}]},{"type":"element","tag":"span","props":{"class":"ct-4f806f"},"children":[{"type":"text","value":"\""}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-db61d8{color:#C9D1D9}.ct-e02561{color:#C9D1D9}.ct-4f806f{color:#A5D6FF}.ct-46d498{color:#C9D1D9}.ct-a64961{color:#8B949E}.light .ct-a64961{color:#93A1A1}.light .ct-46d498{color:#657B83}.light .ct-4f806f{color:#2AA198}.light .ct-e02561{color:#859900}.light .ct-db61d8{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Linux:Rsync file with SSH.md","_source":"content","_file":"Linux/Rsync file with SSH.md","_extension":"md"},{"_path":"/linux/setting-up-nginx","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Setting Up NGINX","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"fallback-url-for-spa-s"},"children":[{"type":"text","value":"Fallback url for SPA-s"}]},{"type":"element","tag":"code","props":{"code":"server {\n  # ...\n  location / {\n    # First attempt to serve request as file, then\n    # as directory, then fall back to displaying a 404.\n    try_files $uri $uri/ =404;\n  }\n  # ...\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server {\n  # ...\n  location / {\n    # First attempt to serve request as file, then\n    # as directory, then fall back to displaying a 404.\n    try_files $uri $uri/ =404;\n  }\n  # ...\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"set-up-for-uploads"},"children":[{"type":"text","value":"Set up for uploads"}]},{"type":"element","tag":"code","props":{"code":"server {\n  # ...\n  client_max_body_size 200M;\n  # ...\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server {\n  # ...\n  client_max_body_size 200M;\n  # ...\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"reverse-proxy-for-https"},"children":[{"type":"text","value":"Reverse proxy for https"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Given config forwards "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]},{"type":"text","value":" traffic to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" on port "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"8080"}]},{"type":"text","value":" for "},{"type":"element","tag":"a","props":{"href":"https://next.vault48.org","rel":["nofollow"]},"children":[{"type":"text","value":"https://next.vault48.org"}]},{"type":"text","value":"\nwith http2 support if possible."}]},{"type":"element","tag":"code","props":{"code":"server {\n  listen 80;\n  server_name next.vault48.org;\n  return 301 https://next.vault48.org$request_uri;\n}\n\nserver {\n  listen 443 ssl http2;\n  listen [::]:443 ssl http2;\n  \n  # managed by Certbot\n  ssl_certificate /etc/letsencrypt/live/vault48.org/fullchain.pem; \n  ssl_certificate_key /etc/letsencrypt/live/vault48.org/privkey.pem; \n  ssl_trusted_certificate /etc/letsencrypt/live/vault48.org/chain.pem;\n  \n  server_name next.vault48.org;\n  \n  location / {\n    proxy_redirect off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    \n    proxy_pass http://127.0.0.1:8080;\n  }\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server {\n  listen 80;\n  server_name next.vault48.org;\n  return 301 https://next.vault48.org$request_uri;\n}\n\nserver {\n  listen 443 ssl http2;\n  listen [::]:443 ssl http2;\n  \n  # managed by Certbot\n  ssl_certificate /etc/letsencrypt/live/vault48.org/fullchain.pem; \n  ssl_certificate_key /etc/letsencrypt/live/vault48.org/privkey.pem; \n  ssl_trusted_certificate /etc/letsencrypt/live/vault48.org/chain.pem;\n  \n  server_name next.vault48.org;\n  \n  location / {\n    proxy_redirect off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    \n    proxy_pass http://127.0.0.1:8080;\n  }\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"fallback-url-for-spa-s"},"children":[{"type":"text","value":"Fallback url for SPA-s"}]},{"type":"element","tag":"code","props":{"code":"server {\n  # ...\n  location / {\n    # First attempt to serve request as file, then\n    # as directory, then fall back to displaying a 404.\n    try_files $uri $uri/ =404;\n  }\n  # ...\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e66a3"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ff14b2"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-17f191"},"children":[{"type":"text","value":"/ "}]},{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# First attempt to serve request as file, then"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# as directory, then fall back to displaying a 404."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-db7500"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"set-up-for-uploads"},"children":[{"type":"text","value":"Set up for uploads"}]},{"type":"element","tag":"code","props":{"code":"server {\n  # ...\n  client_max_body_size 200M;\n  # ...\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e66a3"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" client_max_body_size "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"200M;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"reverse-proxy-for-https"},"children":[{"type":"text","value":"Reverse proxy for https"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Given config forwards "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]},{"type":"text","value":" traffic to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" on port "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"8080"}]},{"type":"text","value":" for "},{"type":"element","tag":"a","props":{"href":"https://next.vault48.org","rel":["nofollow"]},"children":[{"type":"text","value":"https://next.vault48.org"}]},{"type":"text","value":"\nwith http2 support if possible."}]},{"type":"element","tag":"code","props":{"code":"server {\n  listen 80;\n  server_name next.vault48.org;\n  return 301 https://next.vault48.org$request_uri;\n}\n\nserver {\n  listen 443 ssl http2;\n  listen [::]:443 ssl http2;\n  \n  # managed by Certbot\n  ssl_certificate /etc/letsencrypt/live/vault48.org/fullchain.pem; \n  ssl_certificate_key /etc/letsencrypt/live/vault48.org/privkey.pem; \n  ssl_trusted_certificate /etc/letsencrypt/live/vault48.org/chain.pem;\n  \n  server_name next.vault48.org;\n  \n  location / {\n    proxy_redirect off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    \n    proxy_pass http://127.0.0.1:8080;\n  }\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e66a3"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"80;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" server_name "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"next.vault48.org;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba45e6"},"children":[{"type":"text","value":"301"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" https://next.vault48.org"}]},{"type":"element","tag":"span","props":{"class":"ct-97ee04"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-08729a"},"children":[{"type":"text","value":"request_uri"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e66a3"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"443 ssl http2;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"[::]:443 ssl http2;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b6249d"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" ssl_certificate "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"/etc/letsencrypt/live/vault48.org/fullchain.pem; "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" ssl_certificate_key "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"/etc/letsencrypt/live/vault48.org/privkey.pem; "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" ssl_trusted_certificate "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"/etc/letsencrypt/live/vault48.org/chain.pem;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" server_name "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"next.vault48.org;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ff14b2"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-17f191"},"children":[{"type":"text","value":"/ "}]},{"type":"element","tag":"span","props":{"class":"ct-49cbaf"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" proxy_redirect "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"off;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"Host "}]},{"type":"element","tag":"span","props":{"class":"ct-97ee04"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-08729a"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"X-Real-IP "}]},{"type":"element","tag":"span","props":{"class":"ct-97ee04"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-08729a"},"children":[{"type":"text","value":"remote_addr"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"X-Forwarded-For "}]},{"type":"element","tag":"span","props":{"class":"ct-97ee04"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-08729a"},"children":[{"type":"text","value":"proxy_add_x_forwarded_for"}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-374a83"},"children":[{"type":"text","value":" proxy_pass "}]},{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"http://127.0.0.1:8080;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-31cb7c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-08729a{color:#C9D1D9}.ct-97ee04{color:#C9D1D9}.ct-ba45e6{color:#79C0FF}.ct-374a83{color:#FF7B72}.ct-db7500{color:#FF7B72}.ct-17f191{color:#FFA657}.ct-ff14b2{color:#FF7B72}.ct-49cbaf{color:#C9D1D9}.ct-b6249d{color:#8B949E}.ct-31cb7c{color:#C9D1D9}.ct-5e66a3{color:#FF7B72}.light .ct-5e66a3{color:#073642}.light .ct-31cb7c{color:#657B83}.light .ct-b6249d{color:#93A1A1}.light .ct-49cbaf{color:#657B83}.light .ct-ff14b2{color:#073642}.light .ct-17f191{color:#657B83}.light .ct-db7500{color:#657B83}.light .ct-374a83{color:#859900}.light .ct-ba45e6{color:#D33682}.light .ct-97ee04{color:#859900}.light .ct-08729a{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"fallback-url-for-spa-s","depth":2,"text":"Fallback url for SPA-s"},{"id":"set-up-for-uploads","depth":2,"text":"Set up for uploads"},{"id":"reverse-proxy-for-https","depth":2,"text":"Reverse proxy for https"}]}},"_type":"markdown","_id":"content:Linux:Setting up NGINX.md","_source":"content","_file":"Linux/Setting up NGINX.md","_extension":"md"},{"_path":"/linux/ssh","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"SSH","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"config-aliases-for-ssh-hosts"},"children":[{"type":"text","value":"Config aliases for #SSH hosts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#SSH config can be used to made aliases for different hosts. Should be put at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.ssh/config"}]},{"type":"text","value":". To simply call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh router"}]},{"type":"text","value":" without parameters, use this:"}]},{"type":"element","tag":"code","props":{"code":"Host router\n    HostName 192.168.0.1\n    IdentityFile ~/.ssh/id_rsa\n    User root\n    Port 22522\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"Host router\n    HostName 192.168.0.1\n    IdentityFile ~/.ssh/id_rsa\n    User root\n    Port 22522\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"config-aliases-for-ssh-hosts"},"children":[{"type":"text","value":"Config aliases for #SSH hosts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"#SSH config can be used to made aliases for different hosts. Should be put at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/.ssh/config"}]},{"type":"text","value":". To simply call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ssh router"}]},{"type":"text","value":" without parameters, use this:"}]},{"type":"element","tag":"code","props":{"code":"Host router\n    HostName 192.168.0.1\n    IdentityFile ~/.ssh/id_rsa\n    User root\n    Port 22522\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Host router\n    HostName 192.168.0.1\n    IdentityFile ~/.ssh/id_rsa\n    User root\n    Port 22522"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"config-aliases-for-ssh-hosts","depth":2,"text":"Config aliases for #SSH hosts"}]}},"_type":"markdown","_id":"content:Linux:SSH.md","_source":"content","_file":"Linux/SSH.md","_extension":"md"},{"_path":"/obsidian/self-hosted-obsidian-sync-with-couchdb","_dir":"obsidian","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Self Hosted Obsidian Sync With CouchDB","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vrtmrz/obsidian-livesync","rel":["nofollow"]},"children":[{"type":"text","value":"Main documentation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vrtmrz/obsidian-livesync/blob/main/docs/setup_own_server.md","rel":["nofollow"]},"children":[{"type":"text","value":"Setting up couchdb"}]}]}]},{"type":"element","tag":"h2","props":{"id":"setting-up-environment"},"children":[{"type":"text","value":"Setting up environment"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, you should create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" with the following contents:"}]},{"type":"element","tag":"code","props":{"code":"version: '3'\nservices:\n  couchserver:\n    container_name: obsidian__database\n    image: couchdb\n    restart: always\n    ports:\n      - \"5984:5984\"\n    environment:\n      - COUCHDB_USER=user\n      - COUCHDB_PASSWORD=somepassword\n    volumes:\n      - ./couchdb/dbdata:/opt/couchdb/data\n      - ./couchdb/local.ini:/opt/couchdb/etc/local.ini\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"version: '3'\nservices:\n  couchserver:\n    container_name: obsidian__database\n    image: couchdb\n    restart: always\n    ports:\n      - \"5984:5984\"\n    environment:\n      - COUCHDB_USER=user\n      - COUCHDB_PASSWORD=somepassword\n    volumes:\n      - ./couchdb/dbdata:/opt/couchdb/data\n      - ./couchdb/local.ini:/opt/couchdb/etc/local.ini\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then create initial config at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./couchdb/local.ini"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"[couchdb]\nsingle_node=true\nmax_document_size=50000000\nmax_http_request_size=4294967296\n\n[chttpd]\nrequire_valid_user = true\n\n[chttpd_auth]\nrequire_valid_user = true\nauthentication_redirect = /_utils/session.html\n\n[httpd]\nWWW-Authenticate = Basic realm=\"couchdb\"\nenable_cors = true\n\n[cors]\norigins = app://obsidian.md,capacitor://localhost,http://localhost\ncredentials = true\nheaders = accept, authorization, content-type, origin, referer\nmethods = GET, PUT, POST, HEAD, DELETE\nmax_age = 3600\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[couchdb]\nsingle_node=true\nmax_document_size=50000000\nmax_http_request_size=4294967296\n\n[chttpd]\nrequire_valid_user = true\n\n[chttpd_auth]\nrequire_valid_user = true\nauthentication_redirect = /_utils/session.html\n\n[httpd]\nWWW-Authenticate = Basic realm=\"couchdb\"\nenable_cors = true\n\n[cors]\norigins = app://obsidian.md,capacitor://localhost,http://localhost\ncredentials = true\nheaders = accept, authorization, content-type, origin, referer\nmethods = GET, PUT, POST, HEAD, DELETE\nmax_age = 3600\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, in order to have sync on mobile devices, we will need a reverse proxy with nginx at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/obsidian-couchdb"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"server {\n    listen 80;\n    listen [::]:80;\n    server_name couchdb.yourhost.com;\n    return 301 https://$host$request_uri;\n}\n\nserver {\n        listen 443 ssl http2;\n        listen [::]:443 ssl http2;\n\n        ssl_certificate /etc/letsencrypt/live/yourhost.com/fullchain.pem; # managed by Certbot\n        ssl_certificate_key /etc/letsencrypt/live/yourhost.com/privkey.pem; # managed by Certbot\n        ssl_trusted_certificate /etc/letsencrypt/live/yourhost.com/chain.pem;\n\n        server_name couchdb.yourhost.com;\n        client_max_body_size 200M;\n\n        location / {\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_pass http://127.0.0.1:5984;\n        }\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server {\n    listen 80;\n    listen [::]:80;\n    server_name couchdb.yourhost.com;\n    return 301 https://$host$request_uri;\n}\n\nserver {\n        listen 443 ssl http2;\n        listen [::]:443 ssl http2;\n\n        ssl_certificate /etc/letsencrypt/live/yourhost.com/fullchain.pem; # managed by Certbot\n        ssl_certificate_key /etc/letsencrypt/live/yourhost.com/privkey.pem; # managed by Certbot\n        ssl_trusted_certificate /etc/letsencrypt/live/yourhost.com/chain.pem;\n\n        server_name couchdb.yourhost.com;\n        client_max_body_size 200M;\n\n        location / {\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_pass http://127.0.0.1:5984;\n        }\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"setting-up-obsidian"},"children":[{"type":"text","value":"Setting up Obsidian"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Self-hosted LiveSync"}]},{"type":"text","value":" plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Change host to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://yourhost.com"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Specify username and password"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Press "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test"}]},{"type":"text","value":", then "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch database"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vrtmrz/obsidian-livesync","rel":["nofollow"]},"children":[{"type":"text","value":"Main documentation"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/vrtmrz/obsidian-livesync/blob/main/docs/setup_own_server.md","rel":["nofollow"]},"children":[{"type":"text","value":"Setting up couchdb"}]}]}]},{"type":"element","tag":"h2","props":{"id":"setting-up-environment"},"children":[{"type":"text","value":"Setting up environment"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, you should create "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" with the following contents:"}]},{"type":"element","tag":"code","props":{"code":"version: '3'\nservices:\n  couchserver:\n    container_name: obsidian__database\n    image: couchdb\n    restart: always\n    ports:\n      - \"5984:5984\"\n    environment:\n      - COUCHDB_USER=user\n      - COUCHDB_PASSWORD=somepassword\n    volumes:\n      - ./couchdb/dbdata:/opt/couchdb/data\n      - ./couchdb/local.ini:/opt/couchdb/etc/local.ini\n","language":"yaml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"'3'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"couchserver"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"container_name"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"obsidian__database"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"couchdb"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"restart"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"always"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"ports"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"\"5984:5984\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"COUCHDB_USER=user"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"COUCHDB_PASSWORD=somepassword"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b21a05"},"children":[{"type":"text","value":"volumes"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"./couchdb/dbdata:/opt/couchdb/data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"class":"ct-2a0174"},"children":[{"type":"text","value":"./couchdb/local.ini:/opt/couchdb/etc/local.ini"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then create initial config at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"./couchdb/local.ini"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"[couchdb]\nsingle_node=true\nmax_document_size=50000000\nmax_http_request_size=4294967296\n\n[chttpd]\nrequire_valid_user = true\n\n[chttpd_auth]\nrequire_valid_user = true\nauthentication_redirect = /_utils/session.html\n\n[httpd]\nWWW-Authenticate = Basic realm=\"couchdb\"\nenable_cors = true\n\n[cors]\norigins = app://obsidian.md,capacitor://localhost,http://localhost\ncredentials = true\nheaders = accept, authorization, content-type, origin, referer\nmethods = GET, PUT, POST, HEAD, DELETE\nmax_age = 3600\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[couchdb]\nsingle_node=true\nmax_document_size=50000000\nmax_http_request_size=4294967296\n\n[chttpd]\nrequire_valid_user = true\n\n[chttpd_auth]\nrequire_valid_user = true\nauthentication_redirect = /_utils/session.html\n\n[httpd]\nWWW-Authenticate = Basic realm=\"couchdb\"\nenable_cors = true\n\n[cors]\norigins = app://obsidian.md,capacitor://localhost,http://localhost\ncredentials = true\nheaders = accept, authorization, content-type, origin, referer\nmethods = GET, PUT, POST, HEAD, DELETE\nmax_age = 3600"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, in order to have sync on mobile devices, we will need a reverse proxy with nginx at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/nginx/sites-enabled/obsidian-couchdb"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"server {\n    listen 80;\n    listen [::]:80;\n    server_name couchdb.yourhost.com;\n    return 301 https://$host$request_uri;\n}\n\nserver {\n        listen 443 ssl http2;\n        listen [::]:443 ssl http2;\n\n        ssl_certificate /etc/letsencrypt/live/yourhost.com/fullchain.pem; # managed by Certbot\n        ssl_certificate_key /etc/letsencrypt/live/yourhost.com/privkey.pem; # managed by Certbot\n        ssl_trusted_certificate /etc/letsencrypt/live/yourhost.com/chain.pem;\n\n        server_name couchdb.yourhost.com;\n        client_max_body_size 200M;\n\n        location / {\n                proxy_redirect off;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_pass http://127.0.0.1:5984;\n        }\n}\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eeb548"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"80;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"[::]:80;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" server_name "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"couchdb.yourhost.com;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32baea"},"children":[{"type":"text","value":"301"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":" https://"}]},{"type":"element","tag":"span","props":{"class":"ct-36f560"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-17159a"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-36f560"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-17159a"},"children":[{"type":"text","value":"request_uri"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eeb548"},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"443 ssl http2;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" listen "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"[::]:443 ssl http2;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" ssl_certificate "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"/etc/letsencrypt/live/yourhost.com/fullchain.pem; "}]},{"type":"element","tag":"span","props":{"class":"ct-25c1e8"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" ssl_certificate_key "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"/etc/letsencrypt/live/yourhost.com/privkey.pem; "}]},{"type":"element","tag":"span","props":{"class":"ct-25c1e8"},"children":[{"type":"text","value":"# managed by Certbot"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" ssl_trusted_certificate "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"/etc/letsencrypt/live/yourhost.com/chain.pem;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" server_name "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"couchdb.yourhost.com;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"       "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" client_max_body_size "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"200M;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2c5bea"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-293544"},"children":[{"type":"text","value":"location"}]},{"type":"element","tag":"span","props":{"class":"ct-2c5bea"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d0f337"},"children":[{"type":"text","value":"/ "}]},{"type":"element","tag":"span","props":{"class":"ct-2c5bea"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" proxy_redirect "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"off;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"Host "}]},{"type":"element","tag":"span","props":{"class":"ct-36f560"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-17159a"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"X-Real-IP "}]},{"type":"element","tag":"span","props":{"class":"ct-36f560"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-17159a"},"children":[{"type":"text","value":"remote_addr"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" proxy_set_header "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"X-Forwarded-For "}]},{"type":"element","tag":"span","props":{"class":"ct-36f560"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-17159a"},"children":[{"type":"text","value":"proxy_add_x_forwarded_for"}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"               "}]},{"type":"element","tag":"span","props":{"class":"ct-c77180"},"children":[{"type":"text","value":" proxy_pass "}]},{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"http://127.0.0.1:5984;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d222e6"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"setting-up-obsidian"},"children":[{"type":"text","value":"Setting up Obsidian"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Self-hosted LiveSync"}]},{"type":"text","value":" plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Change host to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://yourhost.com"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Specify username and password"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Press "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"test"}]},{"type":"text","value":", then "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"fetch database"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d0f337{color:#FFA657}.ct-293544{color:#FF7B72}.ct-2c5bea{color:#C9D1D9}.ct-25c1e8{color:#8B949E}.ct-17159a{color:#C9D1D9}.ct-36f560{color:#C9D1D9}.ct-32baea{color:#79C0FF}.ct-c77180{color:#FF7B72}.ct-eeb548{color:#FF7B72}.ct-2a0174{color:#A5D6FF}.ct-d222e6{color:#C9D1D9}.ct-b21a05{color:#7EE787}.light .ct-b21a05{color:#268BD2}.light .ct-d222e6{color:#657B83}.light .ct-2a0174{color:#2AA198}.light .ct-eeb548{color:#073642}.light .ct-c77180{color:#859900}.light .ct-32baea{color:#D33682}.light .ct-36f560{color:#859900}.light .ct-17159a{color:#268BD2}.light .ct-25c1e8{color:#93A1A1}.light .ct-2c5bea{color:#657B83}.light .ct-293544{color:#073642}.light .ct-d0f337{color:#657B83}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setting-up-environment","depth":2,"text":"Setting up environment"},{"id":"setting-up-obsidian","depth":2,"text":"Setting up Obsidian"}]}},"_type":"markdown","_id":"content:Obsidian:Self-hosted Obsidian sync with CouchDB.md","_source":"content","_file":"Obsidian/Self-hosted Obsidian sync with CouchDB.md","_extension":"md"},{"_path":"/sql/mysql-and-mariadb-setup","_dir":"sql","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"MySQL And MariaDB Setup","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"install-mariadb-on-ubuntu-2004-lts"},"children":[{"type":"text","value":"Install MariaDB on Ubuntu 20.04 LTS"}]},{"type":"element","tag":"code","props":{"code":"sudo apt update\nsudo apt install mariadb-server\nsudo mysql_secure_installation\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo apt update\nsudo apt install mariadb-server\nsudo mysql_secure_installation\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"access-database-from-outside"},"children":[{"type":"text","value":"Access Database from outside"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Open "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/mysql/mariadb.conf.d/50-server.cnf"}]},{"type":"text","value":" and change the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bind-address"}]},{"type":"text","value":" to:"}]},{"type":"element","tag":"code","props":{"code":"...\nbind-address = 0.0.0.0\n...\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"...\nbind-address = 0.0.0.0\n...\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"create-administrative-user"},"children":[{"type":"text","value":"Create Administrative User"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create a new user "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"newuser"}]},{"type":"text","value":" for the host "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":" with a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"code","props":{"code":"CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Grant all permissions to the new user"}]}]},{"type":"element","tag":"code","props":{"code":"GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update permissions"}]}]},{"type":"element","tag":"code","props":{"code":"FLUSH PRIVILEGES;\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"FLUSH PRIVILEGES;\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"install-mariadb-on-ubuntu-2004-lts"},"children":[{"type":"text","value":"Install MariaDB on Ubuntu 20.04 LTS"}]},{"type":"element","tag":"code","props":{"code":"sudo apt update\nsudo apt install mariadb-server\nsudo mysql_secure_installation\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"sudo apt update"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"sudo apt install mariadb-server"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"sudo mysql_secure_installation"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"access-database-from-outside"},"children":[{"type":"text","value":"Access Database from outside"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Open "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/mysql/mariadb.conf.d/50-server.cnf"}]},{"type":"text","value":" and change the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bind-address"}]},{"type":"text","value":" to:"}]},{"type":"element","tag":"code","props":{"code":"...\nbind-address = 0.0.0.0\n...\n","language":"nginx"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"bind-"}]},{"type":"element","tag":"span","props":{"class":"ct-1b9686"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":" = 0.0.0.0"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-502fa7"},"children":[{"type":"text","value":"..."}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"create-administrative-user"},"children":[{"type":"text","value":"Create Administrative User"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create a new user "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"newuser"}]},{"type":"text","value":" for the host "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":" with a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"code","props":{"code":"CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Grant all permissions to the new user"}]}]},{"type":"element","tag":"code","props":{"code":"GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update permissions"}]}]},{"type":"element","tag":"code","props":{"code":"FLUSH PRIVILEGES;\n","language":"mysql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FLUSH PRIVILEGES;"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1b9686{color:#FF7B72}.ct-502fa7{color:#C9D1D9}.light .ct-502fa7{color:#657B83}.light .ct-1b9686{color:#859900}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install-mariadb-on-ubuntu-2004-lts","depth":2,"text":"Install MariaDB on Ubuntu 20.04 LTS"},{"id":"access-database-from-outside","depth":2,"text":"Access Database from outside"},{"id":"create-administrative-user","depth":2,"text":"Create Administrative User"}]}},"_type":"markdown","_id":"content:SQL:MySQL and MariaDB setup.md","_source":"content","_file":"SQL/MySQL and MariaDB setup.md","_extension":"md"},{"_path":"/sql/postgress-setup","_dir":"sql","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Postgress Setup","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"install-postgresql-12-on-ubuntu-2004-lts"},"children":[{"type":"text","value":"Install PostgreSQL 12 on Ubuntu 20.04 LTS"}]},{"type":"element","tag":"code","props":{"code":"sudo apt update\nsudo apt install -y postgresql postgresql-contrib postgresql-client\nsudo systemctl status postgresql.service\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo apt update\nsudo apt install -y postgresql postgresql-contrib postgresql-client\nsudo systemctl status postgresql.service\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"initial-database-connection"},"children":[{"type":"text","value":"Initial database connection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A local connection (from the database server) can be done by the following command:"}]},{"type":"element","tag":"code","props":{"code":"sudo -u postgres psql\n\npsql (12.12 (Ubuntu 12.12-0ubuntu0.20.04.1))\nType \"help\" for help.\n\npostgres=#\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo -u postgres psql\n\npsql (12.12 (Ubuntu 12.12-0ubuntu0.20.04.1))\nType \"help\" for help.\n\npostgres=#\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"set-password-for-postgres-database-user"},"children":[{"type":"text","value":"Set password for postgres database user"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The password for the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" database user can be set the the quick command "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\\password"}]},{"type":"text","value":"\nor by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"alter user postgres password 'Supersecret'"}]},{"type":"text","value":". A connection using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" user\nis still not possible from the \"outside\" hence to the default settings in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pg_hba.conf"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"update-pg_hbaconf-to-allow-postgres-user-connections-with-password"},"children":[{"type":"text","value":"Update pg_hba.conf to allow postgres user connections with password"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to allow connections of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" database user not using OS user\nauthentication, you have to update the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pg_hba.conf"}]},{"type":"text","value":" which can be found under\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/postgresql/12/main/pg_hba.conf"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo vi /etc/postgresql/12/main/pg_hba.conf\n\n...\nlocal   all             postgres                                peer\n...\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo vi /etc/postgresql/12/main/pg_hba.conf\n\n...\nlocal   all             postgres                                peer\n...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change the last section of the above line to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"md5"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"local   all             postgres                                md5\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"local   all             postgres                                md5\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A restart is required in order to apply the new configuration:"}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart postgresql\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo systemctl restart postgresql\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now a connection from outside the database host is possible e.g."}]},{"type":"element","tag":"code","props":{"code":"psql -U postgres -d postgres -h databasehostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"psql -U postgres -d postgres -h databasehostname\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"creation-of-additional-database-users"},"children":[{"type":"text","value":"Creation of additional database users"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A database user can be created by the following command:"}]},{"type":"element","tag":"code","props":{"code":"create user myuser with encrypted password 'Supersecret';\nCREATE ROLE\n\npostgres=# \\du\n                                   List of roles\n Role name |                         Attributes                         | Member of\n-----------+------------------------------------------------------------+-----------\n myuser    |                                                            | {}\n postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"create user myuser with encrypted password 'Supersecret';\nCREATE ROLE\n\npostgres=# \\du\n                                   List of roles\n Role name |                         Attributes                         | Member of\n-----------+------------------------------------------------------------+-----------\n myuser    |                                                            | {}\n postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"creation-of-additional-databases"},"children":[{"type":"text","value":"Creation of additional databases"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One can create new Postgres databases within an instance. Therefore you can use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"psql"}]},{"type":"text","value":"\ncommand to login (see above)."}]},{"type":"element","tag":"code","props":{"code":"CREATE DATABASE dbname OWNER myuser;\nCREATE DATABASE\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges\n-----------+----------+----------+-------------+-------------+-----------------------\n dbname    | myuser   | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"CREATE DATABASE dbname OWNER myuser;\nCREATE DATABASE\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges\n-----------+----------+----------+-------------+-------------+-----------------------\n dbname    | myuser   | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can leave the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"OWNER"}]},{"type":"text","value":" section of the command, when doing so, the current user will become\nowner of the newly created database."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To change the owner of an existing database later, you can use the following command:"}]},{"type":"element","tag":"code","props":{"code":"postgres=# alter database dbname owner to myuser;\nALTER DATABASE\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"postgres=# alter database dbname owner to myuser;\nALTER DATABASE\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"install-postgresql-12-on-ubuntu-2004-lts"},"children":[{"type":"text","value":"Install PostgreSQL 12 on Ubuntu 20.04 LTS"}]},{"type":"element","tag":"code","props":{"code":"sudo apt update\nsudo apt install -y postgresql postgresql-contrib postgresql-client\nsudo systemctl status postgresql.service\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo apt update"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo apt install -y postgresql postgresql-contrib postgresql-client"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo systemctl status postgresql.service"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"initial-database-connection"},"children":[{"type":"text","value":"Initial database connection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A local connection (from the database server) can be done by the following command:"}]},{"type":"element","tag":"code","props":{"code":"sudo -u postgres psql\n\npsql (12.12 (Ubuntu 12.12-0ubuntu0.20.04.1))\nType \"help\" for help.\n\npostgres=#\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo -u postgres psql"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"psql (12.12 (Ubuntu 12.12-0ubuntu0.20.04.1))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"Type "}]},{"type":"element","tag":"span","props":{"class":"ct-0dc4f3"},"children":[{"type":"text","value":"\"help\""}]},{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1b5dd2"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":" help."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"postgres="}]},{"type":"element","tag":"span","props":{"class":"ct-2a7bca"},"children":[{"type":"text","value":"#"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"set-password-for-postgres-database-user"},"children":[{"type":"text","value":"Set password for postgres database user"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The password for the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" database user can be set the the quick command "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\\password"}]},{"type":"text","value":"\nor by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"alter user postgres password 'Supersecret'"}]},{"type":"text","value":". A connection using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" user\nis still not possible from the \"outside\" hence to the default settings in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pg_hba.conf"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"update-pg_hbaconf-to-allow-postgres-user-connections-with-password"},"children":[{"type":"text","value":"Update pg_hba.conf to allow postgres user connections with password"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to allow connections of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"postgres"}]},{"type":"text","value":" database user not using OS user\nauthentication, you have to update the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pg_hba.conf"}]},{"type":"text","value":" which can be found under\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/postgresql/12/main/pg_hba.conf"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sudo vi /etc/postgresql/12/main/pg_hba.conf\n\n...\nlocal   all             postgres                                peer\n...\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo vi /etc/postgresql/12/main/pg_hba.conf"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bcfc83"},"children":[{"type":"text","value":"local"}]},{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"   all             postgres                                peer"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Change the last section of the above line to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"md5"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"local   all             postgres                                md5\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"local   all             postgres                                md5"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A restart is required in order to apply the new configuration:"}]},{"type":"element","tag":"code","props":{"code":"sudo systemctl restart postgresql\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"sudo systemctl restart postgresql"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now a connection from outside the database host is possible e.g."}]},{"type":"element","tag":"code","props":{"code":"psql -U postgres -d postgres -h databasehostname\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d674e"},"children":[{"type":"text","value":"psql -U postgres -d postgres -h databasehostname"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"creation-of-additional-database-users"},"children":[{"type":"text","value":"Creation of additional database users"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A database user can be created by the following command:"}]},{"type":"element","tag":"code","props":{"code":"create user myuser with encrypted password 'Supersecret';\nCREATE ROLE\n\npostgres=# \\du\n                                   List of roles\n Role name |                         Attributes                         | Member of\n-----------+------------------------------------------------------------+-----------\n myuser    |                                                            | {}\n postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"create user myuser with encrypted password 'Supersecret';\nCREATE ROLE\n\npostgres=# \\du\n                                   List of roles\n Role name |                         Attributes                         | Member of\n-----------+------------------------------------------------------------+-----------\n myuser    |                                                            | {}\n postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"creation-of-additional-databases"},"children":[{"type":"text","value":"Creation of additional databases"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One can create new Postgres databases within an instance. Therefore you can use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"psql"}]},{"type":"text","value":"\ncommand to login (see above)."}]},{"type":"element","tag":"code","props":{"code":"CREATE DATABASE dbname OWNER myuser;\nCREATE DATABASE\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges\n-----------+----------+----------+-------------+-------------+-----------------------\n dbname    | myuser   | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"CREATE DATABASE dbname OWNER myuser;\nCREATE DATABASE\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges\n-----------+----------+----------+-------------+-------------+-----------------------\n dbname    | myuser   | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |\n template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can leave the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"OWNER"}]},{"type":"text","value":" section of the command, when doing so, the current user will become\nowner of the newly created database."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To change the owner of an existing database later, you can use the following command:"}]},{"type":"element","tag":"code","props":{"code":"postgres=# alter database dbname owner to myuser;\nALTER DATABASE\n","language":"sql"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"postgres=# alter database dbname owner to myuser;\nALTER DATABASE"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-bcfc83{color:#FF7B72}.ct-2a7bca{color:#8B949E}.ct-1b5dd2{color:#FF7B72}.ct-0dc4f3{color:#A5D6FF}.ct-4d674e{color:#C9D1D9}.light .ct-4d674e{color:#657B83}.light .ct-0dc4f3{color:#2AA198}.light .ct-1b5dd2{color:#859900}.light .ct-2a7bca{color:#93A1A1}.light .ct-bcfc83{color:#073642}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install-postgresql-12-on-ubuntu-2004-lts","depth":2,"text":"Install PostgreSQL 12 on Ubuntu 20.04 LTS"},{"id":"initial-database-connection","depth":2,"text":"Initial database connection"},{"id":"set-password-for-postgres-database-user","depth":2,"text":"Set password for postgres database user","children":[{"id":"update-pg_hbaconf-to-allow-postgres-user-connections-with-password","depth":3,"text":"Update pg_hba.conf to allow postgres user connections with password"}]},{"id":"creation-of-additional-database-users","depth":2,"text":"Creation of additional database users"},{"id":"creation-of-additional-databases","depth":2,"text":"Creation of additional databases"}]}},"_type":"markdown","_id":"content:SQL:Postgress setup.md","_source":"content","_file":"SQL/Postgress setup.md","_extension":"md"},{"_path":"/typescript/add-global-variable-to-window","_dir":"typescript","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Add Global Variable To Window","description":"Sometimes you want to add global variable to your window. That thing's called global module augmentation.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you want to add global variable to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":". That thing's called "},{"type":"element","tag":"a","props":{"href":"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation","rel":["nofollow"]},"children":[{"type":"text","value":"global module augmentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say you need to call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.doFancyThings()"}]},{"type":"text","value":". For that you should augment global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":" interface in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*.d.ts"}]},{"type":"text","value":" file:"}]},{"type":"element","tag":"code","props":{"code":"declare global {\n  interface Window {\n    doFancyThings: () => void;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"declare global {\n  interface Window {\n    doFancyThings: () => void;\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is useful for declaring global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.ethereum"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.web3"}]},{"type":"text","value":") in "},{"type":"element","tag":"a","props":{"href":"/blockchain/Common%20typescript%20examples"},"children":[{"type":"text","value":"blockchain"}]},{"type":"text","value":" projects with typescript, which use wallet browser extensions."}]},{"type":"element","tag":"h2","props":{"id":"augmenting-existing-interface"},"children":[{"type":"text","value":"Augmenting existing interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, you have class "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Sample"}]},{"type":"text","value":" without any functionality:"}]},{"type":"element","tag":"code","props":{"code":"// Sample.ts\n\nexport class Sample {\n  // nothing :-)\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Sample.ts\n\nexport class Sample {\n  // nothing :-)\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then you want extend it with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"doFancyThings()"}]},{"type":"text","value":" method. That can be achieved with said "},{"type":"element","tag":"a","props":{"href":"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation","rel":["nofollow"]},"children":[{"type":"text","value":"module augmentation"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// fancyThings.ts\nimport { Sample } from \"./Sample\";\n\ndeclare module \"./Sample\" {\n  interface Sample {\n    doFancyThings: () => void;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// fancyThings.ts\nimport { Sample } from \"./Sample\";\n\ndeclare module \"./Sample\" {\n  interface Sample {\n    doFancyThings: () => void;\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sample.doFancyThings()"}]},{"type":"text","value":" by importing both "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".ts"}]},{"type":"text","value":" files:"}]},{"type":"element","tag":"code","props":{"code":"import { Sample } from \"./sample\";\nimport \"./fancyThings\";\n\nconst sample = new Sample();\nsample.doFancyThings(); // ok\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { Sample } from \"./sample\";\nimport \"./fancyThings\";\n\nconst sample = new Sample();\nsample.doFancyThings(); // ok\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This example is useful for "},{"type":"element","tag":"a","props":{"href":"./Frontend/Vue/Adding%20global%20properties%20to%20component"},"children":[{"type":"text","value":"adding global properties to component"}]},{"type":"text","value":" in vue.js."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you want to add global variable to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":". That thing's called "},{"type":"element","tag":"a","props":{"href":"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#global-augmentation","rel":["nofollow"]},"children":[{"type":"text","value":"global module augmentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Say you need to call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.doFancyThings()"}]},{"type":"text","value":". For that you should augment global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":" interface in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*.d.ts"}]},{"type":"text","value":" file:"}]},{"type":"element","tag":"code","props":{"code":"declare global {\n  interface Window {\n    doFancyThings: () => void;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"declare"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9f4fe8"},"children":[{"type":"text","value":"global"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb0dcb"},"children":[{"type":"text","value":"Window"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e23747"},"children":[{"type":"text","value":"doFancyThings"}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fac6d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is useful for declaring global "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.ethereum"}]},{"type":"text","value":" (or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window.web3"}]},{"type":"text","value":") in "},{"type":"element","tag":"a","props":{"href":"/blockchain/Common%20typescript%20examples"},"children":[{"type":"text","value":"blockchain"}]},{"type":"text","value":" projects with typescript, which use wallet browser extensions."}]},{"type":"element","tag":"h2","props":{"id":"augmenting-existing-interface"},"children":[{"type":"text","value":"Augmenting existing interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For example, you have class "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Sample"}]},{"type":"text","value":" without any functionality:"}]},{"type":"element","tag":"code","props":{"code":"// Sample.ts\n\nexport class Sample {\n  // nothing :-)\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d736"},"children":[{"type":"text","value":"// Sample.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb0dcb"},"children":[{"type":"text","value":"Sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a6d736"},"children":[{"type":"text","value":"// nothing :-)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then you want extend it with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"doFancyThings()"}]},{"type":"text","value":" method. That can be achieved with said "},{"type":"element","tag":"a","props":{"href":"https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation","rel":["nofollow"]},"children":[{"type":"text","value":"module augmentation"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// fancyThings.ts\nimport { Sample } from \"./Sample\";\n\ndeclare module \"./Sample\" {\n  interface Sample {\n    doFancyThings: () => void;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6d736"},"children":[{"type":"text","value":"// fancyThings.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-9f4fe8"},"children":[{"type":"text","value":"Sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd3371"},"children":[{"type":"text","value":"\"./Sample\""}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"declare"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd3371"},"children":[{"type":"text","value":"\"./Sample\""}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bb0dcb"},"children":[{"type":"text","value":"Sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e23747"},"children":[{"type":"text","value":"doFancyThings"}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fac6d8"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sample.doFancyThings()"}]},{"type":"text","value":" by importing both "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".ts"}]},{"type":"text","value":" files:"}]},{"type":"element","tag":"code","props":{"code":"import { Sample } from \"./sample\";\nimport \"./fancyThings\";\n\nconst sample = new Sample();\nsample.doFancyThings(); // ok\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-9f4fe8"},"children":[{"type":"text","value":"Sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd3371"},"children":[{"type":"text","value":"\"./sample\""}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cd3371"},"children":[{"type":"text","value":"\"./fancyThings\""}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2242d5"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-407cba"},"children":[{"type":"text","value":"sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-051e92"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e23747"},"children":[{"type":"text","value":"Sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f4fe8"},"children":[{"type":"text","value":"sample"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-e23747"},"children":[{"type":"text","value":"doFancyThings"}]},{"type":"element","tag":"span","props":{"class":"ct-f41518"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-a6d736"},"children":[{"type":"text","value":"// ok"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This example is useful for "},{"type":"element","tag":"a","props":{"href":"./Frontend/Vue/Adding%20global%20properties%20to%20component"},"children":[{"type":"text","value":"adding global properties to component"}]},{"type":"text","value":" in vue.js."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-407cba{color:#79C0FF}.ct-cd3371{color:#A5D6FF}.ct-a6d736{color:#8B949E}.ct-fac6d8{color:#79C0FF}.ct-051e92{color:#FF7B72}.ct-e23747{color:#D2A8FF}.ct-bb0dcb{color:#FFA657}.ct-9f4fe8{color:#C9D1D9}.ct-f41518{color:#C9D1D9}.ct-2242d5{color:#FF7B72}.light .ct-2242d5{color:#073642}.light .ct-f41518{color:#657B83}.light .ct-9f4fe8{color:#268BD2}.light .ct-bb0dcb{color:#268BD2}.light .ct-e23747{color:#268BD2}.light .ct-051e92{color:#859900}.light .ct-fac6d8{color:#859900}.light .ct-a6d736{color:#93A1A1}.light .ct-cd3371{color:#2AA198}.light .ct-407cba{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"augmenting-existing-interface","depth":2,"text":"Augmenting existing interface"}]}},"_type":"markdown","_id":"content:Typescript:Add global variable to window.md","_source":"content","_file":"Typescript/Add global variable to window.md","_extension":"md"},{"_path":"/typescript/flatten-object-with-periods","_dir":"typescript","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Flatten Object With Periods","description":"This helper generates Typescript types for i18n dictionary json\nfiles by flattening it with period delimiter. Supports plural forms.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This helper generates Typescript types for i18n dictionary json\nfiles by flattening it with period delimiter. Supports plural forms."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Used for typing "},{"type":"element","tag":"a","props":{"href":"https://www.npmjs.com/package/i18n-js","rel":["nofollow"]},"children":[{"type":"text","value":"i18n.js"}]},{"type":"text","value":" dictionaries;"}]},{"type":"element","tag":"code","props":{"code":"import en from './en.json';\ntype TranslationPath = Flatten<typeof en>;\n\nconst t = (key: TranslationPath, options?: TranslateOptions) =>\n    I18nLib.t(key, options);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import en from './en.json';\ntype TranslationPath = Flatten<typeof en>;\n\nconst t = (key: TranslationPath, options?: TranslateOptions) =>\n    I18nLib.t(key, options);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Flatten type defined here:"}]},{"type":"element","tag":"code","props":{"code":"// This one based on answer from StackOverflow:\n// https://stackoverflow.com/questions/58434389/typescript-deep-keyof-of-a-nested-object\n\nexport type Flatten<T, D extends number = 5> = [D] extends [never]\n  ? never\n  : T extends PluralForm // plural object\n  ? ''\n  : T extends object\n  ? { [K in keyof T]-?: Join<K, Flatten<T[K], Prev[D]>> }[keyof T]\n  : '';\n\n// Fix it for you plural form\ntype PluralForm = Record<'one' | 'few' | 'many', string>;\n\ntype Join<K, P> = K extends string | number\n  ? P extends string | number\n    ? `${K}${'' extends P ? '' : '.'}${P}`\n    : never\n  : never;\n\ntype Prev = [never, 0, 1, 2, 3, 4, 5, ...Array<0>];\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// This one based on answer from StackOverflow:\n// https://stackoverflow.com/questions/58434389/typescript-deep-keyof-of-a-nested-object\n\nexport type Flatten<T, D extends number = 5> = [D] extends [never]\n  ? never\n  : T extends PluralForm // plural object\n  ? ''\n  : T extends object\n  ? { [K in keyof T]-?: Join<K, Flatten<T[K], Prev[D]>> }[keyof T]\n  : '';\n\n// Fix it for you plural form\ntype PluralForm = Record<'one' | 'few' | 'many', string>;\n\ntype Join<K, P> = K extends string | number\n  ? P extends string | number\n    ? `${K}${'' extends P ? '' : '.'}${P}`\n    : never\n  : never;\n\ntype Prev = [never, 0, 1, 2, 3, 4, 5, ...Array<0>];\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This helper generates Typescript types for i18n dictionary json\nfiles by flattening it with period delimiter. Supports plural forms."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Used for typing "},{"type":"element","tag":"a","props":{"href":"https://www.npmjs.com/package/i18n-js","rel":["nofollow"]},"children":[{"type":"text","value":"i18n.js"}]},{"type":"text","value":" dictionaries;"}]},{"type":"element","tag":"code","props":{"code":"import en from './en.json';\ntype TranslationPath = Flatten<typeof en>;\n\nconst t = (key: TranslationPath, options?: TranslateOptions) =>\n    I18nLib.t(key, options);\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7924ba"},"children":[{"type":"text","value":"en"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"'./en.json'"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"TranslationPath"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Flatten"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7924ba"},"children":[{"type":"text","value":"en"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":">;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c370b3"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-53cafa"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d65140"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-430adf"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-d65140"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-24c53f"},"children":[{"type":"text","value":"TranslationPath"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-430adf"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-d65140"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-24c53f"},"children":[{"type":"text","value":"TranslateOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-d9424b"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-c370b3"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7924ba"},"children":[{"type":"text","value":"I18nLib"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d3b3f9"},"children":[{"type":"text","value":"t"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7924ba"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7924ba"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Flatten type defined here:"}]},{"type":"element","tag":"code","props":{"code":"// This one based on answer from StackOverflow:\n// https://stackoverflow.com/questions/58434389/typescript-deep-keyof-of-a-nested-object\n\nexport type Flatten<T, D extends number = 5> = [D] extends [never]\n  ? never\n  : T extends PluralForm // plural object\n  ? ''\n  : T extends object\n  ? { [K in keyof T]-?: Join<K, Flatten<T[K], Prev[D]>> }[keyof T]\n  : '';\n\n// Fix it for you plural form\ntype PluralForm = Record<'one' | 'few' | 'many', string>;\n\ntype Join<K, P> = K extends string | number\n  ? P extends string | number\n    ? `${K}${'' extends P ? '' : '.'}${P}`\n    : never\n  : never;\n\ntype Prev = [never, 0, 1, 2, 3, 4, 5, ...Array<0>];\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c68a3"},"children":[{"type":"text","value":"// This one based on answer from StackOverflow:"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c68a3"},"children":[{"type":"text","value":"// https://stackoverflow.com/questions/58434389/typescript-deep-keyof-of-a-nested-object"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Flatten"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"D"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"D"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"never"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"never"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"PluralForm"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6c68a3"},"children":[{"type":"text","value":"// plural object"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"''"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"object"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" { ["}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"keyof"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"-?:"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Join"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Flatten"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Prev"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"D"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"]>> }["}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"keyof"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"T"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6c68a3"},"children":[{"type":"text","value":"// Fix it for you plural form"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"PluralForm"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Record"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"'one'"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"'few'"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"'many'"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":">;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Join"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"number"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"number"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"}${''"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f1c77d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"'.'}${"}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-0483f2"},"children":[{"type":"text","value":"}`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"never"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"never"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f3674b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Prev"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-3e3e4f"},"children":[{"type":"text","value":"never"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-33223b"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-b26940"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-057f1c"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-3749e8"},"children":[{"type":"text","value":">];"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f1c77d{color:#A5D6FF}.ct-057f1c{color:#79C0FF}.ct-3e3e4f{color:#79C0FF}.ct-6c68a3{color:#8B949E}.ct-d3b3f9{color:#D2A8FF}.ct-24c53f{color:#FFA657}.ct-430adf{color:#FFA657}.ct-d65140{color:#FF7B72}.ct-53cafa{color:#D2A8FF}.ct-d9424b{color:#C9D1D9}.ct-c370b3{color:#FF7B72}.ct-b26940{color:#FFA657}.ct-f3674b{color:#FF7B72}.ct-0483f2{color:#A5D6FF}.ct-7924ba{color:#C9D1D9}.ct-3749e8{color:#C9D1D9}.ct-33223b{color:#FF7B72}.light .ct-33223b{color:#859900}.light .ct-3749e8{color:#657B83}.light .ct-7924ba{color:#268BD2}.light .ct-0483f2{color:#2AA198}.light .ct-f3674b{color:#073642}.light .ct-b26940{color:#268BD2}.light .ct-c370b3{color:#073642}.light .ct-d9424b{color:#657B83}.light .ct-53cafa{color:#268BD2}.light .ct-d65140{color:#859900}.light .ct-430adf{color:#657B83}.light .ct-24c53f{color:#268BD2}.light .ct-d3b3f9{color:#268BD2}.light .ct-6c68a3{color:#93A1A1}.light .ct-3e3e4f{color:#859900}.light .ct-057f1c{color:#D33682}.light .ct-f1c77d{color:#657B83}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Typescript:Flatten object with periods.md","_source":"content","_file":"Typescript/Flatten object with periods.md","_extension":"md"},{"_path":"/typescript/type-guards","_dir":"typescript","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Type Guards","description":"Useful for type checking at compile and run time:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful for type checking at compile and run time:"}]},{"type":"element","tag":"code","props":{"code":"function isFish(pet: Fish | Bird): pet is Fish {\n  return (pet as Fish).swim !== undefined;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"function isFish(pet: Fish | Bird): pet is Fish {\n  return (pet as Fish).swim !== undefined;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Usage:"}]},{"type":"element","tag":"code","props":{"code":"const pet = getSmallPet();\n \nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const pet = getSmallPet();\n \nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Useful for type checking at compile and run time:"}]},{"type":"element","tag":"code","props":{"code":"function isFish(pet: Fish | Bird): pet is Fish {\n  return (pet as Fish).swim !== undefined;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f71f08"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-db8983"},"children":[{"type":"text","value":"isFish"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-3155d7"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-72a69d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-75c3c8"},"children":[{"type":"text","value":"Fish"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-72a69d"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-75c3c8"},"children":[{"type":"text","value":"Bird"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-72a69d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3155d7"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-72a69d"},"children":[{"type":"text","value":"is"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-75c3c8"},"children":[{"type":"text","value":"Fish"}]},{"type":"element","tag":"span","props":{"class":"ct-607bf5"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-baefb8"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1ce6ca"},"children":[{"type":"text","value":"Fish"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-baefb8"},"children":[{"type":"text","value":"swim"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"!=="}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-17f6ad"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Usage:"}]},{"type":"element","tag":"code","props":{"code":"const pet = getSmallPet();\n \nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a7e237"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77cb9b"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-819d0c"},"children":[{"type":"text","value":"getSmallPet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-819d0c"},"children":[{"type":"text","value":"isFish"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-baefb8"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":")) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-baefb8"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-819d0c"},"children":[{"type":"text","value":"swim"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-d944cb"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-baefb8"},"children":[{"type":"text","value":"pet"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-819d0c"},"children":[{"type":"text","value":"fly"}]},{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06adcc"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-819d0c{color:#D2A8FF}.ct-77cb9b{color:#79C0FF}.ct-a7e237{color:#FF7B72}.ct-17f6ad{color:#79C0FF}.ct-1ce6ca{color:#FFA657}.ct-baefb8{color:#C9D1D9}.ct-d944cb{color:#FF7B72}.ct-06adcc{color:#C9D1D9}.ct-75c3c8{color:#FFA657}.ct-72a69d{color:#FF7B72}.ct-3155d7{color:#FFA657}.ct-db8983{color:#D2A8FF}.ct-607bf5{color:#C9D1D9}.ct-f71f08{color:#FF7B72}.light .ct-f71f08{color:#073642}.light .ct-607bf5{color:#657B83}.light .ct-db8983{color:#268BD2}.light .ct-3155d7{color:#657B83}.light .ct-72a69d{color:#859900}.light .ct-75c3c8{color:#268BD2}.light .ct-06adcc{color:#657B83}.light .ct-d944cb{color:#859900}.light .ct-baefb8{color:#268BD2}.light .ct-1ce6ca{color:#268BD2}.light .ct-17f6ad{color:#B58900}.light .ct-a7e237{color:#073642}.light .ct-77cb9b{color:#268BD2}.light .ct-819d0c{color:#268BD2}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Typescript:Type guards.md","_source":"content","_file":"Typescript/Type guards.md","_extension":"md"}],"navigation":[{"title":"Blockchain","_path":"/blockchain","children":[{"title":"Common Typescript Examples","_path":"/blockchain/common-typescript-examples"},{"title":"Smart Contracts","_path":"/blockchain/smart-contracts"}]},{"title":"Css","_path":"/css","children":[{"title":"Automatic Grid Like Masonry With Pure CSS","_path":"/css/automatic-grid-like-masonry-with-pure-css"},{"title":"Sass Nth Child Iterate Mixin","_path":"/css/sass-nth-child-iterate-mixin"},{"title":"Test If Browser Supports CSS Rules","_path":"/css/test-if-browser-supports-css-rules"}]},{"title":"Docker","_path":"/docker","children":[{"title":"Building Static Pages With Docker","_path":"/docker/building-static-pages-with-docker"},{"title":"Drone Ci","_path":"/docker/drone-ci"},{"title":"Github Pages With Drone Ci","_path":"/docker/github-pages-with-drone-ci"},{"title":"Private Docker Registry","_path":"/docker/private-docker-registry"},{"title":"Refresh Containers On Pull","_path":"/docker/refresh-containers-on-pull"},{"title":"Seed Dump Inside Docker","_path":"/docker/seed-dump-inside-docker"},{"title":"Wait For Mysql","_path":"/docker/wait-for-mysql"},{"title":"Wait For Redis","_path":"/docker/wait-for-redis"}]},{"title":"Frontend","_path":"/frontend","children":[{"title":"React Native","_path":"/frontend/react-native","children":[{"title":"OAuth2 Login","_path":"/frontend/react-native/oauth2-login"},{"title":"Preserve FlatList Scroll Position In React Native","_path":"/frontend/react-native/preserve-flatlist-scroll-position-in-react-native"},{"title":"Useful Comands","_path":"/frontend/react-native/useful-comands"}]},{"title":"React","_path":"/frontend/react","children":[{"title":"Axios Refresh Token On React","_path":"/frontend/react/axios-refresh-token-on-react"},{"title":"Axios With AbortController","_path":"/frontend/react/axios-with-abortcontroller"}]},{"title":"Vue","_path":"/frontend/vue","children":[{"title":"Adding Global Properties To Component","_path":"/frontend/vue/adding-global-properties-to-component"},{"title":"Make Nuxt Handle Obsidian Highlights","_path":"/frontend/vue/make-nuxt-handle-obsidian-highlights"}]}]},{"title":"Git","_path":"/git","children":[{"title":"Force Git To Use HTTPS","_path":"/git/force-git-to-use-https"},{"title":"Git Aliases And Useful Commands","_path":"/git/git-aliases-and-useful-commands"}]},{"title":"Graphql","_path":"/graphql","children":[{"title":"Apollo Client Pagination","_path":"/graphql/apollo-client-pagination"},{"title":"Refresh Token In Apollo Client","_path":"/graphql/refresh-token-in-apollo-client"}]},{"title":"Linux","_path":"/linux","children":[{"title":"Gitea For Git Hosting","_path":"/linux/gitea-for-git-hosting"},{"title":"Google Photos Alternative With Photoprism","_path":"/linux/google-photos-alternative-with-photoprism"},{"title":"Resume Or Start Screen Session","_path":"/linux/resume-or-start-screen-session"},{"title":"Rsync File With SSH","_path":"/linux/rsync-file-with-ssh"},{"title":"Setting Up NGINX","_path":"/linux/setting-up-nginx"},{"title":"SSH","_path":"/linux/ssh"}]},{"title":"Obsidian","_path":"/obsidian","children":[{"title":"Self Hosted Obsidian Sync With CouchDB","_path":"/obsidian/self-hosted-obsidian-sync-with-couchdb"}]},{"title":"Sql","_path":"/sql","children":[{"title":"MySQL And MariaDB Setup","_path":"/sql/mysql-and-mariadb-setup"},{"title":"Postgress Setup","_path":"/sql/postgress-setup"}]},{"title":"Typescript","_path":"/typescript","children":[{"title":"Add Global Variable To Window","_path":"/typescript/add-global-variable-to-window"},{"title":"Flatten Object With Periods","_path":"/typescript/flatten-object-with-periods"},{"title":"Type Guards","_path":"/typescript/type-guards"}]}]}