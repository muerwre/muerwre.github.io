{"_path":"/linux/networkmanager-vpn-exclude-local-hosts","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"NetworkManager VPN Exclude Local Hosts","description":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n/etc/NetworkManager/dispatcher.d/99-exclude with contents:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/NetworkManager/dispatcher.d/99-exclude"}]},{"type":"text","value":" with contents:"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/NetworkManager/dispatcher.d/99-exclude"}]},{"type":"text","value":" with contents:"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-8c3a56"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"INTERFACE="}]},{"type":"element","tag":"span","props":{"class":"ct-a4a374"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-0f31b7"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"ACTION="}]},{"type":"element","tag":"span","props":{"class":"ct-a4a374"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-0f31b7"},"children":[{"type":"text","value":"2"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a78c26"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c0c24e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-a4a374"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-0f31b7"},"children":[{"type":"text","value":"ACTION"}]},{"type":"element","tag":"span","props":{"class":"ct-c0c24e"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a78c26"},"children":[{"type":"text","value":"in"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"    vpn-up)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"        route add -host example.org gw 192.168.1.1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"        ;;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"    vpn-down)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"        route del -host example.org gw 192.168.1.1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7d5d20"},"children":[{"type":"text","value":"        ;;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a78c26"},"children":[{"type":"text","value":"esac"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c0c24e{color:#A5D6FF}.ct-a78c26{color:#FF7B72}.ct-0f31b7{color:#C9D1D9}.ct-a4a374{color:#C9D1D9}.ct-7d5d20{color:#C9D1D9}.ct-8c3a56{color:#8B949E}.light .ct-8c3a56{color:#93A1A1}.light .ct-7d5d20{color:#657B83}.light .ct-a4a374{color:#859900}.light .ct-0f31b7{color:#268BD2}.light .ct-a78c26{color:#859900}.light .ct-c0c24e{color:#2AA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Linux:NetworkManager VPN exclude local hosts.md","_source":"content","_file":"Linux/NetworkManager VPN exclude local hosts.md","_extension":"md"}