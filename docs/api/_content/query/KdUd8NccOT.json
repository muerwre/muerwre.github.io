{"_path":"/linux/networkmanager-vpn-exclude-local-hosts","_dir":"linux","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"NetworkManager VPN Exclude Local Hosts","description":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n/etc/NetworkManager/dispatcher.d/99-exclude with contents:","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/NetworkManager/dispatcher.d/99-exclude"}]},{"type":"text","value":" with contents:"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For network manager to exclude specific hosts from routing through all VPN connections, create file\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/etc/NetworkManager/dispatcher.d/99-exclude"}]},{"type":"text","value":" with contents:"}]},{"type":"element","tag":"code","props":{"code":"#!/bin/bash\n\nINTERFACE=$1\nACTION=$2\n\ncase \"$ACTION\" in\n    vpn-up)\n        route add -host example.org gw 192.168.1.1\n        ;;\n    vpn-down)\n        route del -host example.org gw 192.168.1.1\n        ;;\nesac\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2df46d"},"children":[{"type":"text","value":"#!/bin/bash"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"INTERFACE="}]},{"type":"element","tag":"span","props":{"class":"ct-73f822"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-68c1f8"},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"ACTION="}]},{"type":"element","tag":"span","props":{"class":"ct-73f822"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-68c1f8"},"children":[{"type":"text","value":"2"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9252d1"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b90b72"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-73f822"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-68c1f8"},"children":[{"type":"text","value":"ACTION"}]},{"type":"element","tag":"span","props":{"class":"ct-b90b72"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9252d1"},"children":[{"type":"text","value":"in"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"    vpn-up)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"        route add -host example.org gw 192.168.1.1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"        ;;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"    vpn-down)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"        route del -host example.org gw 192.168.1.1"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-24db4b"},"children":[{"type":"text","value":"        ;;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9252d1"},"children":[{"type":"text","value":"esac"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b90b72{color:#A5D6FF}.ct-9252d1{color:#FF7B72}.ct-68c1f8{color:#C9D1D9}.ct-73f822{color:#C9D1D9}.ct-24db4b{color:#C9D1D9}.ct-2df46d{color:#8B949E}.light .ct-2df46d{color:#93A1A1}.light .ct-24db4b{color:#657B83}.light .ct-73f822{color:#859900}.light .ct-68c1f8{color:#268BD2}.light .ct-9252d1{color:#859900}.light .ct-b90b72{color:#2AA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:Linux:NetworkManager VPN exclude local hosts.md","_source":"content","_file":"Linux/NetworkManager VPN exclude local hosts.md","_extension":"md"}